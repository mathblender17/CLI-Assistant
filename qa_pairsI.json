[
  {
    "question": "<p>I accidentally committed the wrong files to <a href=\"https://en.wikipedia.org/wiki/Git\" rel=\"noreferrer\">Git</a> but haven't pushed the commit to the server yet.</p>\n<p>How do I undo those commits from the <em>local</em> repository?</p>\n",
    "answer": "<h2>Undo a commit &amp; redo</h2>\n<pre class=\"lang-bash prettyprint-override\"><code>$ git commit -m &quot;Something terribly misguided&quot; # (0: Your Accident)\n$ git reset HEAD~                              # (1)\n# === If you just want to undo the commit, stop here! ===\n[ edit files as necessary ]                    # (2)\n$ git add .                                    # (3)\n$ git commit -c ORIG_HEAD                      # (4)\n</code></pre>\n<ol>\n<li><a href=\"https://git-scm.com/docs/git-reset\" rel=\"noreferrer\"><code>git reset</code></a> is the command responsible for the <strong>undo</strong>. It will undo your last commit while <strong>leaving your working tree (the state of your files on disk) untouched.</strong> You'll need to add them again before you can commit them again.</li>\n<li>Make corrections to <a href=\"https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified#_the_working_directory\" rel=\"noreferrer\">working tree</a> files.</li>\n<li><a href=\"https://git-scm.com/docs/git-add\" rel=\"noreferrer\"><code>git add</code></a> anything that you want to include in your new commit.</li>\n<li>Commit the changes, reusing the old commit message. <code>reset</code> copied the old head to <code>.git/ORIG_HEAD</code>; <a href=\"https://git-scm.com/docs/git-commit#Documentation/git-commit.txt--cltcommitgt\" rel=\"noreferrer\"><code>commit</code> with <code>-c ORIG_HEAD</code></a> will open an editor, which initially contains the log message from the old commit and allows you to edit it. If you do not need to edit the message, you could use the <a href=\"https://git-scm.com/docs/git-commit#Documentation/git-commit.txt--Cltcommitgt\" rel=\"noreferrer\"><code>-C</code></a> option.</li>\n</ol>\n<p><strong>Alternatively, to edit the previous commit (or just its commit message)</strong>, <a href=\"https://stackoverflow.com/q/179123/1146608\"><code>commit --amend</code></a> will add changes within the current index to the previous commit.</p>\n<p><strong>To remove (not revert) a commit that has been pushed to the server</strong>, rewriting history with <code>git push origin main --force[-with-lease]</code> is necessary. <a href=\"https://stackoverflow.com/q/52823692/4096791\">It's <em>almost always</em> a bad idea to use <code>--force</code>; prefer <code>--force-with-lease</code></a> instead, and as noted in <a href=\"https://git-scm.com/docs/git-commit#Documentation/git-commit.txt---amend\" rel=\"noreferrer\" title=\"Git - git-commit Documentation\">the git manual</a>:</p>\n<blockquote>\n<p>You should understand the implications of rewriting history if you amend a commit that has already been published.</p>\n</blockquote>\n<hr />\n<h3>Further Reading</h3>\n<p><a href=\"https://stackoverflow.com/questions/34519665/how-to-move-head-back-to-a-previous-location-detached-head/34519716#34519716\">You can use <code>git reflog</code> to determine the SHA-1</a> for the commit to which you wish to revert. Once you have this value, use the sequence of commands as explained above.</p>\n<hr />\n<p><code>HEAD~</code> is the same as <code>HEAD~1</code>. The article <a href=\"https://stackoverflow.com/a/46350644/5175709\">What is the HEAD in git?</a> is helpful if you want to uncommit multiple commits.</p>\n"
  },
  {
    "question": "<p>Failed Attempts to Delete a Remote Branch:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ git branch -d remotes/origin/bugfix\nerror: branch 'remotes/origin/bugfix' not found.\n\n$ git branch -d origin/bugfix\nerror: branch 'origin/bugfix' not found.\n\n$ git branch -rd origin/bugfix\nDeleted remote branch origin/bugfix (was 2a14ef7).\n\n$ git push\nEverything up-to-date\n\n$ git pull\nFrom github.com:gituser/gitproject\n\n* [new branch] bugfix -&gt; origin/bugfix\nAlready up-to-date.\n</code></pre>\n<p>How do I properly delete the <code>remotes/origin/bugfix</code> branch both locally and remotely?</p>\n",
    "answer": "<h1>Executive Summary</h1>\n<pre><code>git push -d &lt;remote_name&gt; &lt;branchname&gt;   # Delete remote\ngit branch -d &lt;branchname&gt;               # Delete local\n</code></pre>\n<p><strong>Note:</strong> In most cases, <code>&lt;remote_name&gt;</code> will be <code>origin</code>.</p>\n<h1>Delete Local Branch</h1>\n<p>To delete the <em><strong>local</strong></em> branch, use one of the following:</p>\n<pre><code>git branch -d &lt;branch_name&gt;\ngit branch -D &lt;branch_name&gt;\n</code></pre>\n<ul>\n<li>The <code>-d</code> option is an alias for <code>--delete</code>, which only deletes the branch if it has already been fully merged in its upstream branch.</li>\n<li>The <code>-D</code> option is an alias for <code>--delete --force</code>, which deletes the branch &quot;irrespective of its merged status.&quot; [Source: <code>man git-branch</code>]</li>\n<li>As of <a href=\"https://github.com/git/git/blob/master/Documentation/RelNotes/2.3.0.txt\" rel=\"noreferrer\">Git v2.3</a>, <code>git branch -d</code> (delete) learned to honor the <code>-f</code> (force) flag.</li>\n<li>You will receive an error if you try to delete the currently selected branch.</li>\n</ul>\n<h1>Delete Remote Branch</h1>\n<p>As of <a href=\"https://github.com/gitster/git/blob/master/Documentation/RelNotes/1.7.0.txt\" rel=\"noreferrer\">Git v1.7.0</a>, you can delete a <em><strong>remote</strong></em> branch using</p>\n<pre><code>$ git push &lt;remote_name&gt; --delete &lt;branch_name&gt;\n</code></pre>\n<p>which might be easier to remember than</p>\n<pre><code>$ git push &lt;remote_name&gt; :&lt;branch_name&gt;\n</code></pre>\n<p>which was added in <a href=\"https://github.com/gitster/git/blob/master/Documentation/RelNotes/1.5.0.txt\" rel=\"noreferrer\">Git v1.5.0</a> &quot;to delete a remote branch or a tag.&quot;</p>\n<p>Starting with <a href=\"https://github.com/git/git/blob/master/Documentation/RelNotes/2.8.0.txt\" rel=\"noreferrer\">Git v2.8.0</a>, you can also use <code>git push</code> with the <code>-d</code> option as an alias for <code>--delete</code>. Therefore, the version of Git you have installed will dictate whether you need to use the easier or harder syntax.</p>\n<h2>Delete Remote Branch [Original Answer from 5-Jan-2010]</h2>\n<p>From Chapter 3 of <a href=\"http://git-scm.com/book/en/Git-Branching-Remote-Branches\" rel=\"noreferrer\"><em>Pro Git</em></a> by Scott Chacon:</p>\n<blockquote>\n<h3>Deleting Remote Branches</h3>\n<p>Suppose you’re done with a remote branch — say, you and your collaborators are finished with a feature and have merged it into your remote’s main branch (or whatever branch your stable code-line is in). You can delete a remote branch using the rather obtuse syntax <code>git push [remotename] :[branch]</code>. If you want to delete your <code>serverfix</code> branch from the server, you run the following:</p>\n<pre><code>$ git push origin :serverfix\nTo git@github.com:schacon/simplegit.git\n - [deleted]         serverfix\n</code></pre>\n<p>Boom. No more branches on your server. You may want to dog-ear this page, because you’ll need that command, and you’ll likely forget the syntax. A way to remember this command is by recalling the <code>git push [remotename] [localbranch]:[remotebranch]</code> syntax that we went over a bit earlier. If you leave off the <code>[localbranch]</code> portion, then you’re basically saying, “Take nothing on my side and make it be <code>[remotebranch]</code>.”</p>\n</blockquote>\n<p>I ran <code>git push origin :bugfix</code>, and it worked beautifully. Scott Chacon was right—I will want to <a href=\"http://en.wiktionary.org/wiki/dogear#Verb\" rel=\"noreferrer\">dog-ear</a> that page (or virtually dog ear-by answering this on Stack Overflow).</p>\n<h1>Fetch changes</h1>\n<p>Finally, execute the following on other machines to propagate changes:</p>\n<pre><code># Fetch changes from all remotes and locally delete \n# remote deleted branches/tags etc\n# --prune will do the job :-;\ngit fetch --all --prune\n</code></pre>\n"
  },
  {
    "question": "<p>What are the differences between <a href=\"https://git-scm.com/docs/git-pull\" rel=\"noreferrer\"><code>git pull</code></a> and <a href=\"https://git-scm.com/docs/git-fetch\" rel=\"noreferrer\"><code>git fetch</code></a>?</p>\n",
    "answer": "<p>In the simplest terms, <a href=\"https://git-scm.com/docs/git-pull\" rel=\"noreferrer\"><code>git pull</code></a> does a <a href=\"https://git-scm.com/docs/git-fetch\" rel=\"noreferrer\"><code>git fetch</code></a> followed by a <a href=\"https://git-scm.com/docs/git-merge\" rel=\"noreferrer\"><code>git merge</code></a>.</p>\n<hr />\n<p><code>git fetch</code> updates your remote-tracking branches under <code>refs/remotes/&lt;remote&gt;/</code>. This operation is safe to run at any time since it never changes any of your local branches under <code>refs/heads</code>.</p>\n<p><code>git pull</code> brings a local branch up-to-date with its remote version, while also updating your other remote-tracking branches.</p>\n<p>From the Git documentation for <a href=\"https://git-scm.com/docs/git-pull\" rel=\"noreferrer\"><code>git pull</code></a>:</p>\n<blockquote>\n<p><code>git pull</code> runs <code>git fetch</code> with the given parameters and then depending on configuration options or command line flags, will call either <code>git rebase</code> or <code>git merge</code> to reconcile diverging branches.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>How can I rename a local branch which has not yet been pushed to a remote repository?</p>\n<p>Related:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1526794/rename-master-branch-for-both-local-and-remote-git-repositories?answertab=votes#tab-top\">Rename master branch for both local and remote Git repositories</a></li>\n<li><a href=\"https://stackoverflow.com/questions/30590083/how-to-rename-a-remote-git-branch-name/30590238#30590238\">How do I rename both a Git local and remote branch name?</a></li>\n</ul>\n",
    "answer": "<p>To rename the current branch:</p>\n<pre><code>git branch -m &lt;newname&gt;\n</code></pre>\n<p>To rename a branch while pointed to any branch:</p>\n<pre><code>git branch -m &lt;oldname&gt; &lt;newname&gt;\n</code></pre>\n<p><code>-m</code> is short for <code>--move</code>.</p>\n<hr />\n<p>To push the  local branch and reset the upstream branch:</p>\n<pre><code>git push origin -u &lt;newname&gt;\n</code></pre>\n<p>To delete the  remote branch:</p>\n<pre><code>git push origin --delete &lt;oldname&gt;\n</code></pre>\n<hr />\n<p>To create a <code>git rename</code> alias:</p>\n<pre><code>git config --global alias.rename 'branch -m'\n</code></pre>\n<hr />\n<p>On Windows or another case-insensitive filesystem, use <code>-M</code> if there are only capitalization changes in the name. Otherwise, Git will throw a <em>&quot;branch already exists&quot;</em> error.</p>\n<pre><code>git branch -M &lt;newname&gt;\n</code></pre>\n"
  },
  {
    "question": "<p>I mistakenly added files to Git using the command:</p>\n<pre><code>git add myfile.txt\n</code></pre>\n<p>I have not yet run <code>git commit</code>. How do I undo this so that these changes will not be included in the commit?</p>\n",
    "answer": "<h3>To unstage a specific file</h3>\n<pre><code>git reset &lt;file&gt;\n</code></pre>\n<p>That will remove the file from the current index (the &quot;about to be committed&quot; list) without changing anything else.</p>\n<h3>To unstage all files from the current change set:</h3>\n<pre><code>git reset\n</code></pre>\n<hr />\n<p>In old versions of Git, the above commands are equivalent to <code>git reset HEAD &lt;file&gt;</code> and <code>git reset HEAD</code> respectively, and will fail if <code>HEAD</code> is undefined (because you haven't yet made any commits in your repository) or ambiguous (because you created a branch called <code>HEAD</code>, which is a stupid thing that you shouldn't do). This <a href=\"https://git.kernel.org/cgit/git/git.git/tree/Documentation/RelNotes/1.8.2.txt#n179\" rel=\"noreferrer\">was changed in Git 1.8.2</a>, though, so in modern versions of Git you can use the commands above even prior to making your first commit:</p>\n<blockquote>\n<p>&quot;git reset&quot; (without options or parameters) used to error out when\nyou do not have any commits in your history, but it now gives you\nan empty index (to match non-existent commit you are not even on).</p>\n</blockquote>\n<p>Documentation: <a href=\"https://git-scm.com/docs/git-reset\" rel=\"noreferrer\"><strong>git reset</strong></a></p>\n"
  },
  {
    "question": "<p>How do I force an overwrite of local files on a <code>git pull</code>? My local repository contains a file of the same filename as on the server.</p>\n<blockquote>\n<p>error: Untracked working tree file 'example.txt' would be overwritten by merge</p>\n</blockquote>\n",
    "answer": "<blockquote>\n<h2>⚠ Warning:</h2>\n<p>Any uncommitted local change to tracked files will be lost, <strong>even if staged</strong>.</p>\n<p>But any local file that's <em>not</em> tracked by Git will <em>not</em> be affected.</p>\n</blockquote>\n<hr />\n<p>First, update all <code>origin/&lt;branch&gt;</code> refs to latest:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git fetch --all\n</code></pre>\n<p>Backup your current branch (e.g. <code>main</code>):</p>\n<pre><code>git branch backup-main\n</code></pre>\n<p>Jump to the latest commit on <code>origin/main</code> and checkout those files:</p>\n<pre><code>git reset --hard origin/main\n</code></pre>\n<h3>Explanation:</h3>\n<p><code>git fetch</code> downloads the latest from remote without trying to merge or rebase anything.</p>\n<p><code>git reset</code> resets the master branch to what you just fetched. The <code>--hard</code> option changes all the files in your working tree to match the files in <code>origin/main</code>.</p>\n<hr />\n<h3>Maintain current local commits</h3>\n<p><sup>[*]</sup>: It's worth noting that it is possible to maintain current local commits by creating a branch from <code>main</code> before resetting:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git checkout main\ngit branch new-branch-to-save-current-commits\ngit fetch --all\ngit reset --hard origin/main\n</code></pre>\n<p>After this, all of the old commits will be kept in <code>new-branch-to-save-current-commits</code>.</p>\n<h3>Uncommitted changes</h3>\n<p>Uncommitted changes, even if staged (with <code>git add</code>), will be lost. Make sure to <code>stash</code> or commit anything you need. For example, run the following:</p>\n<pre><code>git stash\n</code></pre>\n<p>And later (after <code>git reset</code>), reapply these uncommitted changes:</p>\n<pre><code>git stash pop\n</code></pre>\n<blockquote>\n<p>Which may create merge conflicts.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>How do I check out the remote <code>test</code> branch? I can see it with <code>git branch -r</code>. I tried:</p>\n<ul>\n<li><code>git checkout test</code>, which does nothing</li>\n<li><code>git checkout origin/test</code> gives <code>* (no branch)</code></li>\n</ul>\n",
    "answer": "<p>The answer has been split depending on whether there is one remote repository configured or multiple. The reason for this is that for the single remote case, some of the commands can be simplified as there is less ambiguity.</p>\n<p><strong>Updated for Git 2.23:</strong> For older versions, see the section at the end.</p>\n<h2>With One Remote</h2>\n<p>In both cases, start by fetching from the remote repository to make sure you have all the latest changes downloaded.</p>\n<pre><code>$ git fetch\n</code></pre>\n<p>This will fetch all of the remote branches for you. You can see the branches available for checkout with:</p>\n<pre><code>$ git branch -v -a\n\n...\nremotes/origin/test\n</code></pre>\n<p>The branches that start with <code>remotes/*</code> can be thought of as read only copies of the remote branches. To work on a branch you need to create a local branch from it. This is done with the Git command <code>switch</code> (since Git 2.23) by giving it the name of the remote branch (minus the remote name):</p>\n<pre><code>$ git switch test\n</code></pre>\n<p>In this case Git is guessing (can be disabled with <code>--no-guess</code>) that you are trying to checkout and track the remote branch with the same name.</p>\n<h2>With Multiple Remotes</h2>\n<p>In the case where multiple remote repositories exist, the remote repository needs to be explicitly named.</p>\n<p>As before, start by fetching the latest remote changes:</p>\n<pre><code>$ git fetch origin\n</code></pre>\n<p>This will fetch all of the remote branches for you. You can see the branches available for checkout with:</p>\n<pre><code>$ git branch -v -a\n</code></pre>\n<p>With the remote branches in hand, you now need to check out the branch you are interested in with <code>-c</code> to create a new local branch:</p>\n<pre><code>$ git switch -c test origin/test\n</code></pre>\n<p>For more information about using <code>git switch</code>:</p>\n<pre><code>$ man git-switch\n</code></pre>\n<h2>Prior to Git 2.23</h2>\n<p><code>git switch</code> was added in Git 2.23, prior to this <code>git checkout</code> was used to switch branches.</p>\n<p>To checkout out with only a single remote repository:</p>\n<pre><code>git checkout test\n</code></pre>\n<p>if there are multiple remote repositories configured then it becomes a bit longer</p>\n<pre><code>git checkout -b test &lt;name of remote&gt;/test\n</code></pre>\n"
  },
  {
    "question": "<p>I put a file that was previously being tracked by Git onto the <code>.gitignore</code> list. However, the file still shows up in <code>git status</code> after it is edited. How do I force Git to completely forget the file?</p>\n",
    "answer": "<p><code>.gitignore</code> will prevent untracked files from being added (without an <code>add -f</code>) to the set of files tracked by Git. However, Git will continue to track any files that are already being tracked.</p>\n<p><em><strong>Updated Answer in 2024</strong></em></p>\n<p>Do NOT use <code>git rm --cached &lt;file&gt;</code> if you ever want to see that file again. It will remove it from git, and also your local machine.</p>\n<p>If you want to keep the file locally, but remove it from git tracking, use the answer by Konstantin. In short, use the following instead of <code>git rm</code>:</p>\n<p><code>git update-index --skip-worktree &lt;file&gt;</code></p>\n<p>However, according to the official <a href=\"https://git-scm.com/docs/git-update-index\" rel=\"noreferrer\">git documentation</a>:</p>\n<blockquote>\n<p>Users often try to use the assume-unchanged and skip-worktree bits to tell Git to ignore changes to files that are tracked. This does not work as expected, since Git may still check working tree files against the index when performing certain operations. In general, Git does not provide a way to ignore changes to tracked files, so alternate solutions are recommended.</p>\n</blockquote>\n<p>Therefore, you should still consider using the original answer below.</p>\n<p><em><strong>Original Answer</strong></em></p>\n<p><strong>WARNING: This will remove the physical file from your local machine and other developers' machines on your or their next <code>git pull</code>.</strong></p>\n<p>To stop tracking a file, we must remove it from the index:</p>\n<pre><code>git rm --cached &lt;file&gt;\n</code></pre>\n<p>To remove a folder and all files in the folder recursively:</p>\n<pre><code>git rm -r --cached &lt;folder&gt;\n</code></pre>\n<p>The removal of the file from the head revision will happen on the next commit.</p>\n"
  },
  {
    "question": "<p>How do I delete untracked local files from the current working tree?</p>\n",
    "answer": "<blockquote>\n<h2><a href=\"https://git-scm.com/docs/git-clean\" rel=\"noreferrer\">git-clean</a> - Remove untracked files from the working tree</h2>\n<h3>Synopsis</h3>\n<pre><code>git clean [-d] [-f] [-i] [-n] [-q] [-e &lt;pattern&gt;] [-x | -X] [--] &lt;path&gt;…​\n</code></pre>\n<h3>Description</h3>\n<p>Cleans the working tree by recursively removing files that are not under version control, <strong>starting from the current directory</strong>.</p>\n<p>Normally, only files unknown to Git are removed, but if the <code>-x</code> option is specified, ignored files are also removed. This can, for example, be useful to remove all build products.</p>\n<p>If any optional <code>&lt;path&gt;...</code> arguments are given, only those paths are affected.</p>\n</blockquote>\n<hr />\n<p>Step 1 is to show what will be deleted by using the <code>-n</code> option:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code># Print out the list of files and directories which will be removed (dry run)\ngit clean -n -d\n</code></pre>\n<p>Clean Step - <strong>beware: this will delete files</strong>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Delete the files from the repository\ngit clean -f\n</code></pre>\n<ul>\n<li>To remove directories, run <code>git clean -f -d</code> or <code>git clean -fd</code></li>\n<li>To remove ignored files, run <code>git clean -f -X</code> or <code>git clean -fX</code></li>\n<li>To remove ignored and non-ignored files, run <code>git clean -f -x</code> or <code>git clean -fx</code></li>\n</ul>\n<p><strong>Note</strong> the case difference on the <code>X</code> for the two latter commands.</p>\n<p>If <code>clean.requireForce</code> is set to &quot;true&quot; (the default) in your configuration, one needs to specify <code>-f</code> otherwise nothing will actually happen.</p>\n<p>Again see the <a href=\"http://git-scm.com/docs/git-clean\" rel=\"noreferrer\"><code>git-clean</code></a> docs for more information.</p>\n<hr />\n<blockquote>\n<h3>Options</h3>\n<p><strong><code>-f</code>, <code>--force</code></strong></p>\n<p>If the Git configuration variable clean.requireForce is not set to\nfalse, git clean will refuse to run unless given <code>-f</code>, <code>-n</code> or <code>-i</code>.</p>\n<p><strong><code>-x</code></strong></p>\n<p>Don’t use the standard ignore rules read from .gitignore (per\ndirectory) and <code>$GIT_DIR/info/exclude</code>, but do still use the ignore\nrules given with <code>-e</code> options. This allows removing all untracked files,\nincluding build products. This can be used (possibly in conjunction\nwith git reset) to create a pristine working directory to test a clean\nbuild.</p>\n<p><strong><code>-X</code></strong></p>\n<p>Remove only files ignored by Git. This may be useful to rebuild\neverything from scratch, but keep manually created files.</p>\n<p><strong><code>-n</code>, <code>--dry-run</code></strong></p>\n<p>Don’t actually remove anything, just show what would be done.</p>\n<p><strong><code>-d</code></strong></p>\n<p>Remove untracked directories in addition to untracked files. If an\nuntracked directory is managed by a different Git repository, it is\nnot removed by default. Use <code>-f</code> option twice if you really want to\nremove such a directory.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>How do I find all files containing a specific string of text within their file contents?</p>\n<p>The following doesn't work. It seems to display every single file in the system.</p>\n<pre class=\"lang-none prettyprint-override\"><code>find / -type f -exec grep -H 'text-to-find-here' {} \\;\n</code></pre>\n",
    "answer": "<p>Do the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>grep -rnw '/path/to/somewhere/' -e 'pattern'\n</code></pre>\n<ul>\n<li><code>-r</code> or <code>-R</code> is recursive,</li>\n<li><code>-n</code> is line number, and</li>\n<li><code>-w</code> stands for match the whole word.</li>\n<li><code>-l</code> (lower-case L) can be added to just give the file name of matching files.</li>\n<li><code>-e</code> is the pattern used during the search</li>\n</ul>\n<p>Along with these, <code>--exclude</code>, <code>--include</code>, <code>--exclude-dir</code> flags could be used for efficient searching:</p>\n<ul>\n<li><p>This will only search through those files which have .c or .h extensions:</p>\n<pre class=\"lang-none prettyprint-override\"><code>grep --include=\\*.{c,h} -rnw '/path/to/somewhere/' -e &quot;pattern&quot;\n</code></pre>\n</li>\n<li><p>This will exclude searching all the files ending with .o extension:</p>\n<pre class=\"lang-none prettyprint-override\"><code>grep --exclude=\\*.o -rnw '/path/to/somewhere/' -e &quot;pattern&quot;\n</code></pre>\n</li>\n<li><p>For directories it's possible to exclude one or more directories using the <code>--exclude-dir</code> parameter. For example, this will exclude the dirs <code>dir1/</code>, <code>dir2/</code> and all of them matching <code>*.dst/</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>grep --exclude-dir={dir1,dir2,*.dst} -rnw '/path/to/search/' -e &quot;pattern&quot;\n</code></pre>\n</li>\n</ul>\n<p>This works very well for me, to achieve almost the same purpose like yours.</p>\n<p>For more options, see <a href=\"https://ss64.com/bash/grep.html\" rel=\"noreferrer\"><code>man grep</code></a>.</p>\n"
  },
  {
    "question": "<p>I wrote the wrong thing in a commit message.</p>\n\n<p>How can I change the message? The commit has not been pushed yet.</p>\n",
    "answer": "<h1>Amending the most recent commit message</h1>\n<pre class=\"lang-sh prettyprint-override\"><code>git commit --amend\n</code></pre>\n<p>will open your editor, allowing you to change the commit message of the most recent commit. Additionally, you can set the commit message directly in the command line with:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>git commit --amend -m &quot;New commit message&quot;\n</code></pre>\n<p>…however, this can make multi-line commit messages or small corrections more cumbersome to enter.</p>\n<p>Make sure you don't have any working copy changes <em>staged</em> before doing this or they will get committed too. (<em>Unstaged</em> changes will not get committed.)</p>\n<h2>Changing the message of a commit that you've already pushed to your remote branch</h2>\n<p>If you've already pushed your commit up to your remote branch, then - after amending your commit locally (as described above) - you'll also <a href=\"https://stackoverflow.com/questions/41003071/why-must-i-force-push-after-changing-a-commit-message\">need to force push the commit</a> with:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git push &lt;remote&gt; &lt;branch&gt; --force\n# Or\ngit push &lt;remote&gt; &lt;branch&gt; -f\n</code></pre>\n<p><strong>Warning: force-pushing will overwrite the remote branch with the state of your local one</strong>. If there are commits on the remote branch that you don't have in your local branch, you <em>will</em> lose those commits.</p>\n<p><strong>Warning: be cautious about amending commits that you have already shared with other people.</strong> Amending commits essentially <em>rewrites</em> them to have different <a href=\"https://en.wikipedia.org/wiki/SHA-1\" rel=\"noreferrer\">SHA</a> IDs, which poses a problem if other people have copies of the old commit that you've rewritten. Anyone who has a copy of the old commit will need to synchronize their work with your newly re-written commit, which can sometimes be difficult, so make sure you coordinate with others when attempting to rewrite shared commit history, or just avoid rewriting shared commits altogether.</p>\n<hr />\n<h3>Perform an interactive rebase</h3>\n<p>Another option is to use interactive rebase.\nThis allows you to edit any message you want to update even if it's not the latest message.</p>\n<p>In order to do a Git squash, follow these steps:</p>\n<pre><code>// n is the number of commits up to the last commit you want to be able to edit\ngit rebase -i HEAD~n\n</code></pre>\n<p>Once you squash your commits - choose the <code>e/r</code> for editing the message:</p>\n<p><a href=\"https://i.sstatic.net/LVcm9.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/LVcm9.png\" alt=\"Screenshot of terminal while editing commit\" /></a></p>\n<h3>Important note about interactive rebase</h3>\n<p>When you use <code>git rebase -i HEAD~n</code> there can be <strong>more</strong> than n commits. Git will &quot;collect&quot; all the commits in the last n commits, and if there was a merge somewhere in between that range you will see all the commits as well, so the outcome will be n + .</p>\n<h3>Good tip:</h3>\n<p>If you have to do it for more than a single branch and you might face conflicts when amending the content, set up <a href=\"https://stackoverflow.com/questions/35415925/is-it-possible-to-setup-git-merge-for-automatic-resolving-git-rerere/35417944#35417944\"><code>git rerere</code></a> and let Git resolve those conflicts automatically for you.</p>\n<hr />\n<h2>Documentation</h2>\n<ul>\n<li><p><a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-commit.html\" rel=\"noreferrer\">git-commit(1) Manual Page</a></p>\n</li>\n<li><p><a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html\" rel=\"noreferrer\">git-rebase(1) Manual Page</a></p>\n</li>\n<li><p><a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-push.html\" rel=\"noreferrer\">git-push(1) Manual Page</a></p>\n</li>\n</ul>\n"
  },
  {
    "question": "<p>How do I revert from my current state to a snapshot made on a certain commit?</p>\n\n<p>If I do <code>git log</code>, then I get the following output:</p>\n\n<pre><code>$ git log\ncommit a867b4af366350be2e7c21b8de9cc6504678a61b`\nAuthor: Me &lt;me@me.com&gt;\nDate:   Thu Nov 4 18:59:41 2010 -0400\n\nblah blah blah...\n\ncommit 25eee4caef46ae64aa08e8ab3f988bc917ee1ce4\nAuthor: Me &lt;me@me.com&gt;\nDate:   Thu Nov 4 05:13:39 2010 -0400\n\nmore blah blah blah...\n\ncommit 0766c053c0ea2035e90f504928f8df3c9363b8bd\nAuthor: Me &lt;me@me.com&gt;\nDate:   Thu Nov 4 00:55:06 2010 -0400\n\nAnd yet more blah blah...\n\ncommit 0d1d7fc32e5a947fbd92ee598033d85bfc445a50\nAuthor: Me &lt;me@me.com&gt;\nDate:   Wed Nov 3 23:56:08 2010 -0400\n\nYep, more blah blah.\n</code></pre>\n\n<p>How do I revert to the commit from November 3, i.e. commit <code>0d1d7fc</code>?</p>\n",
    "answer": "<p>This depends a lot on what you mean by &quot;revert&quot;.</p>\n<h2>Temporarily switch to a different commit</h2>\n<p>If you want to temporarily go back to it, fool around, then come back to where you are, all you have to do is check out the desired commit:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># This will detach your HEAD, that is, leave you with no branch checked out:\ngit checkout 0d1d7fc32\n</code></pre>\n<p>Or if you want to make commits while you're there, go ahead and make a new branch while you're at it:</p>\n<pre><code>git checkout -b old-state 0d1d7fc32\n</code></pre>\n<p>To go back to where you were, just check out the branch you were on again. (If you've made changes, as always when switching branches, you'll have to deal with them as appropriate. You could reset to throw them away; you could stash, checkout, stash pop to take them with you; you could commit them to a branch there if you want a branch there.)</p>\n<h2>Hard delete unpublished commits</h2>\n<p>If, on the other hand, you want to really get rid of everything you've done since then, there are two possibilities. One, if you haven't published any of these commits, simply reset:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># This will destroy any local modifications.\n# Don't do it if you have uncommitted work you want to keep.\ngit reset --hard 0d1d7fc32\n\n# Alternatively, if there's work to keep:\ngit stash\ngit reset --hard 0d1d7fc32\ngit stash pop\n# This saves the modifications, then reapplies that patch after resetting.\n# You could get merge conflicts, if you've modified things which were\n# changed since the commit you reset to.\n</code></pre>\n<p>If you mess up, you've already thrown away your local changes, but you can at least get back to where you were before by resetting again.</p>\n<h2>Undo published commits with new commits</h2>\n<p>On the other hand, if you've published the work, you probably don't want to reset the branch, since that's effectively rewriting history. In that case, you could indeed revert the commits. In many enterprise organisations, the concept of &quot;protected&quot; branches will even prevent history from being rewritten on some major branches. In this case, reverting is your only option.</p>\n<p>With Git, revert has a very specific meaning: create a commit with the reverse patch to cancel it out. This way you don't rewrite any history.</p>\n<p>First figure out what commits to revert. Depending on the technique chosen below, you want to either revert only the merge commits, or only the non-merge commits.</p>\n\n<pre><code># This lists all merge commits between 0d1d7fc and HEAD:\ngit log --merges --pretty=format:&quot;%h&quot; 0d1d7fc..HEAD | tr '\\n' ' '\n\n# This lists all non merge commits between 0d1d7fc and HEAD:\ngit log --no-merges --pretty=format:&quot;%h&quot; 0d1d7fc..HEAD | tr '\\n' ' '\n</code></pre>\n<p>Note: if you revert multiple commits, the order matters. Start with the most recent commit.</p>\n<pre class=\"lang-sh prettyprint-override\"><code># This will create three separate revert commits, use non merge commits only:\ngit revert a867b4af 25eee4ca 0766c053\n\n# It also takes ranges. This will revert the last two commits:\ngit revert HEAD~2..HEAD\n\n# Similarly, you can revert a range of commits using commit hashes (non inclusive of first hash):\ngit revert 0d1d7fc..a867b4a\n\n# Reverting a merge commit. You can also use a range of merge commits here.\ngit revert -m 1 &lt;merge_commit_sha&gt;\n\n# To get just one, you could use `rebase -i` to squash them afterwards\n# Or, you could do it manually (be sure to do this at top level of the repo)\n# get your index and work tree into the desired state, without changing HEAD:\ngit checkout 0d1d7fc32 .\n\n# Then commit. Be sure and write a good message describing what you just did\ngit commit\n</code></pre>\n<p>The <a href=\"https://git-scm.com/docs/git-revert\" rel=\"noreferrer\"><code>git-revert</code> manpage</a> actually covers a lot of this in its description. Another useful link is <a href=\"https://git-scm.com/book/en/v2/Git-Tools-Advanced-Merging#_undoing_merges\" rel=\"noreferrer\">this git-scm.com section discussing git-revert</a>.</p>\n<p>If you decide you didn't want to revert after all, you can revert the revert (as described here) or reset back to before the revert (see the previous section).</p>\n<p>You may also find this answer helpful in this case:<br />\n<a href=\"https://stackoverflow.com/questions/34519665/how-to-move-head-forward-checkout-revet-reflog-reset/34519716#34519716\">How can I move HEAD back to a previous location? (Detached head) &amp; Undo commits</a></p>\n"
  },
  {
    "question": "<p>I have a repo (origin) on a USB key that I cloned on my hard drive (local). I moved &quot;origin&quot; to a NAS and successfully tested cloning it from here.</p>\n<p>I would like to know if I can change the URI of &quot;origin&quot; in the settings of &quot;local&quot; so it will now pull from the NAS, and not from the USB key.</p>\n<p>For now, I can see two solutions:</p>\n<ul>\n<li><p>push everything to the USB origin, and copy it to the NAS again (implies a lot of work due to new commits to NAS origin);</p>\n</li>\n<li><p>add a new remote to &quot;local&quot; and delete the old one (I fear I'll break my history).</p>\n</li>\n</ul>\n",
    "answer": "<p>First, view the existing remotes to verify which URL is currently set:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git remote -v\n</code></pre>\n<p>Then, you can set it with:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git remote set-url origin &lt;NEW_GIT_URL_HERE&gt;\n</code></pre>\n<p>See <a href=\"https://git-scm.com/docs/git-remote\" rel=\"noreferrer\"><code>git help remote</code></a>. You also can edit <code>.git/config</code> and change the URLs there.</p>\n<p>You're not in any danger of losing history unless you do something very silly (and if you're worried, just make a copy of your repo, since your repo <em>is</em> your history.)</p>\n"
  },
  {
    "question": "<p>How do I move my recent commits on <code>master</code> to a new branch, and reset master to before those commits were made? e.g. From this:</p>\n<pre><code>master A - B - C - D - E\n</code></pre>\n<p>To this:</p>\n<pre><code>newbranch     C - D - E\n             /\nmaster A - B \n</code></pre>\n",
    "answer": "<p>WARNING: You <strong>need to store uncommitted edits</strong> to your stash before doing this, using <code>git stash</code>. Once complete, you can retrieve the stashed uncommitted edits with <code>git stash pop</code>. <a href=\"https://git-scm.com/docs/git-reset#Documentation/git-reset.txt---hard\" rel=\"noreferrer\">git reset hard command will remove all changes!</a></p>\n<h2>Moving to an existing branch</h2>\n<p>If you want to move your commits to an <strong>existing branch</strong>, it will look like this:</p>\n<pre><code>git checkout existingbranch\ngit merge branchToMoveCommitFrom\ngit checkout branchToMoveCommitFrom\ngit reset --hard HEAD~3 # Go back 3 commits. You *will* lose uncommitted work.\ngit checkout existingbranch\n</code></pre>\n<h2>Moving to a new branch</h2>\n<p><strong>WARNING:</strong> This method works because you are creating a new branch with the first command: <code>git branch newbranch</code>. If you want to move commits to an <strong>existing branch</strong> you need to merge your changes into the existing branch before executing <code>git reset --hard HEAD~3</code> (see <em><strong>Moving to an existing branch</strong></em> above). <strong>If you don't merge your changes first, they will be lost.</strong></p>\n<p>Unless there are other circumstances involved, this can be easily done by branching and rolling back.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Note: Any changes not committed will be lost.\ngit branch newbranch      # Create a new branch, saving the desired commits\ngit checkout master       # checkout master, this is the place you want to go back\ngit reset --hard HEAD~3   # Move master back by 3 commits (Make sure you know how many commits you need to go back)\ngit checkout newbranch    # Go to the new branch that still has the desired commits\n</code></pre>\n<p>But do make sure how many commits to go back. Alternatively, you can instead of <code>HEAD~3</code>, simply provide the hash of the commit (or the reference like <em>origin/master</em>) you want to &quot;revert back to&quot; on the <em>master</em> (/current) branch, e.g:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>git reset --hard a1b2c3d4\n</code></pre>\n<p><strong>Note:</strong> You will <strong>only</strong> be &quot;losing&quot; commits from the master branch, but don't worry, you'll have those commits in newbranch! An easy way to check that, after completing the 4 step sequence of commands above, is by looking at <code>git log -n4</code> which will show the history of newbranch actually retained the 3 commits (and the reason is that newbranch was created at the time those changes were already commited on master!). They have only been removed from master, as <code>git reset</code> only affected the branch that was checked out at the time of its execution, i.e. master (see <a href=\"https://git-scm.com/docs/git-reset\" rel=\"noreferrer\">git reset</a> description: <em>Reset <strong>current</strong> HEAD to the specified state</em>). <code>git status</code> however will not show any checkouts on the newbranch, which might be surprising at first but that is actually expected.</p>\n<p>Lastly, <a href=\"https://stackoverflow.com/questions/1628563/move-the-most-recent-commits-to-a-new-branch-with-git#comment42808558_6796816\">you may need</a> to force push your latest changes to main repo:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>git push origin master --force\n</code></pre>\n<p><strong>WARNING:</strong> With Git version 2.0 and later, if you later <code>git rebase</code> the new branch upon the original (<code>master</code>) branch, you may need an explicit <code>--no-fork-point</code> option during the rebase to avoid losing the carried-over commits.  Having <code>branch.autosetuprebase always</code> set makes this more likely.  See <a href=\"https://stackoverflow.com/a/36463546/1256452\">John Mellor's answer</a> for details.</p>\n"
  },
  {
    "question": "<p>How do I discard changes in my working copy that are not in the index?</p>\n",
    "answer": "<p>Another quicker way is:</p>\n\n<pre><code>git stash save --keep-index --include-untracked\n</code></pre>\n\n<p>You don't need to include <code>--include-untracked</code> if you don't want to be thorough about it.</p>\n\n<p>After that, you can drop that stash with a <code>git stash drop</code> command if you like.</p>\n"
  },
  {
    "question": "<p>How do I get the path of the directory in which a <a href=\"http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29\" rel=\"noreferrer\">Bash</a> script is located, <em>inside</em> that script?</p>\n<p>I want to use a Bash script as a launcher for another application. I want to change the working directory to the one where the Bash script is located, so I can operate on the files in that directory, like so:</p>\n<pre><code>$ ./application\n</code></pre>\n",
    "answer": "<pre><code>#!/usr/bin/env bash\n\nSCRIPT_DIR=$( cd -- &quot;$( dirname -- &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&gt; /dev/null &amp;&amp; pwd )\n</code></pre>\n<p>is a useful one-liner which will give you the full directory name of the script no matter where it is being called from.</p>\n<p>It will work as long as the last component of the path used to find the script is not a symlink (directory links are OK).  If you also want to resolve any links to the script itself, you need a multi-line solution:</p>\n<pre><code>#!/usr/bin/env bash\n\nget_script_dir()\n{\n    local SOURCE_PATH=&quot;${BASH_SOURCE[0]}&quot;\n    local SYMLINK_DIR\n    local SCRIPT_DIR\n    # Resolve symlinks recursively\n    while [ -L &quot;$SOURCE_PATH&quot; ]; do\n        # Get symlink directory\n        SYMLINK_DIR=&quot;$( cd -P &quot;$( dirname &quot;$SOURCE_PATH&quot; )&quot; &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pwd )&quot;\n        # Resolve symlink target (relative or absolute)\n        SOURCE_PATH=&quot;$(readlink &quot;$SOURCE_PATH&quot;)&quot;\n        # Check if candidate path is relative or absolute\n        if [[ $SOURCE_PATH != /* ]]; then\n            # Candidate path is relative, resolve to full path\n            SOURCE_PATH=$SYMLINK_DIR/$SOURCE_PATH\n        fi\n    done\n    # Get final script directory path from fully resolved source path\n    SCRIPT_DIR=&quot;$(cd -P &quot;$( dirname &quot;$SOURCE_PATH&quot; )&quot; &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pwd)&quot;\n    echo &quot;$SCRIPT_DIR&quot;\n}\n\necho &quot;get_script_dir: $(get_script_dir)&quot;\n</code></pre>\n<p>This last one will work with any combination of aliases, <code>source</code>, <code>bash -c</code>, symlinks, etc.</p>\n<p><strong>Beware:</strong> if you <code>cd</code> to a different directory before running this snippet, the result may be incorrect!</p>\n<p>Also, watch out for <a href=\"http://bosker.wordpress.com/2012/02/12/bash-scripters-beware-of-the-cdpath/\" rel=\"noreferrer\"><code>$CDPATH</code> gotchas</a>, and stderr output side effects if the user has smartly overridden cd to redirect output to stderr instead (including escape sequences, such as when calling <code>update_terminal_cwd &gt;&amp;2</code> on Mac). Adding <code>&gt;/dev/null 2&gt;&amp;1</code> at the end of your <code>cd</code> command will take care of both possibilities.</p>\n<p>To understand how it works, try running this more verbose form:</p>\n<pre><code>#!/usr/bin/env bash\n\nSOURCE=${BASH_SOURCE[0]}\nwhile [ -L &quot;$SOURCE&quot; ]; do # resolve $SOURCE until the file is no longer a symlink\n  TARGET=$(readlink &quot;$SOURCE&quot;)\n  if [[ $TARGET == /* ]]; then\n    echo &quot;SOURCE '$SOURCE' is an absolute symlink to '$TARGET'&quot;\n    SOURCE=$TARGET\n  else\n    DIR=$( dirname &quot;$SOURCE&quot; )\n    echo &quot;SOURCE '$SOURCE' is a relative symlink to '$TARGET' (relative to '$DIR')&quot;\n    SOURCE=$DIR/$TARGET # if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located\n  fi\ndone\necho &quot;SOURCE is '$SOURCE'&quot;\nRDIR=$( dirname &quot;$SOURCE&quot; )\nDIR=$( cd -P &quot;$( dirname &quot;$SOURCE&quot; )&quot; &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pwd )\nif [ &quot;$DIR&quot; != &quot;$RDIR&quot; ]; then\n  echo &quot;DIR '$RDIR' resolves to '$DIR'&quot;\nfi\necho &quot;DIR is '$DIR'&quot;\n</code></pre>\n<p>And it will print something like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>SOURCE './scriptdir.sh' is a relative symlink to 'sym2/scriptdir.sh' (relative to '.')\nSOURCE is './sym2/scriptdir.sh'\nDIR './sym2' resolves to '/home/ubuntu/dotfiles/fo fo/real/real1/real2'\nDIR is '/home/ubuntu/dotfiles/fo fo/real/real1/real2'\n</code></pre>\n"
  },
  {
    "question": "<p>How do I reset my local branch to be just like the branch on the remote repository?</p>\n<p>I tried:</p>\n<pre><code>git reset --hard HEAD\n</code></pre>\n<p>But <code>git status</code> claims I have modified files:</p>\n<pre><code>On branch master\nChanges to be committed:\n  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)\n      modified:   java/com/mycompany/TestContacts.java\n      modified:   java/com/mycompany/TestParser.java\n</code></pre>\n",
    "answer": "<p>Setting your branch to exactly match the remote branch can be done in two steps:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>git fetch origin\ngit reset --hard origin/master\n</code></pre>\n<p>If your default branch is <strong><code>main</code></strong> (GitHub changed the default branch name from <strong><code>master</code></strong> to <strong><code>main</code></strong> <a href=\"https://github.blog/changelog/2020-10-01-the-default-branch-for-newly-created-repositories-is-now-main/\" rel=\"nofollow noreferrer\">starting October 1, 2020</a>):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git reset --hard origin/main\n</code></pre>\n<p>If you want to save your current branch's state before doing this (just in case), you can do:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git commit -a -m &quot;Saving my work, just in case&quot;\ngit branch my-saved-work\n</code></pre>\n<p>Now your work is saved on the branch &quot;my-saved-work&quot; in case you decide you want it back (or want to look at it later or diff it against your updated branch).</p>\n<p>Note that the first example assumes that the remote repo's name is &quot;origin&quot; and that the branch named &quot;master&quot; in the remote repo matches the currently checked-out branch in your local repo.</p>\n<p>BTW, this situation that you're in looks an awful lot like a common case where a push has been done into the currently checked out branch of a non-bare repository. Did you recently push into your local repo? If not, then no worries -- something else must have caused these files to unexpectedly end up modified. Otherwise, you should be aware that it's not recommended to push into a non-bare repository (and not into the currently checked-out branch, in particular).</p>\n"
  },
  {
    "question": "<p>How can I revert a modified file to its previous revision at a specific commit hash (which I determined via <a href=\"https://git-scm.com/docs/git-log\" rel=\"noreferrer\"><code>git log</code></a> and <a href=\"https://git-scm.com/docs/git-diff\" rel=\"noreferrer\"><code>git diff</code></a>)?</p>\n",
    "answer": "<p>Assuming the hash of the commit you want is <code>c5f567</code>:</p>\n<pre><code>git checkout c5f567 -- file1/to/restore file2/to/restore\n</code></pre>\n<p>The <a href=\"https://git-scm.com/docs/git-checkout\" rel=\"noreferrer\">git checkout</a> man page gives more information.</p>\n<p>If you want to revert to the commit before <code>c5f567</code>, append <code>~1</code> (where 1 is the number of commits you want to go back, it can be anything):</p>\n<pre><code>git checkout c5f567~1 -- file1/to/restore file2/to/restore\n</code></pre>\n<p>As a side note, I've always been uncomfortable with this command because it's used for both ordinary things (changing between branches) and unusual, destructive things (discarding changes in the working directory).</p>\n<p>For the meaning of <code>--</code> in the command, refer to <a href=\"https://stackoverflow.com/questions/22750028/in-git-what-does-dash-dash-mean\">In Git, what does <code>--</code> (dash dash) mean?</a></p>\n<hr />\n<p>There is also a new <a href=\"https://git-scm.com/docs/git-restore\" rel=\"noreferrer\"><code>git restore</code></a> command that is specifically designed for restoring working copy files that have been modified. If your git is new enough you can use this command, but the documentation comes with a warning:</p>\n<blockquote>\n<p>THIS COMMAND IS EXPERIMENTAL. THE BEHAVIOR MAY CHANGE.</p>\n</blockquote>\n<p>Because <code>git restore</code> is experimental, it should not yet be promoted as the primary answer to this question. When the command is no longer marked as &quot;experimental&quot;, then this answer can be amended to promote the use of <code>git restore</code>. [At the time of writing, the <code>git restore</code> command has been marked as &quot;experimental&quot; for at least four years.]</p>\n"
  },
  {
    "question": "<p>How do I:</p>\n<ol>\n<li><p>Create a local branch from another branch (via <code>git branch</code> or <code>git checkout -b</code>).</p>\n</li>\n<li><p>Push the local branch\nto the remote repository (i.e. publish), but make it\ntrackable so that <code>git pull</code> and <code>git push</code> will work.</p>\n</li>\n</ol>\n",
    "answer": "<p>In Git 1.7.0 and later, you can checkout a new branch:</p>\n<pre><code>git checkout -b &lt;branch&gt;\n</code></pre>\n<p>Edit files, add and commit. Then <a href=\"https://git-scm.com/docs/git-push#Documentation/git-push.txt--u\" rel=\"noreferrer\">push with the <code>-u</code> (short for <code>--set-upstream</code>)</a> option:</p>\n<pre><code>git push -u origin &lt;branch&gt;\n</code></pre>\n<p>Git will set up the tracking information during the push.</p>\n"
  },
  {
    "question": "<p>How do I squash my last N commits together into one commit?</p>\n",
    "answer": "<p>Use <code>git rebase -i &lt;after-this-commit&gt;</code> and replace &quot;pick&quot; on the second and subsequent commits with &quot;squash&quot; or &quot;fixup&quot;, as described in <a href=\"https://git-scm.com/docs/git-rebase#_interactive_mode\" rel=\"noreferrer\">the manual</a>.</p>\n<p>In this example, <code>&lt;after-this-commit&gt;</code> is either the SHA1 hash or the relative location from the HEAD of the current branch from which commits are analyzed for the rebase command. For example, if the user wishes to view 5 commits from the current HEAD in the past, the command is <code>git rebase -i HEAD~5</code>.</p>\n"
  },
  {
    "question": "<p>I pulled a project with several forks on GitHub, but forgot which fork it was. How do I determine which fork I pulled?</p>\n",
    "answer": "<p>To obtain only the remote URL:</p>\n<pre><code>git config --get remote.origin.url\n</code></pre>\n<p>If you require full output, and you are on a network that can reach the remote repo where the origin resides:</p>\n<pre><code>git remote show origin\n</code></pre>\n<p>When using <code>git clone</code> (from GitHub, or any source repository for that matter) the default name for the source of the clone is &quot;origin&quot;. Using <code>git remote show</code> will display the information about this remote name. The first few lines should show:</p>\n<pre><code>C:\\Users\\jaredpar\\VsVim&gt; git remote show origin\n* remote origin\n  Fetch URL: git@github.com:jaredpar/VsVim.git\n  Push  URL: git@github.com:jaredpar/VsVim.git\n  HEAD branch: master\n  Remote branches:\n</code></pre>\n<p>If you want to use the value in a script, you would use the first command listed in this answer.</p>\n"
  },
  {
    "question": "<p>How do I add an empty directory (that contains no files) to a Git repository?</p>\n",
    "answer": "<p>Another way to make a directory stay (almost) empty (in the repository) is to create a <code>.gitignore</code> file inside that directory that contains these four lines:</p>\n\n<pre><code># Ignore everything in this directory\n*\n# Except this file\n!.gitignore\n</code></pre>\n\n<p>Then you don't have to get the order right the way that you have to do in m104's <a href=\"https://stackoverflow.com/a/180917/32453\">solution</a>.</p>\n\n<p>This also gives the benefit that files in that directory won't show up as \"untracked\" when you do a git status.</p>\n\n<p>Making <a href=\"https://stackoverflow.com/users/554807/greenasjade\">@GreenAsJade</a>'s comment persistent:</p>\n\n<blockquote>\n  <p>I think it's worth noting that this solution does precisely what the question asked for, but is not perhaps what many people looking at this question will have been looking for. This solution guarantees that the directory remains empty. It says \"I truly never want files checked in here\". As opposed to \"I don't have any files to check in here, yet, but I need the directory here, files may be coming later\".</p>\n</blockquote>\n"
  },
  {
    "question": "<p>How do I resolve merge conflicts in my Git repository?</p>\n",
    "answer": "<p>Try:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git mergetool\n</code></pre>\n<p>It opens a GUI that steps you through each conflict, and you get to choose how to merge.  Sometimes it requires a bit of hand editing afterwards, but usually it's enough by itself.  It is much better than doing the whole thing by hand certainly.</p>\n<hr />\n<p>As per <a href=\"https://stackoverflow.com/questions/161813/how-to-resolve-merge-conflicts-in-git-repository#comment6881558_163659\">Josh Glover's comment</a>:</p>\n<blockquote>\n<p>[This command]\ndoesn't necessarily open a GUI unless you install one. Running <code>git mergetool</code> for me resulted in <code>vimdiff</code> being used. You can install\none of the following tools to use it instead: <code>meld</code>, <code>opendiff</code>,\n<code>kdiff3</code>, <code>tkdiff</code>, <code>xxdiff</code>, <code>tortoisemerge</code>, <code>gvimdiff</code>, <code>diffuse</code>,\n<code>ecmerge</code>, <code>p4merge</code>, <code>araxis</code>, <code>vimdiff</code>, <code>emerge</code>.</p>\n</blockquote>\n<hr />\n<p>Below is a sample procedure using <code>vimdiff</code> to resolve merge conflicts, based on <a href=\"http://www.rosipov.com/blog/use-vimdiff-as-git-mergetool/#fromHistor\" rel=\"noreferrer\">this link</a>.</p>\n<ol>\n<li><p>Run the following commands in your terminal</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git config merge.tool vimdiff\ngit config merge.conflictstyle diff3\ngit config mergetool.prompt false\n</code></pre>\n<p>This will set <code>vimdiff</code> as the default merge tool.</p>\n</li>\n<li><p>Run the following command in your terminal</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git mergetool\n</code></pre>\n</li>\n<li><p>You will see a <code>vimdiff</code> display in the following format:</p>\n<pre class=\"lang-none prettyprint-override\"><code>  ╔═══════╦══════╦════════╗\n  ║       ║      ║        ║\n  ║ LOCAL ║ BASE ║ REMOTE ║\n  ║       ║      ║        ║\n  ╠═══════╩══════╩════════╣\n  ║                       ║\n  ║        MERGED         ║\n  ║                       ║\n  ╚═══════════════════════╝\n</code></pre>\n<p>These 4 views are</p>\n<ul>\n<li><strong>LOCAL:</strong> this is the file from the current branch</li>\n<li><strong>BASE:</strong> the common ancestor, how this file looked before both changes</li>\n<li><strong>REMOTE:</strong> the file you are merging into your branch</li>\n<li><strong>MERGED:</strong> the merge result; this is what gets saved in the merge commit and used in the future</li>\n</ul>\n<p>You can navigate among these views using <kbd>ctrl</kbd>+<kbd>w</kbd>. You can directly reach the MERGED view using <kbd>ctrl</kbd>+<kbd>w</kbd> followed by <kbd>j</kbd>.</p>\n<p>More information about <code>vimdiff</code> navigation is <a href=\"https://stackoverflow.com/questions/4556184/vim-move-window-left-right\">here</a> and <a href=\"https://stackoverflow.com/questions/27151456/how-do-i-jump-to-the-next-prev-diff-in-git-difftool\">here</a>.</p>\n</li>\n<li><p>You can edit the MERGED view like this:</p>\n<ul>\n<li><p>If you want to get changes from REMOTE</p>\n<pre><code>:diffg RE\n</code></pre>\n</li>\n<li><p>If you want to get changes from BASE</p>\n<pre><code>:diffg BA\n</code></pre>\n</li>\n<li><p>If you want to get changes from LOCAL</p>\n<pre><code>:diffg LO\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>Save, Exit, Commit, and Clean up</p>\n<p><code>:wqa</code> save and exit from vi</p>\n<p><code>git commit -m &quot;message&quot;</code></p>\n<p><code>git clean</code> Remove extra files (e.g. <code>*.orig</code>). <strong>Warning:</strong> It will remove all untracked files, if you won't pass any arguments.</p>\n</li>\n</ol>\n"
  },
  {
    "question": "<p>How can I delete a Git tag that has already been pushed?</p>\n",
    "answer": "<p>You can push an 'empty' reference to the remote tag name:</p>\n<pre><code>git push origin :tagname\n</code></pre>\n<p>Or, more expressively, use the <code>--delete</code> option (or <code>-d</code> if your git version is older than 1.8.0):</p>\n<pre><code>git push --delete origin tagname\n</code></pre>\n<p>Note that git has tag namespace and branch namespace so you may use the same name for a branch and for a tag. If you want to make sure that you cannot accidentally remove the branch instead of the tag, you can specify full ref which will never delete a branch:</p>\n<pre><code>git push origin :refs/tags/tagname\n</code></pre>\n<p>If you also need to delete the local tag, use:</p>\n<pre><code>git tag --delete tagname\n</code></pre>\n<p>or</p>\n<pre><code>git tag -d tagname\n</code></pre>\n<hr />\n<h3>Background</h3>\n<p>Pushing a branch, tag, or other ref to a remote repository involves specifying &quot;which repo, what source, what destination?&quot;</p>\n<pre><code>git push remote-repo source-ref:destination-ref\n</code></pre>\n<p>A real world example where you push your master branch to the origin's master branch is:</p>\n<pre><code>git push origin refs/heads/master:refs/heads/master\n</code></pre>\n<p>Which because of default paths, can be shortened to:</p>\n<pre><code>git push origin master:master\n</code></pre>\n<p>Tags work the same way:</p>\n<pre><code>git push origin refs/tags/release-1.0:refs/tags/release-1.0\n</code></pre>\n<p>Which can also be shortened to:</p>\n<pre><code>git push origin release-1.0:release-1.0\n</code></pre>\n<p>By omitting the source ref (the part before the colon), you push 'nothing' to the destination, deleting the ref on the remote end.</p>\n"
  },
  {
    "question": "<p>I accidentally ran <code>git merge some_other_branch</code> on my local master branch. I haven't pushed the changes to origin master. How do I undo the merge?</p>\n<hr />\n<p>After merging, <code>git status</code> says:</p>\n<pre><code># On branch master\n# Your branch is ahead of 'origin/master' by 5 commits.\n</code></pre>\n<p>How do I undo all these commits?</p>\n",
    "answer": "<p>With <code>git reflog</code> check which commit is one prior the merge (<code>git reflog</code> will be a better option than <code>git log</code>). Then you can reset it using:</p>\n\n<pre><code>git reset --hard commit_sha\n</code></pre>\n\n<p>There's also another way:</p>\n\n<pre><code>git reset --hard HEAD~1\n</code></pre>\n\n<p>It will get you back 1 commit.</p>\n\n<p><strong>Be aware that any modified and uncommitted/unstashed files will be reset to their unmodified state</strong>. To keep them either stash changes away or see <code>--merge</code> option below.  </p>\n\n<hr>\n\n<p>As @Velmont suggested below in his answer, in this direct case using:</p>\n\n<pre><code>git reset --hard ORIG_HEAD\n</code></pre>\n\n<p>might yield better results, as it should preserve your changes. <code>ORIG_HEAD</code> will point to a commit directly before merge has occurred, so you don't have to hunt for it yourself.</p>\n\n<hr>\n\n<p>A further tip is to use the <code>--merge</code> switch instead of <code>--hard</code> since it doesn't reset files unnecessarily:</p>\n\n<pre><code>git reset --merge ORIG_HEAD\n</code></pre>\n\n<blockquote>\n  <p>--merge</p>\n  \n  <p>Resets the index and updates the files in the working tree that are different between &lt;commit&gt; and HEAD, but keeps those which are different between the index and working tree (i.e. which have changes which have not been added). </p>\n</blockquote>\n"
  },
  {
    "question": "<p>My <code>master</code> and <code>development</code> branches are tracked remotely on <a href=\"http://en.wikipedia.org/wiki/GitHub\" rel=\"noreferrer\">GitHub</a>. How do I clone both these branches?</p>\n",
    "answer": "<p>First, clone a remote <a href=\"http://en.wikipedia.org/wiki/Git_%28software%29\" rel=\"noreferrer\">Git</a> repository and <a href=\"http://en.wikipedia.org/wiki/Cd_%28command%29\" rel=\"noreferrer\"><code>cd</code></a> into it:</p>\n<pre><code>$ git clone git://example.com/myproject\n$ cd myproject\n</code></pre>\n<p>Next, look at the local branches in your repository:</p>\n<pre><code>$ git branch\n* master\n</code></pre>\n<p>But there are other branches hiding in your repository! See these using the <code>-a</code> flag:</p>\n<pre><code>$ git branch -a\n* master\n  remotes/origin/HEAD\n  remotes/origin/master\n  remotes/origin/v1.0-stable\n  remotes/origin/experimental\n</code></pre>\n<p>To take a quick peek at an upstream branch, check it out directly:</p>\n<pre><code>$ git checkout origin/experimental\n</code></pre>\n<p>To work on that branch, create a local tracking branch, which is done automatically by:</p>\n<pre><code>$ git checkout experimental\n\nBranch experimental set up to track remote branch experimental from origin.\nSwitched to a new branch 'experimental'\n</code></pre>\n<p>Here, &quot;new branch&quot; simply means that the branch is taken from the index and created locally for you.  As the <em>previous</em> line tells you, the branch is being set up to track the remote branch, which usually means the origin/branch_name branch.</p>\n<p>Your local branches should now show:</p>\n<pre><code>$ git branch\n* experimental\n  master\n</code></pre>\n<p>You can track more than one remote repository using <code>git remote</code>:</p>\n<pre><code>$ git remote add win32 git://example.com/users/joe/myproject-win32-port\n$ git branch -a\n* master\n  remotes/origin/HEAD\n  remotes/origin/master\n  remotes/origin/v1.0-stable\n  remotes/origin/experimental\n  remotes/win32/master\n  remotes/win32/new-widgets\n</code></pre>\n<p>At this point, things are getting pretty crazy, so run <code>gitk</code> to see what's going on:</p>\n<pre><code>$ gitk --all &amp;\n</code></pre>\n"
  },
  {
    "question": "<p>I forked a project, made changes, and created a pull request which was accepted. New commits were later added to the repository. How do I get those commits into my fork?</p>\n",
    "answer": "<p>In your local clone of your forked repository, you can add the original GitHub repository as a &quot;remote&quot;.  (&quot;Remotes&quot; are like nicknames for the URLs of repositories - <code>origin</code> is one, for example.)  Then you can fetch all the branches from that upstream repository, and rebase your work to continue working on the upstream version.  In terms of commands that might look like:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># Add the remote, call it &quot;upstream&quot;:\n\ngit remote add upstream https://github.com/whoever/whatever.git\n\n# Fetch all the branches of that remote into remote-tracking branches\n\ngit fetch upstream\n\n# Make sure that you're on your main branch:\n\ngit checkout main\n\n# Rewrite your main branch so that any commits of yours that\n# aren't already in upstream/main are replayed on top of that\n# other branch:\n\ngit rebase upstream/main\n</code></pre>\n<p>If you don't want to rewrite the history of your main branch, (for example because other people may have cloned it) then you should replace the last command with <code>git merge upstream/main</code>.  However, for making further pull requests that are as clean as possible, it's probably better to rebase.</p>\n<hr />\n<p>If you've rebased your branch onto <code>upstream/main</code> you may need to force the push in order to push it to your own forked repository on GitHub.  You'd do that with:</p>\n<pre><code>git push -f origin main\n</code></pre>\n<p>You only need to use the <code>-f</code> the first time after you've rebased.</p>\n"
  },
  {
    "question": "<p>How do I remove a Git submodule?\nWhy can't I do\n<code>git submodule rm module_name</code>?</p>\n",
    "answer": "<p>Since <a href=\"https://github.com/git/git/blob/v1.8.3-rc0/Documentation/RelNotes/1.8.3.txt#L135-L137\" rel=\"noreferrer\">git1.8.3 (April 22d, 2013)</a>:</p>\n<blockquote>\n<p>There was no Porcelain way to say &quot;I no longer am interested in this submodule&quot;, once you express your interest in a submodule with &quot;<code>git submodule init</code>&quot;.<br />\n&quot;<strong><code>git submodule deinit</code></strong>&quot; is the way to do so.</p>\n</blockquote>\n<p>The deletion process also uses <code>git rm</code> (since git1.8.5 October 2013).</p>\n<h2>Summary</h2>\n<p>The 3-steps removal process would then be:</p>\n<pre><code>0. mv a/submodule a/submodule_tmp\n\n1. git submodule deinit -f -- a/submodule    \n2. rm -rf .git/modules/a/submodule\n3. git rm -f a/submodule\n# Note: a/submodule (no trailing slash)\n\n# or, if you want to leave it in your working tree and have done step 0\n3.   git rm --cached a/submodule\n3bis mv a/submodule_tmp a/submodule\n</code></pre>\n<h2>Explanation</h2>\n<p><code>rm -rf</code>: This is mentioned in <a href=\"https://stackoverflow.com/users/2753241/daniel-schroeder\">Daniel Schroeder</a>'s <a href=\"https://stackoverflow.com/a/26505847/6309\">answer</a>, and summarized by <a href=\"https://stackoverflow.com/users/246776/eonil\">Eonil</a> in <a href=\"https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule/16162000?noredirect=1#comment41729982_16162000\">the comments</a>:</p>\n<blockquote>\n<p>This leaves <code>.git/modules/&lt;path-to-submodule&gt;/</code> unchanged.<br />\nSo if you once delete a submodule with this method and re-add them again, it will not be possible because repository already been corrupted.</p>\n</blockquote>\n<hr />\n<p><code>git rm</code>: See <a href=\"https://github.com/git/git/commit/95c16418f0375e2fc325f32c3d7578fba9cfd7ef\" rel=\"noreferrer\">commit 95c16418</a>:</p>\n<blockquote>\n<p>Currently using &quot;<code>git rm</code>&quot; on a submodule removes the submodule's work tree from that of the superproject and the gitlink from the index.<br />\nBut the submodule's section in <code>.gitmodules</code> is left untouched, which is a leftover of the now removed submodule and might irritate users (as opposed to the setting in <code>.git/config</code>, this must stay as a reminder that the user showed interest in this submodule so it will be repopulated later when an older commit is checked out).</p>\n</blockquote>\n<blockquote>\n<p>Let &quot;<code>git rm</code>&quot; help the user by not only removing the submodule from the work tree but by also removing the &quot;<code>submodule.&lt;submodule name&gt;</code>&quot; section from the <code>.gitmodules</code> file and stage both.</p>\n</blockquote>\n<hr />\n<p><code>git submodule deinit</code>: It stems from <a href=\"http://git.661346.n2.nabble.com/PATCH-v3-submodule-add-deinit-command-td7576946.html\" rel=\"noreferrer\">this patch</a>:</p>\n<blockquote>\n<p>With &quot;<code>git submodule init</code>&quot; the user is able to tell git they care about one or more submodules and wants to have it populated on the next call to &quot;<code>git submodule update</code>&quot;.<br />\nBut currently there is no easy way they can tell git they do not care about a submodule anymore and wants to get rid of the local work tree (unless the user knows a lot about submodule internals and removes the &quot;<code>submodule.$name.url</code>&quot; setting from <code>.git/config</code> together with the work tree himself).</p>\n</blockquote>\n<blockquote>\n<p>Help those users by providing a '<strong><code>deinit</code></strong>' command.<br />\nThis <strong>removes the whole <code>submodule.&lt;name&gt;</code> section from <code>.git/config</code> either for the given\nsubmodule(s)</strong> (or for all those which have been initialized if '<code>.</code>' is given).<br />\nFail if the current work tree contains modifications unless forced.<br />\nComplain when for a submodule given on the command line the url setting can't be found in <code>.git/config</code>, but nonetheless don't fail.</p>\n</blockquote>\n<p>This takes care if the (de)initialization steps (<code>.git/config</code> and <code>.git/modules/xxx</code>)</p>\n<p>Since git1.8.5, the <code>git rm</code> takes <em>also</em> care of the:</p>\n<ul>\n<li>'<code>add</code>' step which records the url of a submodule in the <code>.gitmodules</code> file: it is need to removed for you.</li>\n<li>the submodule <strong><a href=\"https://stackoverflow.com/questions/1992018/git-submodule-update-needed-only-initially/2227598#2227598\">special entry</a></strong> (as illustrated by <a href=\"https://stackoverflow.com/q/16574625/6309\">this question</a>): the git rm removes it from the index:<br />\n<code>git rm --cached path_to_submodule</code> (no trailing slash)<br />\nThat will remove that directory stored in the index with a special mode &quot;160000&quot;, marking it as a submodule root directory.</li>\n</ul>\n<p>If you forget that last step, and try to add what was a submodule as a regular directory, you would get error message like:</p>\n<pre><code>git add mysubmodule/file.txt \nPath 'mysubmodule/file.txt' is in submodule 'mysubmodule'\n</code></pre>\n<hr />\n<p>Note: since Git 2.17 (Q2 2018), git submodule deinit is no longer a shell script.<br />\nIt is a call to a C function.</p>\n<p>See <a href=\"https://github.com/git/git/commit/2e612731b55f1a83fb5b7f4ecb9391f0cba63cb2\" rel=\"noreferrer\">commit 2e61273</a>, <a href=\"https://github.com/git/git/commit/13424764db3273091d136bd470cf14852255c98c\" rel=\"noreferrer\">commit 1342476</a> (14 Jan 2018) by <a href=\"https://github.com/pratham-pc\" rel=\"noreferrer\">Prathamesh Chavan (<code>pratham-pc</code>)</a>.<br />\n<sup>(Merged by <a href=\"https://github.com/gitster\" rel=\"noreferrer\">Junio C Hamano -- <code>gitster</code> --</a> in <a href=\"https://github.com/git/git/commit/ead8dbe2e14ee9a2a18ccd0ad7bca806e1be0d54\" rel=\"noreferrer\">commit ead8dbe</a>, 13 Feb 2018)</sup></p>\n<pre><code>git ${wt_prefix:+-C &quot;$wt_prefix&quot;} submodule--helper deinit \\\n  ${GIT_QUIET:+--quiet} \\\n  ${prefix:+--prefix &quot;$prefix&quot;} \\\n  ${force:+--force} \\\n  ${deinit_all:+--all} &quot;$@&quot;\n</code></pre>\n"
  },
  {
    "question": "<p>What command checks if a directory exists or not within a Bash shell script?</p>\n",
    "answer": "<p>To check if a directory exists:</p>\n<pre><code>if [ -d &quot;$DIRECTORY&quot; ]; then\n  echo &quot;$DIRECTORY does exist.&quot;\nfi\n</code></pre>\n<p>To check if a directory does not exist:</p>\n<pre><code>if [ ! -d &quot;$DIRECTORY&quot; ]; then\n  echo &quot;$DIRECTORY does not exist.&quot;\nfi\n</code></pre>\n<hr />\n<p>However, as <a href=\"https://stackoverflow.com/users/1438/jon-ericson\">Jon Ericson</a> points out, subsequent commands may not work as intended if you do not take into account that a symbolic link to a directory will also pass this check.\nE.g. running this:</p>\n<pre><code>ln -s &quot;$ACTUAL_DIR&quot; &quot;$SYMLINK&quot;\nif [ -d &quot;$SYMLINK&quot; ]; then \n  rmdir &quot;$SYMLINK&quot; \nfi\n</code></pre>\n<p>Will produce the error message:</p>\n<pre class=\"lang-none prettyprint-override\"><code>rmdir: failed to remove `symlink': Not a directory\n</code></pre>\n<p>So symbolic links may have to be treated differently, if subsequent commands expect directories:</p>\n<pre><code>if [ -d &quot;$LINK_OR_DIR&quot; ]; then \n  if [ -L &quot;$LINK_OR_DIR&quot; ]; then\n    # It is a symlink!\n    # Symbolic link specific commands go here.\n    rm &quot;$LINK_OR_DIR&quot;\n  else\n    # It's a directory!\n    # Directory command goes here.\n    rmdir &quot;$LINK_OR_DIR&quot;\n  fi\nfi\n</code></pre>\n<hr />\n<p>Take particular note of the double-quotes used to wrap the variables. The reason for this is explained by 8jean <a href=\"https://stackoverflow.com/a/67458/102401\">in another answer</a>.</p>\n<p>If the variables contain spaces or other unusual characters it will probably cause the script to fail.</p>\n"
  },
  {
    "question": "<p>How do I delete a commit from my branch history? Should I use <code>git reset --hard HEAD</code>?</p>\n",
    "answer": "<p><strong>Careful:</strong> <code>git reset --hard</code> <strong>WILL DELETE YOUR WORKING DIRECTORY CHANGES</strong>.\nBe sure to <strong>stash any local changes you want to keep</strong> before running this command.</p>\n<p>Assuming you are sitting on that commit, then this command will wack it...</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git reset --hard HEAD~1\n</code></pre>\n<p>The <code>HEAD~1</code> means the commit before head.</p>\n<p>Or, you could look at the output of <code>git log</code>, find the commit id of the commit you want to back up to, and then do this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git reset --hard &lt;sha1-commit-id&gt;\n</code></pre>\n<hr/>\n<p>If you already pushed it, you will need to do a force push to get rid of it...</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git push origin HEAD --force\n</code></pre>\n<p><strong>However</strong>, if others may have pulled it, then you would be better off starting a new branch.  Because when they pull, it will just merge it into their work, and you will get it pushed back up again.</p>\n<p>If you already pushed, it may be better to use <code>git revert</code>, to create a &quot;mirror image&quot; commit that will undo the changes.  However, both commits will be in the log.</p>\n<hr />\n<p>FYI: <code>git reset --hard HEAD</code> is great if you want to get rid of WORK IN PROGRESS.It will reset you back to the most recent commit, and erase all the changes in your working tree and index.</p>\n<p><strong><code>git stash</code> does the same except you can restore it later if you need</strong>, versus permanently delete with reset hard mode. Check your stashes by using <code>git stash list</code> and <code>git stash show 'stash@123'</code></p>\n<hr />\n<p>Lastly, if you need to find a commit that you &quot;deleted&quot;, it is typically present in <code>git reflog</code> unless you have garbage collected your repository.</p>\n"
  },
  {
    "question": "<p>How do I easily undo a git rebase? A lengthy manual method is:</p>\n<ol>\n<li>checkout the commit parent to both of the branches</li>\n<li>create and checkout a temporary branch</li>\n<li>cherry-pick all commits by hand</li>\n<li>reset the faulty rebased branch to point to the temporary branch</li>\n</ol>\n<p>In my current situation, this works because I can easily spot commits from both branches (one was my stuff, the other was my colleague's stuff). However, my approach strikes me as suboptimal and error-prone (let's say I had just rebased with two of my own branches).</p>\n<p>Clarification: I am talking about a rebase during which <em>multiple</em> commits were replayed, not only one.</p>\n",
    "answer": "<p>The easiest way would be to find the head commit of the branch as it was immediately before the rebase started in the <a href=\"https://git-scm.com/docs/git-reflog\" rel=\"noreferrer\">reflog</a>...</p>\n<pre><code>git reflog\n</code></pre>\n<p>and to reset the current branch to it.</p>\n<p>Suppose the old commit was <code>HEAD@{2}</code> in the ref log:</p>\n<pre><code>git reset --soft &quot;HEAD@{2}&quot;\n</code></pre>\n<p>(If you do not want to retain the working copy changes, you can use <code>--hard</code> instead of <code>--soft</code>)</p>\n<p>You can check the history of the candidate old head by just doing a <code>git log &quot;HEAD@{2}&quot;</code>.</p>\n<p>If you've not disabled per branch reflogs you should be able to simply do <code>git reflog &quot;branchname@{1}&quot;</code> as a rebase detaches the branch head before reattaching to the final head. I would double-check this behavior, though, as I haven't verified it recently.</p>\n<p>Per default, all reflogs are activated for non-bare repositories:</p>\n<pre><code>[core]\n    logAllRefUpdates = true\n</code></pre>\n"
  },
  {
    "question": "<p>How do I get the name of the current branch in Git?</p>\n",
    "answer": "<pre><code>git branch\n</code></pre>\n<p>should show all the local branches of your repo. The starred branch is your current branch.</p>\n<hr />\n<p>To retrieve only the name of the branch you are on:</p>\n<pre><code>git rev-parse --abbrev-ref HEAD\n</code></pre>\n<p>Version 2.22 adds the <code>--show-current</code> option to <a href=\"https://www.git-scm.com/docs/git-branch#Documentation/git-branch.txt---show-current\" rel=\"noreferrer\"><em>”print the name of the current branch”</em></a>. The combination also works for freshly initialized repositories before the first commit:</p>\n<pre><code>git branch --show-current\n</code></pre>\n"
  },
  {
    "question": "<p>Git clone will clone remote branch into local.</p>\n<p>Is there any way to clone a specific branch by myself without switching branches on the remote repository?</p>\n",
    "answer": "<pre><code>git clone --single-branch --branch &lt;branchname&gt; &lt;remote-repo&gt;\n</code></pre>\n<p>The <code>--single-branch</code> option is valid from version <a href=\"https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.10.txt\" rel=\"noreferrer\">1.7.10</a> and later.</p>\n<p>Please see also the <a href=\"https://stackoverflow.com/a/4568323/134077\">other answer</a> which many people prefer.</p>\n<p>You may also want to make sure you understand the difference. And the difference is: by invoking <code>git clone --branch &lt;branchname&gt; url</code> you're fetching <em>all</em> the branches and checking out one. That may, for instance, mean that your repository has a 5kB documentation or wiki branch and 5GB data branch. And whenever you want to edit your frontpage, you may end up cloning 5GB of data.</p>\n<p>Again, that is not to say <code>git clone --branch</code> is not the way to accomplish that, it's just that it's not <em>always</em> what you want to accomplish, when you're asking about cloning a specific branch.</p>\n"
  },
  {
    "question": "<p>This checks if a file exists:</p>\n<pre><code>#!/bin/bash\n\nFILE=$1     \nif [ -f $FILE ]; then\n   echo &quot;File $FILE exists.&quot;\nelse\n   echo &quot;File $FILE does not exist.&quot;\nfi\n</code></pre>\n<p>How do I only check if the file does <strong>not</strong> exist?</p>\n",
    "answer": "<p>The <a href=\"http://man7.org/linux/man-pages/man1/test.1.html\" rel=\"noreferrer\"><code>test</code></a> command (written as <code>[</code> here) has a &quot;not&quot; logical operator, <code>!</code> (exclamation mark):</p>\n<pre><code>if [ ! -f /tmp/foo.txt ]; then\n    echo &quot;File not found!&quot;\nfi\n</code></pre>\n"
  },
  {
    "question": "<p>How do I <code>grep</code> and show the preceding and following 5 lines surrounding each matched line?</p>\n",
    "answer": "<p>For <strong>BSD</strong> or <strong>GNU</strong> <code>grep</code> you can use <code>-B num</code> to set how many lines before the match and <code>-A num</code> for the number of lines after the match.</p>\n\n<pre><code>grep -B 3 -A 2 foo README.txt\n</code></pre>\n\n<p>If you want the same number of lines before and after you can use <code>-C num</code>.</p>\n\n<pre><code>grep -C 3 foo README.txt\n</code></pre>\n\n<p>This will show 3 lines before and 3 lines after.</p>\n"
  },
  {
    "question": "<p>I know how to make a new branch that tracks remote branches, but <strong>how do I make an existing branch track a remote branch?</strong></p>\n\n<p>I know I can just edit the <code>.git/config</code> file, but it seems there should be an easier way.</p>\n",
    "answer": "<p>Given a branch <code>foo</code> and a remote <code>upstream</code>:</p>\n<p><strong>As of Git 1.8.0:</strong></p>\n<pre><code>git branch -u upstream/foo\n</code></pre>\n<p>Or, if local branch <code>foo</code> is not the current branch:</p>\n<pre><code>git branch -u upstream/foo foo\n</code></pre>\n<p>Or, if you like to type longer commands, these are equivalent to the above two:</p>\n<pre><code>git branch --set-upstream-to=upstream/foo\n\ngit branch --set-upstream-to=upstream/foo foo\n</code></pre>\n<p><strong>As of Git 1.7.0 (before 1.8.0):</strong></p>\n<pre><code>git branch --set-upstream foo upstream/foo\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ul>\n<li>All of the above commands will cause local branch <code>foo</code> to track remote branch <code>foo</code> from remote <code>upstream</code>.</li>\n<li>The old (1.7.x) syntax is deprecated in favor of the new (1.8+) syntax.  The new syntax is intended to be more intuitive and easier to remember.</li>\n<li>Defining an upstream branch will fail when run against newly-created remotes that have not already been fetched. In that case, run <code>git fetch upstream</code> beforehand.</li>\n</ul>\n<hr />\n<p>See also: <a href=\"https://stackoverflow.com/q/6089294/95706\">Why do I need to do `--set-upstream` all the time?</a></p>\n"
  },
  {
    "question": "<p>I want to remove a file from my repository.</p>\n<pre><code>git rm file_to_remove.txt\n</code></pre>\n<p>will remove the file from the repository, but it will also remove the file from the local file system. How do I remove this file from the repo <strong>without</strong> deleting my local copy of the file?</p>\n",
    "answer": "<p>The <a href=\"https://git-scm.com/docs/git-rm\" rel=\"noreferrer\"><code>git rm</code></a> documentation states:</p>\n<blockquote>\n<p>When <code>--cached</code> is given, the staged content has to match either the tip of the branch or the file on disk, allowing the file to be removed from just the index.</p>\n</blockquote>\n<p>So, for a single file:</p>\n<pre><code>git rm --cached file_to_remove.txt\n</code></pre>\n<p>and for a single directory:</p>\n<pre><code>git rm --cached -r directory_to_remove\n</code></pre>\n"
  },
  {
    "question": "<p>I started some work on a new feature and after coding for a bit, I decided this feature should be on its own branch. </p>\n\n<p>How do I move the existing uncommitted changes to a new branch and reset my current one?</p>\n\n<p>I want to reset my current branch while preserving existing work on the new feature.</p>\n",
    "answer": "<h3>Update 2020 / Git 2.23</h3>\n<p>Git 2.23 adds the new <a href=\"https://git-scm.com/docs/git-switch\" rel=\"noreferrer\"><code>switch</code></a> subcommand in an attempt to clear some of the confusion that comes from the overloaded usage of <a href=\"https://git-scm.com/docs/git-checkout\" rel=\"noreferrer\"><code>checkout</code></a> (switching branches, restoring files, detaching HEAD, etc.)</p>\n<p>Starting with this version of Git, replace the checkout command with:</p>\n<pre><code>git switch -c &lt;new-branch&gt;\n</code></pre>\n<p>The behavior is identical and remains unchanged.</p>\n<hr />\n<h3>Before Update 2020 / Git 2.23</h3>\n<p>Use the following:</p>\n<pre><code>git checkout -b &lt;new-branch&gt;\n</code></pre>\n<p>This will leave your current branch as it is, create and checkout a new branch and keep all your changes. You can then stage changes in files to commit with:</p>\n<pre><code>git add &lt;files&gt;\n</code></pre>\n<p>and commit to your <em>new branch</em> with:</p>\n<pre><code>git commit -m &quot;&lt;Brief description of this commit&gt;&quot;\n</code></pre>\n<p>The changes in the working directory and changes staged in index <em>do not belong to any branch</em> yet. This changes the branch where those modifications would end in.</p>\n<p>You don't <em>reset</em> your original branch, it stays as it is. The last commit on <code>&lt;old-branch&gt;</code> will still be the same. Therefore you <code>checkout -b</code> and then commit.</p>\n"
  },
  {
    "question": "<p>How do I view the history of an individual file with complete details of what has changed?</p>\n<p><code>git log -- [filename]</code> shows me the commit history of a file, but how do I see the file content that changed?</p>\n",
    "answer": "<p>For a graphical view, use <a href=\"https://git-scm.com/docs/gitk/\" rel=\"noreferrer\"><code>gitk</code></a>:</p>\n<pre><code>gitk [filename]\n</code></pre>\n<p>To follow the file across file renames:</p>\n<pre><code>gitk --follow [filename]\n</code></pre>\n"
  },
  {
    "question": "<p>How do I stash only one of the multiple changed files on my branch?</p>\n",
    "answer": "<pre><code>git stash push -p -m &quot;my commit message&quot;\n</code></pre>\n<p><code>-p</code> let's you select the hunks that should be stashed; whole files can be selected as well.</p>\n<p>You'll be prompted with a few actions for each hunk:</p>\n<pre><code>   y - stash this hunk\n   n - do not stash this hunk\n   q - quit; do not stash this hunk or any of the remaining ones\n   a - stash this hunk and all later hunks in the file\n   d - do not stash this hunk or any of the later hunks in the file\n   g - select a hunk to go to\n   / - search for a hunk matching the given regex\n   j - leave this hunk undecided, see next undecided hunk\n   J - leave this hunk undecided, see next hunk\n   k - leave this hunk undecided, see previous undecided hunk\n   K - leave this hunk undecided, see previous hunk\n   s - split the current hunk into smaller hunks\n   e - manually edit the current hunk\n   ? - print help\n</code></pre>\n"
  },
  {
    "question": "<p>I created a local branch. How do I push it to the remote server?</p>\n<p><strong>UPDATE: I have written a <a href=\"https://stackoverflow.com/a/27185855/109305\">simpler answer for Git 2.0 here</a>.</strong></p>\n",
    "answer": "<h2>Simple Git 2.0+ solution:</h2>\n<p>As of <strong>Git 2.0, the behavior has become simpler</strong>:</p>\n<p>You can configure git with <strong><code>push.default = current</code></strong> to make life easier:</p>\n<p>I added this so now I can just push a new branch upstream with</p>\n<pre><code>$ git push -u\n</code></pre>\n<p><code>-u</code> will track remote branch of the same name. Now with this configuration, you will auto-guess the remote reference to git push. From <a href=\"http://git-scm.com/docs/git-config\" rel=\"noreferrer\">git.config documentation</a>:</p>\n<blockquote>\n<p><strong>push.default</strong></p>\n<p>Defines the action git push should take if no refspec is explicitly given.</p>\n<p><strong><code>push.default = current</code></strong> - push the current branch to update a branch with the\nsame name on the receiving end. Works in both central and non-central workflows.</p>\n</blockquote>\n<p>For me, this is a good simplification of my day-to-day Git workflow. The configuration setting takes care of the 'usual' use case where you add a branch locally and want to create it remotely. Also, I can just as easily create local branches from remotes by just doing <code>git co remote_branch_name</code> (as opposed to using <code>--set-upstream-to</code> flag).</p>\n<p>I know this question and the accepted answers are rather old, but the behavior has changed so that now configuration options exist to make your workflow simpler.</p>\n<p>To add to your global Git configuration, run this on the command line:</p>\n<pre><code>$ git config --global push.default current\n</code></pre>\n"
  },
  {
    "question": "<p>When I make changes to a file in Git, how can I commit only some of the changes?</p>\n\n<p>For example, how could I commit only 15 lines out of 30 lines that have been changed in a file?</p>\n",
    "answer": "<p>You can use:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git add --patch &lt;filename&gt;\n</code></pre>\n<p>or for short:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git add -p &lt;filename&gt;\n</code></pre>\n<p>Git will break down your file into what it thinks are sensible &quot;hunks&quot; (portions of the file). It will then prompt you with this question:</p>\n<pre><code>Stage this hunk [y,n,q,a,d,/,j,J,g,s,e,?]?\n</code></pre>\n<p>Here is a description of each option:</p>\n<ul>\n<li><kbd>y</kbd> stage this hunk for the next commit</li>\n<li><kbd>n</kbd> do not stage this hunk for the next commit</li>\n<li><kbd>q</kbd> quit; do not stage this hunk or any of the remaining hunks</li>\n<li><kbd>a</kbd> stage this hunk and all later hunks in the file</li>\n<li><kbd>d</kbd> do not stage this hunk or any of the later hunks in the file</li>\n<li><kbd>g</kbd> select a hunk to go to</li>\n<li><kbd>/</kbd> search for a hunk matching the given regex</li>\n<li><kbd>j</kbd> leave this hunk undecided, see next undecided hunk</li>\n<li><kbd>J</kbd> leave this hunk undecided, see next hunk</li>\n<li><kbd>k</kbd> leave this hunk undecided, see previous undecided hunk</li>\n<li><kbd>K</kbd> leave this hunk undecided, see previous hunk</li>\n<li><kbd>s</kbd> split the current hunk into smaller hunks</li>\n<li><kbd>e</kbd> manually edit the current hunk\n<ul>\n<li>You can then edit the hunk manually by replacing <code>+</code>/<code>-</code> by <code>#</code> (thanks <a href=\"https://stackoverflow.com/users/1732521/veksen\">veksen</a>)</li>\n</ul>\n</li>\n<li><kbd>?</kbd> print hunk help</li>\n</ul>\n<p>If the file is not in the repository yet, you can first do <code>git add -N &lt;filename&gt;</code>. Afterwards you can go on with <code>git add -p &lt;filename&gt;</code>.</p>\n<p>Afterwards, you can use:</p>\n<ul>\n<li><code>git diff --staged</code> to check that you staged the correct changes</li>\n<li><code>git reset -p</code> to unstage mistakenly added hunks</li>\n<li><code>git commit -v</code> to view your commit while you edit the commit message.</li>\n</ul>\n<p>Note this is far different than the <code>git format-patch</code> command, whose purpose is to parse commit data into a <code>.patch</code> files.</p>\n<p>Reference for future: <a href=\"https://git-scm.com/book/en/v2/Git-Tools-Interactive-Staging\" rel=\"noreferrer\">Git Tools - Interactive Staging</a></p>\n"
  },
  {
    "question": "<p>How can I print a plain list of all files that were part of a given commit?</p>\n<p>Although the following lists the files, it also includes unwanted diff information for each:</p>\n<pre><code>git show a303aa90779efdd2f6b9d90693e2cbbbe4613c1d\n</code></pre>\n",
    "answer": "<p><strong>Preferred Way</strong> (because it's a <em>plumbing</em> command; meant to be programmatic):</p>\n<pre><code>$ git diff-tree --no-commit-id --name-only bd61ad98 -r\nindex.html\njavascript/application.js\njavascript/ie6.js\n</code></pre>\n<p><strong>Another Way</strong> (less preferred for scripts, because it's a <em>porcelain</em> command; meant to be user-facing)</p>\n<pre><code>$ git show --pretty=&quot;&quot; --name-only bd61ad98    \nindex.html\njavascript/application.js\njavascript/ie6.js\n</code></pre>\n<hr />\n<ul>\n<li>The <code>--no-commit-id</code> suppresses the commit ID output.</li>\n<li>The <code>--pretty</code> argument specifies an empty format string to avoid the cruft at the beginning.</li>\n<li>The <code>--name-only</code> argument shows only the file names that were affected (Thanks Hank). Use <code>--name-status</code> instead, if you want to see what happened to each file (<strong>D</strong>eleted, <strong>M</strong>odified, <strong>A</strong>dded)</li>\n<li>The <code>-r</code> argument is to recurse into sub-trees</li>\n</ul>\n"
  },
  {
    "question": "<p>How do I print a newline? This merely prints <code>\\n</code>:</p>\n<pre><code>echo -e &quot;Hello,\\nWorld!&quot;\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Hello,\\nWorld!\n</code></pre>\n",
    "answer": "<p>Use <code>printf</code> instead:</p>\n<pre><code>printf &quot;hello\\nworld\\n&quot;\n</code></pre>\n<p><code>printf</code> behaves more consistently across different environments than <code>echo</code>.</p>\n"
  },
  {
    "question": "<p>I have a string in Bash:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>string=&quot;My string&quot;\n</code></pre>\n<p>How can I test if it contains another string?</p>\n<pre class=\"lang-sh prettyprint-override\"><code>if [ $string ?? 'foo' ]; then\n  echo &quot;It's there!&quot;\nfi\n</code></pre>\n<p>Where <code>??</code> is my unknown operator. Do I use <code>echo</code> and <code>grep</code>?</p>\n<pre class=\"lang-sh prettyprint-override\"><code>if echo &quot;$string&quot; | grep 'foo'; then\n  echo &quot;It's there!&quot;\nfi\n</code></pre>\n<p>That looks a bit clumsy.</p>\n",
    "answer": "<p>You can use <a href=\"https://stackoverflow.com/a/229585/3755692\">Marcus's answer (* wildcards)</a> outside a case statement, too, if you use double brackets:</p>\n\n<pre><code>string='My long string'\nif [[ $string == *\"My long\"* ]]; then\n  echo \"It's there!\"\nfi\n</code></pre>\n\n<p>Note that spaces in the needle string need to be placed between double quotes, and the <code>*</code> wildcards should be outside. Also note that a simple comparison operator is used (i.e. <code>==</code>), not the regex operator <code>=~</code>.</p>\n"
  },
  {
    "question": "<p>I added a tag to the master branch on my machine:</p>\n<pre><code>git tag mytag master\n</code></pre>\n<p>How do I push this to the remote repository? Running <code>git push</code> gives the message:</p>\n<blockquote>\n<p>Everything up-to-date</p>\n</blockquote>\n<p>However, the remote repository does not contain my tag.</p>\n",
    "answer": "<p>To push specific, one tag do following\n<code>git push origin tag_name</code></p>\n"
  },
  {
    "question": "<p>In PHP, strings are concatenated together as follows:</p>\n<pre><code>$foo = &quot;Hello&quot;;\n$foo .= &quot; World&quot;;\n</code></pre>\n<p>Here, <code>$foo</code> becomes <code>&quot;Hello World&quot;</code>.</p>\n<p>How is this accomplished in Bash?</p>\n",
    "answer": "<pre><code>foo=\"Hello\"\nfoo=\"${foo} World\"\necho \"${foo}\"\n&gt; Hello World\n</code></pre>\n\n<p>In general to concatenate two variables you can just write them one after another:</p>\n\n<pre><code>a='Hello'\nb='World'\nc=\"${a} ${b}\"\necho \"${c}\"\n&gt; Hello World\n</code></pre>\n"
  },
  {
    "question": "<p>I updated to the latest OS, and/or restarted my computer (this happens on every major update, but this time all I did was restart my computer on 2022-09-13).</p>\n<p>This morning I navigated to my work's codebase in the command line on my <a href=\"https://en.wikipedia.org/wiki/MacBook_Pro\" rel=\"noreferrer\">MacBook Pro</a>, typed in &quot;git status&quot; in the repository and received an error:</p>\n<p>(In 9/2022, this error was much different, but I didn't capture it)</p>\n<blockquote>\n<p>xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</p>\n</blockquote>\n<p>Git will not work!</p>\n<p>How do I fix Git, and the command-line tools?</p>\n",
    "answer": "<p>The problem is that Xcode Command-line Tools needs to be updated due to a MacOs update.</p>\n<ul>\n<li>Did not run into this on Sonoma.\n<ul>\n<li>Maybe Apple fixed the process?</li>\n</ul>\n</li>\n<li>Updated for Ventura</li>\n</ul>\n<p>After opening the terminal after restarting, I tried to go to my code, and do a <code>git status</code>, and I got an error and prompt for command line software agreement:</p>\n<p>So press space until you get to the <code>[agree, print, cancel]</code> option, so careful hit space to scroll down to the end, if you blow past It you have to run a command to get it back. Use <code>sudo xcodebuild -license</code> to get to it again.</p>\n<p>Just be careful on scrolling down and enter <code>agree</code> and press return and it will launch into an update.</p>\n<p><a href=\"https://i.sstatic.net/Jm3iY.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/Jm3iY.png\" alt=\"Xcode software license\" /></a></p>\n<p>Then I tried to use git after the install, and it prompted me to install Xcode tools again.</p>\n<p>I followed my own advice from previous years (see below), and went to <a href=\"https://developer.apple.com/download/more/\" rel=\"noreferrer\">https://developer.apple.com/download/all</a> and downloaded\n&quot;Command Line Tools for Xcode 14&quot; (You have to log in with your Apple ID and enter MFA code, so have all the devices you need for that handy. Then select &quot;Command Line Tools for Xcode 14&quot;, or if you want to get into the alphas or betas, that's up to you. But stable releases are probably the best choice for software developers.</p>\n<p><a href=\"https://i.sstatic.net/o7P2T.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/o7P2T.png\" alt=\"developer download page selection for &quot;Command Line Tools for Xcode 14&quot;\" /></a></p>\n<p><strong>You have to either download the tools from CLI or the developer page and before you can use git, you need to reboot!!! Or you will get stuck in a loop of prompt &amp; downloading</strong></p>\n<p>Rebooting will break the loop and complete the installation of your CLI tools <em>including</em> git so that you can get back to work</p>\n<p>Solutions for previous years, these may or may not be valid these days as the downloads page has changed significantly:</p>\n<p>PREVIOUS YEARS SOLUTIONS, probably #2 is most helpful.</p>\n<p>*** <strong>Solution #1</strong>:</p>\n<p>Go back to your terminal and enter:</p>\n<pre><code>xcode-select --install\n</code></pre>\n<p>You'll then receive the following output:</p>\n<pre><code>xcode-select: note: install requested for command line developer tools\n</code></pre>\n<p>You will then be prompted in a window to update Xcode Command Line tools. (which could take a while)</p>\n<p>Open a new terminal window and your development tools should be returned.</p>\n<p><strong>Addition:</strong> With any major or semi-major update you'll need to update the command line tools in order to get them functioning properly again. Check Xcode with any update. This goes beyond Mojave...</p>\n<p><strong>After that restart your terminal</strong></p>\n<p>Alternatively, <strong>IF that fails,</strong> and it might.... you'll get a pop-up box saying &quot;Software not found on server&quot;, proceed to solution 2.</p>\n<p>*** <strong>Solution #2</strong>: (Preferred method)</p>\n<p>If you hit <code>xcode-select --install</code> and it doesn't find the software, log into Apple Developer, and install it via webpage.</p>\n<p>Log in or sign up here:</p>\n<p><a href=\"https://developer.apple.com/download/more/\" rel=\"noreferrer\">https://developer.apple.com/download/more/</a></p>\n<p>Look for: <strong>&quot;Command Line Tools for Xcode 14.x&quot;</strong> in the list of downloads\nThen click the dmg and download. (See previous image above) either way, you will probably wind up at an apple downloads webpage.</p>\n"
  },
  {
    "question": "<p>What is the difference between <a href=\"https://git-scm.com/docs/git-add#Documentation/git-add.txt--A\" rel=\"noreferrer\"><code>git add [--all | -A]</code></a> and <a href=\"https://git-scm.com/docs/git-add\" rel=\"noreferrer\"><code>git add .</code></a>?</p>\n",
    "answer": "<p><em>This answer only applies to <strong>Git version 1.x</strong>. For Git version 2.x, see other answers.</em></p>\n<hr />\n<p><strong>Summary:</strong></p>\n<ul>\n<li><p><code>git add -A</code> stages <strong>all changes</strong></p>\n</li>\n<li><p><code>git add .</code> stages new files and modifications, <strong>without deletions</strong> (on the current directory and its subdirectories).</p>\n</li>\n<li><p><code>git add -u</code> stages modifications and deletions, <strong>without new files</strong></p>\n</li>\n</ul>\n<hr />\n<p><strong>Detail:</strong></p>\n<p><code>git add -A</code> is equivalent to  <code>git add .; git add -u</code>.</p>\n<p>The important point about <code>git add .</code> is that it looks at the working tree and adds all those paths to the staged changes if they are either changed or are new and not ignored, it does not stage any 'rm' actions.</p>\n<p><code>git add -u</code> looks at all the <em>already</em> tracked files and stages the changes to those files if they are different or if they have been removed. It does not add any new files, it only stages changes to already tracked files.</p>\n<p><code>git add -A</code> is a handy shortcut for doing both of those.</p>\n<p>You can test the differences out with something like this (note that for Git version 2.x your output for <code>git add .</code> <code>git status</code> <strong>will</strong> be different):</p>\n<pre class=\"lang-sh prettyprint-override\"><code>git init\necho Change me &gt; change-me\necho Delete me &gt; delete-me\ngit add change-me delete-me\ngit commit -m initial\n\necho OK &gt;&gt; change-me\nrm delete-me\necho Add me &gt; add-me\n\ngit status\n# Changed but not updated:\n#   modified:   change-me\n#   deleted:    delete-me\n# Untracked files:\n#   add-me\n\ngit add .\ngit status\n\n# Changes to be committed:\n#   new file:   add-me\n#   modified:   change-me\n# Changed but not updated:\n#   deleted:    delete-me\n\ngit reset\n\ngit add -u\ngit status\n\n# Changes to be committed:\n#   modified:   change-me\n#   deleted:    delete-me\n# Untracked files:\n#   add-me\n\ngit reset\n\ngit add -A\ngit status\n\n# Changes to be committed:\n#   new file:   add-me\n#   modified:   change-me\n#   deleted:    delete-me\n</code></pre>\n"
  },
  {
    "question": "<p>How do I globally configure git to use a particular editor (e.g. <code>vim</code>) for commit messages?</p>\n",
    "answer": "<h4>Setting the default editor for Git</h4>\n<p>Pick one:</p>\n<ul>\n<li><p>Set <a href=\"http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Basic-Client-Configuration\" rel=\"noreferrer\"><code>core.editor</code></a> in your Git config:</p>\n<pre><code>git config --global core.editor &quot;vim&quot;\n</code></pre>\n</li>\n<li><p>Set the <a href=\"http://git-scm.com/docs/git-var#_variables\" rel=\"noreferrer\"><code>GIT_EDITOR</code></a> environment variable:</p>\n<pre><code>export GIT_EDITOR=vim\n</code></pre>\n</li>\n</ul>\n<hr />\n<h4>Setting the default editor for all programs</h4>\n<p>Set the standardized <code>VISUAL</code> and <code>EDITOR</code> environment variables*:</p>\n<pre><code>export VISUAL=vim\nexport EDITOR=&quot;$VISUAL&quot;\n</code></pre>\n<p><strong>NOTE:</strong> Setting both is not necessarily needed, but some programs may not use the more-correct <code>VISUAL</code>. See <a href=\"https://unix.stackexchange.com/questions/4859/visual-vs-editor-whats-the-difference\"><code>VISUAL</code> vs. <code>EDITOR</code></a>.</p>\n<hr />\n<h4>Fixing compatibility issues</h4>\n<p>Some editors require a <code>--wait</code> flag, or they will open a blank page. For example:</p>\n<ul>\n<li><p><strong>Sublime Text</strong> (if <a href=\"https://stackoverflow.com/questions/25152711/subl-command-not-working-command-not-found/25154529\">correctly set up</a>; or use the full path to the executable in place of <code>subl</code>):</p>\n<pre><code>export VISUAL=&quot;subl --wait&quot;\n</code></pre>\n</li>\n<li><p><strong>VS Code</strong> (after adding the <a href=\"https://stackoverflow.com/questions/29955500/code-not-working-in-command-line-for-visual-studio-code-on-osx-mac\">shell command</a>):</p>\n<pre><code>export VISUAL=&quot;code --wait&quot;\n</code></pre>\n</li>\n</ul>\n"
  },
  {
    "question": "<p>What does <a href=\"https://git-scm.com/docs/git-cherry-pick\" rel=\"noreferrer\"><code>git cherry-pick &lt;commit&gt;</code></a> do?</p>\n",
    "answer": "<p>Cherry-picking in Git means choosing a commit from one branch and applying it to another.</p>\n<p>This contrasts with other ways such as <code>merge</code> and <code>rebase</code> which normally apply many commits to another branch.</p>\n<p>It's also possible to <a href=\"https://stackoverflow.com/questions/1670970/how-to-cherry-pick-multiple-commits\">cherry-pick multiple commits</a> but <code>merge</code> is the preferred way over cherry-picking.</p>\n<ol>\n<li><p>Make sure you are on the branch you want to apply the commit to.</p>\n<pre><code>git switch master\n</code></pre>\n</li>\n<li><p>Execute the following:</p>\n<pre><code>git cherry-pick &lt;commit-hash&gt;\n</code></pre>\n</li>\n</ol>\n<p>N.B.:</p>\n<ol>\n<li><p>If you cherry-pick from a public branch, you should consider using</p>\n<pre><code>git cherry-pick -x &lt;commit-hash&gt;\n</code></pre>\n<p>This will generate a standardized commit message. This way, you (and your co-workers) can still keep track of the origin of the commit and may avoid merge conflicts in the future.</p>\n</li>\n<li><p>If you have notes attached to the commit they do not follow the cherry-pick. To bring them over as well, You have to use:</p>\n<pre><code>git notes copy &lt;from&gt; &lt;to&gt;\n</code></pre>\n</li>\n</ol>\n<p>Additional links:</p>\n<ul>\n<li><a href=\"http://git-scm.com/docs/git-cherry-pick\" rel=\"noreferrer\">git official guide page</a></li>\n<li><a href=\"https://acompiler.com/git-cherry-pick/\" rel=\"noreferrer\">git cherry-pick guide</a></li>\n</ul>\n"
  },
  {
    "question": "<p>I have the following commit history:</p>\n<ol>\n<li><code>HEAD</code></li>\n<li><code>HEAD~</code></li>\n<li><code>HEAD~2</code></li>\n<li><code>HEAD~3</code></li>\n</ol>\n<p><code>git commit --amend</code> modifies the current <code>HEAD</code> commit. But how do I modify <code>HEAD~3</code>?</p>\n",
    "answer": "<p>Use <a href=\"https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase\" rel=\"noreferrer\"><code>git rebase</code></a>. For example, to modify commit <code>bbc643cd</code>, run:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git rebase --interactive bbc643cd~\n</code></pre>\n<p>Please note the tilde <code>~</code> at the end of the command, because you need to reapply commits on top of the previous commit of <code>bbc643cd</code> (i.e. <code>bbc643cd~</code>).</p>\n<p>In the default editor, modify <code>pick</code> to <code>edit</code> in the line mentioning <code>bbc643cd</code>.</p>\n<p>Save the file and exit. git will interpret and automatically execute the commands in the file. You will find yourself in the previous situation in which you just had created commit <code>bbc643cd</code>.</p>\n<p>At this point, <code>bbc643cd</code> is your last commit and you can <a href=\"https://www.atlassian.com/git/tutorials/rewriting-history#git-commit--amend\" rel=\"noreferrer\">easily amend it</a>. Make your changes and then commit them with the command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git commit --all --amend --no-edit\n</code></pre>\n<p>After that, return back to the previous HEAD commit using:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git rebase --continue\n</code></pre>\n<p><strong>WARNING</strong>: Note that this will change the SHA-1 of that commit <strong>as well as all children</strong> -- in other words, this rewrites the history from that point forward. <a href=\"https://stackoverflow.com/a/3926832/1269037\">You can break repos doing this</a> if you push using the command <code>git push --force</code>.</p>\n"
  },
  {
    "question": "<p>I want to change the author of one specific commit in the history. It's not the latest commit.</p>\n<p><strong>Related:</strong> <a href=\"https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git\">How do I change the author and committer name/email for multiple commits?</a></p>\n",
    "answer": "<p>Interactive rebase off of a point earlier in the history than the commit you need to modify (<code>git rebase -i &lt;earliercommit&gt;</code>). In the list of commits being rebased, change the text from <code>pick</code> to <code>edit</code> next to the hash of the one you want to modify. Then when git prompts you to change the commit, use this:</p>\n\n<pre><code>git commit --amend --author=\"Author Name &lt;email@address.com&gt;\" --no-edit\n</code></pre>\n\n<hr>\n\n<p>For example, if your commit history is <code>A-B-C-D-E-F</code> with <code>F</code> as <code>HEAD</code>, and you want to change the author of <code>C</code> and <code>D</code>, then you would...</p>\n\n<ol>\n<li>Specify <code>git rebase -i B</code> (<a href=\"https://help.github.com/articles/about-git-rebase/#an-example-of-using-git-rebase\" rel=\"noreferrer\">here is an example of what you will see after executing the <code>git rebase -i B</code> command</a>)\n\n<ul>\n<li>if you need to edit <code>A</code>, use <code>git rebase -i --root</code></li>\n</ul></li>\n<li>Change the lines for both <code>C</code> and <code>D</code> from <code>pick</code> to <code>edit</code></li>\n<li>Exit the editor (for vim, this would be pressing Esc and then typing <code>:wq</code>).</li>\n<li>Once the rebase started, it would first pause at <code>C</code></li>\n<li>You would <code>git commit --amend --author=\"Author Name &lt;email@address.com&gt;\"</code></li>\n<li>Then <code>git rebase --continue</code></li>\n<li>It would pause again at <code>D</code></li>\n<li>Then you would <code>git commit --amend --author=\"Author Name &lt;email@address.com&gt;\"</code> again</li>\n<li><code>git rebase --continue</code></li>\n<li>The rebase would complete.</li>\n<li>Use <code>git push -f</code> to update your origin with the updated commits.</li>\n</ol>\n"
  },
  {
    "question": "<p>Say I'm in a Git repository. I delete a file and commit that change. I continue working and make some more commits. Then, I discover that I need to restore that file after deleting it.</p>\n<p>I know I can checkout a file using <code>git checkout &lt;commit&gt; -- filename.txt</code>, but I don't know when that file was deleted.</p>\n<ol>\n<li>How do I find the commit that deleted a given filename?</li>\n<li>How do I restore that file back into my working copy?</li>\n</ol>\n",
    "answer": "<p>Find the last commit that affected the given path. As the file isn't in the HEAD commit, that previous commit must have deleted it.</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>git rev-list -n 1 HEAD -- &lt;file_path&gt;\n</code></pre>\n<p>Then checkout the version at the commit before, using the caret (<code>^</code>) symbol:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git checkout &lt;deleting_commit&gt;^ -- &lt;file_path&gt;\n</code></pre>\n<p>Or in one command, if <code>$file</code> is the file in question.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git checkout $(git rev-list -n 1 HEAD -- &quot;$file&quot;)^ -- &quot;$file&quot;\n</code></pre>\n<hr />\n<p>If you are using zsh and have the EXTENDED_GLOB option enabled, the caret symbol won't work. You can use <code>~1</code> instead.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git checkout $(git rev-list -n 1 HEAD -- &quot;$file&quot;)~1 -- &quot;$file&quot;\n</code></pre>\n"
  },
  {
    "question": "<p>To combine <code>stderr</code> and <code>stdout</code> into the <code>stdout</code> stream, we append this to a command:</p>\n<pre><code>2&gt;&amp;1\n</code></pre>\n<p>For example, the following command shows the first few errors from compiling <code>main.cpp</code>:</p>\n<pre><code>g++ main.cpp 2&gt;&amp;1 | head\n</code></pre>\n<p>But what does <code>2&gt;&amp;1</code> mean?</p>\n",
    "answer": "<p>File descriptor 1 is the standard output (<code>stdout</code>).<br>\nFile descriptor 2 is the standard error (<code>stderr</code>).</p>\n<p>At first, <code>2&gt;1</code> may look like a good way to redirect <code>stderr</code> to <code>stdout</code>. However, it will actually be interpreted as &quot;redirect <code>stderr</code> to a file named <code>1</code>&quot;.</p>\n<p><code>&amp;</code> indicates that what follows and precedes is a <em>file descriptor</em>, and not a filename. Thus, we use <code>2&gt;&amp;1</code>. Consider <code>&gt;&amp;</code> to be a redirect merger operator.</p>\n"
  },
  {
    "question": "<p>The remote repository contains various branches such as <code>origin/daves_branch</code>:</p>\n<pre><code>$ git branch -r\norigin/HEAD -&gt; origin/master\norigin/daves_branch\norigin/master\n</code></pre>\n<p>How do I switch to <code>daves_branch</code> in the local repository so that it tracks <code>origin/daves_branch</code>?</p>\n<p>I tried:</p>\n<pre><code>$ git fetch origin daves_branch\n$ git checkout daves_branch\n</code></pre>\n",
    "answer": "<h1>Update: Using Git Switch</h1>\n<p>All of the information written below was accurate, but a new command, <a href=\"https://git-scm.com/docs/git-switch\" rel=\"noreferrer\"><code>git switch</code></a> has been added that simplifies the effort.</p>\n<p>If <code>daves_branch</code> exists on the remote repository, but not on your local branch, you can simply type:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>git switch daves_branch\n</code></pre>\n<p>Since you do not have the branch locally, this will automatically make <code>switch</code> look on the remote repo.  It will then also automatically set up remote branch tracking.</p>\n<p>Note that if <code>daves_branch</code> doesn't exist locally you'll need to <code>git fetch</code> first before using <code>switch</code>.</p>\n<hr />\n<h1>Original Post</h1>\n<p>You need to create a local branch that tracks a remote branch. The following command will create a local branch named <strong>daves_branch</strong>, tracking the remote branch <strong>origin/daves_branch</strong>. When you push your changes the remote branch will be updated.</p>\n<p>For most recent versions of Git:</p>\n<pre><code>git checkout --track origin/daves_branch\n</code></pre>\n<p><code>--track</code> is shorthand for <code>git checkout -b [branch] [remotename]/[branch]</code> where [remotename] is <strong>origin</strong> in this case and [branch] is twice the same, <strong>daves_branch</strong> in this case.</p>\n<p>For Git 1.5.6.5 you needed this:</p>\n<pre><code>git checkout --track -b daves_branch origin/daves_branch\n</code></pre>\n<p>For Git 1.7.2.3 and higher, this is enough (it might have started earlier, but this is the earliest confirmation I could find quickly):</p>\n<pre><code>git checkout daves_branch\n</code></pre>\n<p>Note that with recent Git versions, this command will not create a local branch and will put you in a 'detached HEAD' state. If you want a local branch, use the <code>--track</code> option.</p>\n<p>Full details are here: <em><a href=\"https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches#_tracking_branches\" rel=\"noreferrer\">3.5 Git Branching - Remote Branches, Tracking Branches</a></em></p>\n"
  },
  {
    "question": "<p>How would I validate that a program exists, in a way that will either return an error and exit, or continue with the script?</p>\n\n<p>It seems like it should be easy, but it's been stumping me.</p>\n",
    "answer": "<h2>Answer</h2>\n<p>POSIX compatible:</p>\n<pre><code>command -v &lt;the_command&gt;\n</code></pre>\n<p>Example use:</p>\n<pre><code>if ! command -v &lt;the_command&gt; &gt;/dev/null 2&gt;&amp;1\nthen\n    echo &quot;&lt;the_command&gt; could not be found&quot;\n    exit 1\nfi\n</code></pre>\n<p>For Bash specific environments:</p>\n<pre><code>hash &lt;the_command&gt; # For regular commands. Or...\ntype &lt;the_command&gt; # To check built-ins and keywords\n</code></pre>\n<h2>Explanation</h2>\n<p>Avoid <code>which</code>. Not only is it an external process you're launching for doing very little (meaning builtins like <code>hash</code>, <code>type</code> or <code>command</code> are way cheaper), you can also rely on the builtins to actually do what you want, while the effects of external commands can easily vary from system to system.</p>\n<p>Why care?</p>\n<ul>\n<li>Many operating systems have a <code>which</code> that <strong>doesn't even set an exit status</strong>, meaning the <code>if which foo</code> won't even work there and will <strong>always</strong> report that <code>foo</code> exists, even if it doesn't (note that some POSIX shells appear to do this for <code>hash</code> too).</li>\n<li>Many operating systems make <code>which</code> do custom and evil stuff like change the output or even hook into the package manager.</li>\n</ul>\n<p>So, don't use <code>which</code>. Instead use one of these:</p>\n<pre><code>command -v foo &gt;/dev/null 2&gt;&amp;1 || { echo &gt;&amp;2 &quot;I require foo but it's not installed.  Aborting.&quot;; exit 1; }\n</code></pre>\n<pre><code>type foo &gt;/dev/null 2&gt;&amp;1 || { echo &gt;&amp;2 &quot;I require foo but it's not installed.  Aborting.&quot;; exit 1; }\n</code></pre>\n<pre><code>hash foo 2&gt;/dev/null || { echo &gt;&amp;2 &quot;I require foo but it's not installed.  Aborting.&quot;; exit 1; }\n</code></pre>\n<p>(Minor side-note: some will suggest <code>2&gt;&amp;-</code> is the same <code>2&gt;/dev/null</code> but shorter – <em>this is untrue</em>.  <code>2&gt;&amp;-</code> closes FD 2 which causes an <strong>error</strong> in the program when it tries to write to stderr, which is very different from successfully writing to it and discarding the output (and dangerous!))<br />\n(Additional minor side-note: some will suggest <code>&amp;&gt;/dev/null</code>, but this <a href=\"https://www.shellcheck.net/wiki/SC3020\" rel=\"nofollow noreferrer\">is not POSIX compliant</a>)</p>\n<p>If your hash bang is <code>/bin/sh</code> then you should care about what POSIX says. <code>type</code> and <code>hash</code>'s exit codes aren't terribly well defined by POSIX, and <code>hash</code> is seen to exit successfully when the command doesn't exist (haven't seen this with <code>type</code> yet).  <code>command</code>'s exit status is well defined by POSIX, so that one is probably the safest to use.</p>\n<p>If your script uses <code>bash</code> though, POSIX rules don't really matter anymore and both <code>type</code> and <code>hash</code> become perfectly safe to use. <code>type</code> now has a <code>-P</code> to search just the <code>PATH</code> and <code>hash</code> has the side-effect that the command's location will be hashed (for faster lookup next time you use it), which is usually a good thing since you probably check for its existence in order to actually use it.</p>\n<p>As a simple example, here's a function that runs <code>gdate</code> if it exists, otherwise <code>date</code>:</p>\n<pre><code>gnudate() {\n    if hash gdate 2&gt;/dev/null; then\n        gdate &quot;$@&quot;\n    else\n        date &quot;$@&quot;\n    fi\n}\n</code></pre>\n"
  },
  {
    "question": "<p>How do I change the author for a range of commits?</p>\n",
    "answer": "<blockquote>\n<p>This answer uses <code>git-filter-branch</code>, for which <a href=\"https://git-scm.com/docs/git-filter-branch\" rel=\"noreferrer\">the docs</a> now give this warning:</p>\n<p>git filter-branch has a plethora of pitfalls that can produce non-obvious manglings of the intended history rewrite (and can leave you with little time to investigate such problems since it has such abysmal performance). These safety and performance issues cannot be backward compatibly fixed and as such, its use is not recommended. Please use an alternative history filtering tool such as <a href=\"https://github.com/newren/git-filter-repo/\" rel=\"noreferrer\">git filter-repo</a>. If you still need to use git filter-branch, please carefully read <a href=\"https://git-scm.com/docs/git-filter-branch#SAFETY\" rel=\"noreferrer\">SAFETY</a> (and <a href=\"https://git-scm.com/docs/git-filter-branch#PERFORMANCE\" rel=\"noreferrer\">PERFORMANCE</a>) to learn about the land mines of filter-branch, and then vigilantly avoid as many of the hazards listed there as reasonably possible.</p>\n</blockquote>\n<p>Changing the author (or committer) would require rewriting all of the history.  If you're okay with that and think it's worth it then you should check out <a href=\"https://schacon.github.io/git/git-filter-branch.html\" rel=\"noreferrer\">git filter-branch</a>.  The manual page includes several examples to get you started.  Also note that you can use environment variables to change the name of the author, committer, dates, etc. -- see the &quot;Environment Variables&quot; section of the <a href=\"https://schacon.github.io/git/git.html\" rel=\"noreferrer\">git manual page</a>.</p>\n<p>Specifically, you can fix all the wrong author names and emails <strong>for all branches and tags</strong> with this command (source: <a href=\"https://help.github.com/articles/changing-author-info/\" rel=\"noreferrer\">GitHub help</a>):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/sh\n\ngit filter-branch --env-filter '\nOLD_EMAIL=&quot;your-old-email@example.com&quot;\nCORRECT_NAME=&quot;Your Correct Name&quot;\nCORRECT_EMAIL=&quot;your-correct-email@example.com&quot;\nif [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]\nthen\n    export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;\n    export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;\nfi\nif [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]\nthen\n    export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;\n    export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;\nfi\n' --tag-name-filter cat -- --branches --tags\n</code></pre>\n<p>For using alternative history filtering tool <a href=\"https://github.com/newren/git-filter-repo/\" rel=\"noreferrer\">git filter-repo</a>, you can first install it and construct a <code>git-mailmap</code> according to the format of <a href=\"https://htmlpreview.github.io/?https://raw.githubusercontent.com/newren/git-filter-repo/docs/html/gitmailmap.html\" rel=\"noreferrer\">gitmailmap</a>.</p>\n<pre><code>Proper Name &lt;proper@email.xx&gt; Commit Name &lt;commit@email.xx&gt;\n</code></pre>\n<p>And then run filter-repo with the created mailmap:</p>\n<pre><code>git filter-repo --mailmap git-mailmap\n</code></pre>\n"
  },
  {
    "question": "<p>The command <code>git clone git@github.com:whatever</code> creates a directory named <code>whatever</code> containing a Git repository:</p>\n<pre><code>./\n    whatever/\n        .git\n</code></pre>\n<p>I want the contents of the Git repository cloned into my current directory <code>./</code> instead:</p>\n<pre><code>./\n    .git\n</code></pre>\n",
    "answer": "<p><strong>Option A:</strong></p>\n<pre><code>git clone git@github.com:whatever folder-name\n</code></pre>\n<p>Ergo, for <code>right here</code> use:</p>\n<pre><code>git clone git@github.com:whatever .\n</code></pre>\n<p><strong>Option B:</strong></p>\n<p>Move the <code>.git</code> folder, too. Note that the <code>.git</code> folder is hidden in most graphical file explorers, so be sure to show hidden files.</p>\n<pre><code>mv /where/it/is/right/now/* /where/I/want/it/\nmv /where/it/is/right/now/.* /where/I/want/it/\n</code></pre>\n<p>The first line grabs all normal files, the second line grabs dot-files. It is also possibe to do it in one line by enabling dotglob (i.e. <code>shopt -s dotglob</code>) but that is probably a bad solution if you are asking the question this answer answers.</p>\n<p><strong>Better yet:</strong></p>\n<p>Keep your working copy somewhere else, and create a symbolic link. Like this:</p>\n<pre><code>ln -s /where/it/is/right/now /the/path/I/want/to/use\n</code></pre>\n<p>For your case this would be something like:</p>\n<pre><code>ln -sfn /opt/projectA/prod/public /httpdocs/public\n</code></pre>\n<p>Which easily could be changed to test if you wanted it, i.e.:</p>\n<pre><code>ln -sfn /opt/projectA/test/public /httpdocs/public\n</code></pre>\n<p>without moving files around. Added <code>-fn</code> in case someone is copying these lines (<code>-f</code> is force,  <code>-n</code> avoid some often unwanted interactions with already and non-existing links).</p>\n<p>If you just want it to work, use Option A, if someone else is going to look at what you have done, use Option C.</p>\n"
  },
  {
    "question": "<p>I have this string stored in a variable:</p>\n\n<pre><code>IN=\"bla@some.com;john@home.com\"\n</code></pre>\n\n<p>Now I would like to split the strings by <code>;</code> delimiter so that I have:</p>\n\n<pre><code>ADDR1=\"bla@some.com\"\nADDR2=\"john@home.com\"\n</code></pre>\n\n<p>I don't necessarily need the <code>ADDR1</code> and <code>ADDR2</code> variables. If they are elements of an array that's even better.</p>\n\n<hr>\n\n<p>After suggestions from the answers below, I ended up with the following which is what I was after:</p>\n\n<pre><code>#!/usr/bin/env bash\n\nIN=\"bla@some.com;john@home.com\"\n\nmails=$(echo $IN | tr \";\" \"\\n\")\n\nfor addr in $mails\ndo\n    echo \"&gt; [$addr]\"\ndone\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt; [bla@some.com]\n&gt; [john@home.com]\n</code></pre>\n\n<p>There was a solution involving setting <a href=\"http://en.wikipedia.org/wiki/Internal_field_separator\" rel=\"noreferrer\">Internal_field_separator</a> (IFS) to <code>;</code>. I am not sure what happened with that answer, how do you reset <code>IFS</code> back to default?</p>\n\n<p>RE: <code>IFS</code> solution, I tried this and it works, I keep the old <code>IFS</code> and then restore it:</p>\n\n<pre><code>IN=\"bla@some.com;john@home.com\"\n\nOIFS=$IFS\nIFS=';'\nmails2=$IN\nfor x in $mails2\ndo\n    echo \"&gt; [$x]\"\ndone\n\nIFS=$OIFS\n</code></pre>\n\n<p>BTW, when I tried </p>\n\n<pre><code>mails2=($IN)\n</code></pre>\n\n<p>I only got the first string when printing it in loop, without brackets around <code>$IN</code> it works.</p>\n",
    "answer": "<p>You can set the <a href=\"http://en.wikipedia.org/wiki/Internal_field_separator\" rel=\"noreferrer\">internal field separator</a> (IFS) variable, and then let it parse into an array. When this happens in a command, then the assignment to <code>IFS</code> only takes place to that single command's environment (to <code>read</code> ). It then parses the input according to the <code>IFS</code> variable value into an array, which we can then iterate over.</p>\n<p>This example will parse one line of items separated by <code>;</code>, pushing it into an array:</p>\n<pre><code>IFS=';' read -ra ADDR &lt;&lt;&lt; &quot;$IN&quot;\nfor i in &quot;${ADDR[@]}&quot;; do\n  # process &quot;$i&quot;\ndone\n</code></pre>\n<p>This other example is for processing the whole content of <code>$IN</code>, each time one line of input separated by <code>;</code>:</p>\n<pre><code>while IFS=';' read -ra ADDR; do\n  for i in &quot;${ADDR[@]}&quot;; do\n    # process &quot;$i&quot;\n  done\ndone &lt;&lt;&lt; &quot;$IN&quot;\n</code></pre>\n"
  },
  {
    "question": "<p>I have a project in which I have to change the mode of files with <code>chmod</code> to 777 while developing, but which should not change in the main repo. </p>\n\n<p>Git picks up on <code>chmod -R 777 .</code> and marks all files as changed. Is there a way to make Git ignore mode changes that have been made to files?</p>\n",
    "answer": "<p>Try:</p>\n<pre><code>git config core.fileMode false\n</code></pre>\n<p>From <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-config.html\" rel=\"noreferrer\">git-config(1)</a>:</p>\n<blockquote>\n<pre><code>core.fileMode\n    Tells Git if the executable bit of files in the working tree\n    is to be honored.\n\n    Some filesystems lose the executable bit when a file that is\n    marked as executable is checked out, or checks out a\n    non-executable file with executable bit on. git-clone(1)\n    or git-init(1) probe the filesystem to see if it handles the \n    executable bit correctly and this variable is automatically\n    set as necessary.\n\n    A repository, however, may be on a filesystem that handles\n    the filemode correctly, and this variable is set to true when\n    created, but later may be made accessible from another\n    environment that loses the filemode (e.g. exporting ext4\n    via CIFS mount, visiting a Cygwin created repository with Git\n    for Windows or Eclipse). In such a case it may be necessary\n    to set this variable to false. See git-update-index(1).\n\n    The default is true (when core.filemode is not specified\n    in the config file).\n</code></pre>\n</blockquote>\n<p>The <code>-c</code> flag can be used to set this option for one-off commands:</p>\n<pre><code>git -c core.fileMode=false diff\n</code></pre>\n<p>Typing the <code>-c core.fileMode=false</code> can be bothersome and so you can set this flag for all git repos or just for one git repo:</p>\n<pre><code># this will set your the flag for your user for all git repos (modifies `$HOME/.gitconfig`)\n# WARNING: this will be override by local config, fileMode value is automatically selected with latest version of git.\n# This mean that if git detect your current filesystem is compatible it will set local core.fileMode to true when you clone or init a repository.\n# Tool like cygwin emulation will be detected as compatible and so your local setting WILL BE SET to true no matter what you set in global setting.\ngit config --global core.fileMode false\n\n# this will set the flag for one git repo (modifies `$current_git_repo/.git/config`)\ngit config core.fileMode false\n</code></pre>\n<p>Additionally, <code>git clone</code> and <code>git init</code> explicitly set <code>core.fileMode</code> to <code>true</code> in the repo config as discussed in <a href=\"https://stackoverflow.com/questions/30392318/git-global-core-filemode-false-overridden-locally-on-clone\">Git global core.fileMode false overridden locally on clone</a></p>\n<h2>Warning</h2>\n<p><code>core.fileMode</code> is not the best practice and should be used carefully. This setting only covers the executable bit of mode and never the read/write bits. In many cases you think you need this setting because you did something like <code>chmod -R 777</code>, making all your files executable. But in most projects <strong>most files don't need and should not be executable for security reasons</strong>.</p>\n<p>The proper way to solve this kind of situation is to handle folder and file permission separately, with something like:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>find . -type d -exec chmod a+rwx {} \\; # Make folders traversable and read/write\nfind . -type f -exec chmod a+rw {} \\;  # Make files read/write\n</code></pre>\n<p>If you do that, you'll never need to use <code>core.fileMode</code>, except in very rare environment.</p>\n"
  },
  {
    "question": "<p>I want to get the filename (without extension) and the extension separately.</p>\n\n<p>The best solution I found so far is:</p>\n\n<pre><code>NAME=`echo \"$FILE\" | cut -d'.' -f1`\nEXTENSION=`echo \"$FILE\" | cut -d'.' -f2`\n</code></pre>\n\n<p>This is wrong because it doesn't work if the file name contains multiple <code>.</code> characters. If, let's say, I have <code>a.b.js</code>, it will consider <code>a</code> and <code>b.js</code>, instead of <code>a.b</code> and <code>js</code>.</p>\n\n<p>It can be easily done in Python with</p>\n\n<pre><code>file, ext = os.path.splitext(path)\n</code></pre>\n\n<p>but I'd prefer not to fire up a Python interpreter just for this, if possible.</p>\n\n<p>Any better ideas?</p>\n",
    "answer": "<p>First, get file name without the path:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>filename=$(basename -- &quot;$fullfile&quot;)\nextension=&quot;${filename##*.}&quot;\nfilename=&quot;${filename%.*}&quot;\n</code></pre>\n<p>Alternatively, you can focus on the last '/' of the path instead of the '.' which should work even if you have unpredictable file extensions:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>filename=&quot;${fullfile##*/}&quot;\n</code></pre>\n<p>You may want to check the documentation :</p>\n<ul>\n<li>On the web at section &quot;<a href=\"http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html\" rel=\"noreferrer\">3.5.3 Shell Parameter Expansion</a>&quot;</li>\n<li>In the bash manpage at section called &quot;Parameter Expansion&quot;</li>\n</ul>\n"
  },
  {
    "question": "<p>I have an already initialized Git repository that I added a <code>.gitignore</code> file to. How can I refresh the file index so the files I want ignored get ignored?</p>\n",
    "answer": "<p>To untrack a <em>single</em> file that has already been added/initialized to your repository, <em>i.e.</em>, stop tracking the file but not delete it from your system use: <code>git rm --cached filename</code></p>\n<p>To untrack <em>every</em> file that is now in your <code>.gitignore</code>:</p>\n<p><strong>First commit any outstanding code changes</strong>, and then, run this command:</p>\n<pre><code>git rm -r --cached .\n</code></pre>\n<p>This removes any changed files from the <em>index</em>(staging area), then just run:</p>\n<pre><code>git add .\n</code></pre>\n<p>Commit it:</p>\n<pre><code>git commit -m &quot;.gitignore is now working&quot;\n</code></pre>\n<hr />\n<p>To undo <code>git rm --cached filename</code>, use <code>git add filename</code>.</p>\n<blockquote>\n<p>Make sure to commit all your important changes before running <code>git add .</code>\nOtherwise, you will lose any changes to other files.</p>\n</blockquote>\n<blockquote>\n<p>Please be careful, when you push this to a repository and pull from somewhere else into a state where those files are still tracked, the files will be DELETED</p>\n</blockquote>\n<hr />\n<p>To remove all files that do not match the paths listed in some path spec file (something that has the same format as a .gitignore file):</p>\n<pre><code>git rm --cached --ignore-unmatch -r --pathspec-from-file .ignorelist \n</code></pre>\n<p><strong>Note:</strong> unlike <code>.gitignore</code>, which can have new lines, <code>.ignorelist</code> cannot have new lines because <code>git</code> will complain about empty patterns not being valid path spec items.</p>\n<p>Explanation:</p>\n<ul>\n<li><code>-r</code>: to allow recursive removal when directories are involved</li>\n<li><code>--pathspec-from-file</code>: path to file containing the path specifications for files to be removed</li>\n<li><code>--ignore-unmatch</code>: tell <code>git</code> to ignore any path specifications that do not have a matching cache hit (otherwise it will abort with an error on that path spec)</li>\n</ul>\n"
  },
  {
    "question": "<p>How do I see what is inside a <a href=\"https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning\" rel=\"noreferrer\">stash</a> without actually applying it?</p>\n",
    "answer": "<p>From <code>man git-stash</code> (which can also be obtained via <code>git help stash</code>):</p>\n<blockquote>\n<p>The modifications stashed away by this command can be listed with <code>git stash list</code>, inspected with <code>git stash show</code>, and ...</p>\n</blockquote>\n<pre><code>show [&lt;stash&gt;]\n    Show the changes recorded in the stash as a diff between the stashed\n    state and its original parent. When no &lt;stash&gt; is given, shows the\n    latest one. By default, the command shows the diffstat, but it will\n    accept any format known to git diff (e.g., git stash show -p stash@{1}\n    to view the second most recent stash in patch form).\n</code></pre>\n<p>Note: the <code>-p</code> option generates a <em>patch</em>, as per <code>git-diff</code> documentation.</p>\n<p>List the stashes:</p>\n<pre><code>git stash list\n</code></pre>\n<p>Show the <em>files</em> in the most recent stash:</p>\n<pre><code>git stash show\n</code></pre>\n<p>Show the <em>changes</em> of the most recent stash:</p>\n<pre><code>git stash show -p\n</code></pre>\n<p>Show the <em>changes</em> of the named stash:</p>\n<pre><code>git stash show -p stash@{1}\n</code></pre>\n<p>Or in short:</p>\n<pre><code>git stash show -p 1 \n</code></pre>\n<p>If you want to view changes of only the last stash:</p>\n<pre><code>git stash show -p 0\n</code></pre>\n"
  },
  {
    "question": "<p>How do I get the hash of the current commit in Git?</p>\n",
    "answer": "<p>To turn any extended object reference into a hash, use <strong><a href=\"http://git-scm.com/docs/git-rev-parse\" rel=\"noreferrer\" title=\"git-rev-parse - Pick out and massage parameters\"><code>git-rev-parse</code></a></strong>:</p>\n<pre><code>git rev-parse HEAD\n</code></pre>\n<p>or</p>\n<pre><code>git rev-parse --verify HEAD\n</code></pre>\n<p>As noted by Alexander's <a href=\"https://stackoverflow.com/a/38666663/2411802\">answer</a>, you can also retrieve the short hash:</p>\n<pre><code>git rev-parse --short HEAD\n</code></pre>\n<p>To turn <em>references</em> (e.g. <em>branches and tags</em>) into hashes, use <code>git show-ref</code> and <code>git for-each-ref</code>.</p>\n"
  },
  {
    "question": "<p>I want to use a push and pull automatically in <em><a href=\"http://gitextensions.github.io/\" rel=\"noreferrer\">Git Extensions</a></em>, <em><a href=\"https://en.wikipedia.org/wiki/Atlassian#Acquisitions_and_product_announcements\" rel=\"noreferrer\">Sourcetree</a></em> or any other Git GUI without entering my username and password in a prompt, every time.</p>\n<p>So how can I save my credentials in Git?</p>\n",
    "answer": "<h2>Attention:</h2>\n<p>This method saves the credentials in <strong>plaintext</strong> on your PC's disk. Everyone on your computer can access it, e.g. malicious NPM modules.</p>\n<p><strong>Run</strong>:</p>\n<pre><code>git config --global credential.helper store\n</code></pre>\n<p><strong>then</strong>:</p>\n<pre><code>git pull\n</code></pre>\n<p>provide a username and password and those details will then be remembered later. The credentials are stored in a file on the disk, with the disk permissions of &quot;just user readable/writable&quot; but still in plaintext.</p>\n<p>If you want to change the password later:</p>\n<pre><code>git pull\n</code></pre>\n<p>Will fail, because the password is incorrect, git then removes the offending user+password from the <code>~/.git-credentials</code> file, so now re-run:</p>\n<pre><code>git pull\n</code></pre>\n<p>to provide a new password so it works as earlier.</p>\n"
  },
  {
    "question": "<p>How do I clone a git repository so that it also clones its submodules?</p>\n<p>Running <code>git clone $REPO_URL</code> merely creates empty submodule directories.</p>\n",
    "answer": "<p>With version 2.13 of Git and later, <code>--recurse-submodules</code> can be used instead of <code>--recursive</code>:</p>\n\n<pre><code>git clone --recurse-submodules -j8 git://github.com/foo/bar.git\ncd bar\n</code></pre>\n\n<p><sup>Editor’s note: <code>-j8</code> is an optional performance optimization that became available in version 2.8, and fetches up to 8 submodules at a time in parallel — see <code>man git-clone</code>.</sup></p>\n\n<p>With version 1.9 of Git up until version 2.12 (<code>-j</code> flag only available in version 2.8+):</p>\n\n<pre><code>git clone --recursive -j8 git://github.com/foo/bar.git\ncd bar\n</code></pre>\n\n<p>With version 1.6.5 of Git and later, you can use:</p>\n\n<pre><code>git clone --recursive git://github.com/foo/bar.git\ncd bar\n</code></pre>\n\n<p>For already cloned repos, or older Git versions, use:</p>\n\n<pre><code>git clone git://github.com/foo/bar.git\ncd bar\ngit submodule update --init --recursive\n</code></pre>\n"
  },
  {
    "question": "<p>I have a bunch of commits in the repository. I want to see a list of files changed between two commits - from <em>SHA1</em> to <em>SHA2</em>.</p>\n<p>What command should I use?</p>\n",
    "answer": "<pre><code>git diff --name-only SHA1 SHA2\n</code></pre>\n<p>where you only need to include enough of the SHA hash to identify the commits. The order of the SHAs does not matter. The output (which includes the relative path, not just the file name) follows this format:</p>\n<pre><code> dir 1/dir 2/filename.ext\n dir 3/dir 4/other filename.ext\n</code></pre>\n<p>You can also do, for example</p>\n<pre><code>git diff --name-only HEAD~10 HEAD~5\n</code></pre>\n<p>to see the differences between the tenth latest commit and the fifth latest (or so).</p>\n"
  },
  {
    "question": "<p>We're using git submodules to manage a couple of large projects that have dependencies on many other libraries we've developed. Each library is a separate repo brought into the dependent project as a submodule. During development, we often want to just go grab the latest version of every dependent submodule.</p>\n<p>How do I pull the latest changes for all git submodules?</p>\n",
    "answer": "<p>If it's <strong>the first time</strong> you check-out a repo you need to use <code>--init</code> first:</p>\n\n<pre><code>git submodule update --init --recursive\n</code></pre>\n\n<p>For <strong>git 1.8.2</strong> or above, the option <code>--remote</code> was added to support updating to latest tips of remote branches:</p>\n\n<pre><code>git submodule update --recursive --remote\n</code></pre>\n\n<p>This has the added benefit of respecting any \"non default\" branches specified in the <code>.gitmodules</code> or <code>.git/config</code> files (if you happen to have any, default is origin/master, in which case some of the other answers here would work as well).</p>\n\n<p>For <strong>git 1.7.3</strong> or above you can use (but the below gotchas around what update does still apply):</p>\n\n<pre><code>git submodule update --recursive\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>git pull --recurse-submodules\n</code></pre>\n\n<p>if you want to pull your submodules to latest commits instead of the current commit the repo points to.</p>\n\n<p>See <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-submodule.html\" rel=\"noreferrer\">git-submodule(1)</a> for details</p>\n"
  },
  {
    "question": "<p>How do I delete branches which have already been merged? Can I delete them all at once, instead of deleting each branch one-by-one?</p>\n",
    "answer": "<p>NOTE: You can add other branches to exclude like master and dev if your workflow has those as a possible ancestor. Usually I branch off of a &quot;sprint-start&quot; tag and <code>master</code>, <code>dev</code> and <code>qa</code> are not ancestors.</p>\n<hr />\n<p>First, list locally-tracking branches that were merged in remote (consider using <code>-r</code> flag to list all remote-tracking branches).</p>\n<pre><code>git branch --merged\n</code></pre>\n<p>You might see a few branches you don't want to remove. We can add arguments to skip important branches that we don't want to delete like master or a develop. The following command will skip the <code>master</code>/<code>main</code> branch and anything that has 'dev' in it.</p>\n<pre><code>git branch --merged | grep -Ev &quot;(^\\*|^\\+|master|main|dev)&quot;\n</code></pre>\n<p>The first part (<code>^\\*|^+</code>) excludes the current branch and any branch checked out in another worktree.</p>\n<p>If you want to skip a branch, you can add it to the grep command as below. The branch <code>skip_branch_name</code> will not be deleted.</p>\n<pre><code>git branch --merged | grep -Ev &quot;(^\\*|^\\+|master|main|dev|skip_branch_name)&quot;\n</code></pre>\n<p>To delete all local branches that are already merged into the currently checked out branch:</p>\n<pre><code>git branch --merged | grep -Ev &quot;(^\\*|^\\+|master|main|dev)&quot; | xargs --no-run-if-empty git branch -d\n</code></pre>\n<p>You can see that <code>master</code> and <code>dev</code> are excluded in case they are an ancestor.</p>\n<hr />\n<p>You can delete a merged local branch with:</p>\n<pre><code>git branch -d branchname\n</code></pre>\n<p>To force deletion of an unmerged branch, use:</p>\n<pre><code>git branch -D branchname\n</code></pre>\n<p>To delete it from the remote use:</p>\n<pre><code>git push --delete origin branchname\n\ngit push origin :branchname    # for really old git\n</code></pre>\n<p>Once you delete the branch from the remote, you can prune to get rid of remote tracking branches with:</p>\n<pre><code>git remote prune origin\n</code></pre>\n<p>or prune individual remote tracking branches, as the other answer suggests, with:</p>\n<pre><code>git branch -dr branchname\n</code></pre>\n"
  },
  {
    "question": "<p>I understand that a <code>.gitignore</code> file cloaks specified files from Git's version control.</p>\n<p>How do I tell <code>.gitignore</code> to ignore everything except the files I'm tracking with Git? Something like:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Ignore everything:\n*\n\n# Do not ignore these files:\nscript.pl\ntemplate.latex\n</code></pre>\n",
    "answer": "<blockquote>\n<p>An optional prefix <code>!</code> which negates the pattern; any matching file excluded by\na previous pattern will become included again. If a negated pattern matches,\nthis will override lower precedence patterns sources.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code># Ignore everything\n*\n\n# But not these files...\n!.gitignore\n!script.pl\n!template.latex\n# etc...\n\n# ...even if they are in subdirectories\n!*/\n</code></pre>\n"
  },
  {
    "question": "<p>I ran <code>git status</code> which told me everything was up to date and there were no local changes.</p>\n<p>Then I made several consecutive changes and realized I wanted to throw everything away and get back to my original state. Will this command do it for me?</p>\n<pre><code>git reset --hard HEAD\n</code></pre>\n",
    "answer": "<p>To revert changes made to your working copy, do this:</p>\n<pre><code>git checkout .\n</code></pre>\n<p>Or equivalently, for git version &gt;= 2.23:</p>\n<pre><code>git restore .\n</code></pre>\n<p>To revert changes made to the index (i.e., that you have added), do this. <strong>Warning this will reset all of your unpushed commits to master!</strong>:</p>\n<pre><code>git reset\n</code></pre>\n<p>To revert a change that you have committed:</p>\n<pre><code>git revert &lt;commit 1&gt; &lt;commit 2&gt;\n</code></pre>\n<p>To remove untracked files (e.g., new files, generated files):</p>\n<pre><code>git clean -f\n</code></pre>\n<p>Or untracked directories (e.g., new or automatically generated directories):</p>\n<pre><code>git clean -fd\n</code></pre>\n"
  },
  {
    "question": "<p>If I have an <code>n</code> number of commits, how can I create a branch from the <code>n-3</code> commit?</p>\n",
    "answer": "<p>Create the branch using a commit hash:</p>\n<pre><code>git branch branch_name &lt;commit-hash&gt;\n</code></pre>\n<p>Or by using a symbolic reference:</p>\n<pre><code>git branch branch_name HEAD~3\n</code></pre>\n<p>To checkout the branch while creating it, use:</p>\n<pre><code>git checkout -b branch_name &lt;commit-hash or HEAD~3&gt;\n</code></pre>\n"
  },
  {
    "question": "<p>A new branch from <code>master</code> is created, we call it <code>test</code>.</p>\n\n<p>There are several developers who either commit to <code>master</code> or create other branches and later merge into <code>master</code>.</p>\n\n<p>Let's say work on <code>test</code> is taking several days and you want to continuously keep <code>test</code> updated with commits inside <code>master</code>.</p>\n\n<p>I would do <code>git pull origin master</code> from <code>test</code>. </p>\n\n<p><strong>Question 1:</strong> Is this the right approach?  Other developers could have easily worked on same files as I have worked btw.</p>\n\n<hr>\n\n<p>My work on <code>test</code> is done and I am ready to merge it back to <code>master</code>. Here are the two ways I can think of:</p>\n\n<p><strong>A:</strong>  </p>\n\n<pre><code>git checkout test\ngit pull origin master\ngit push origin test\ngit checkout master\ngit pull origin test \n</code></pre>\n\n<p><strong>B:</strong> </p>\n\n<pre><code>git checkout test\ngit pull origin master\ngit checkout master\ngit merge test\n</code></pre>\n\n<p>I am not using <code>--rebase</code> because from my understanding, rebase will get the changes from <code>master</code> and stack mine on top of that hence it could overwrite changes other people made.</p>\n\n<p><strong>Question 2:</strong> Which one of these two methods is right?  What is the difference there?</p>\n\n<p>The goal in all of this is to keep my <code>test</code> branch updated with the things happening in <code>master</code> and later I could merge them back into <code>master</code> hoping to keep the timeline as linear as possible.</p>\n",
    "answer": "<p>How I would do this</p>\n\n<pre><code>git checkout master\ngit pull origin master\ngit merge test\ngit push origin master\n</code></pre>\n\n<p>If I have a local branch from a remote one, I don't feel comfortable with merging other branches than this one with the remote. Also I would not push my changes, until I'm happy with what I want to push and also I wouldn't push things at all, that are only for me and my local repository. In your description it seems, that <code>test</code> is only for you? So no reason to publish it.</p>\n\n<p>git always tries to respect yours and others changes, and so will <code>--rebase</code>. I don't think I can explain it appropriately, so have a look at <a href=\"http://git-scm.com/book/en/Git-Branching-Rebasing\" rel=\"noreferrer\">the Git book - Rebasing</a> or <a href=\"http://gitready.com/intermediate/2009/01/31/intro-to-rebase.html\" rel=\"noreferrer\">git-ready: Intro into rebasing</a> for a little description. It's a quite cool feature</p>\n"
  },
  {
    "question": "<p>What are the differences between <code>.gitignore</code> and <code>.gitkeep</code>? Are they the same thing with a different name, or do they both serve a different function?</p>\n\n<p>I don't seem to be able to find much documentation on <code>.gitkeep</code>.</p>\n",
    "answer": "<p><code>.gitkeep</code> isn’t documented, because it’s not a feature of Git.</p>\n<p>Git <a href=\"https://git.wiki.kernel.org/index.php/Git_FAQ#Can_I_add_empty_directories.3F\" rel=\"noreferrer\">cannot add a completely empty directory</a>. People who want to track empty directories in Git have created the convention of putting files called <code>.gitkeep</code> in these directories. The file could be called anything; Git assigns no special significance to this name.</p>\n<p>There is a competing convention of adding a <code>.gitignore</code> file to the empty directories to get them tracked, but some people see this as confusing since the goal is to keep the empty directories, not ignore them; <code>.gitignore</code> is also used to list files that should be ignored by Git when looking for untracked files.</p>\n"
  },
  {
    "question": "<p>I staged a few changes to be committed. How do I see the diffs of all files which are staged for the next commit? Is there a handy one-liner for this?</p>\n<p><a href=\"http://git-scm.com/docs/git-status\" rel=\"noreferrer\"><code>git status</code></a> only shows names of files which are staged, but I want to see the actual diffs.</p>\n<p>The <a href=\"http://git-scm.com/docs/git-diff\" rel=\"noreferrer\"><code>git-diff(1)</code></a> man page says:</p>\n<blockquote>\n<p>git diff [--options] [--] […]</p>\n<p>This form is to view the changes you made relative to the index (staging area for the next commit). In other words, the differences are what you <em>could</em> tell git to further add to the index but you still haven't. You can stage these changes by using git-add(1).</p>\n</blockquote>\n",
    "answer": "<p>It should just be:</p>\n\n<pre><code>git diff --cached\n</code></pre>\n\n<p><code>--cached</code> means show the changes in the cache/index (i.e. staged changes) against the current <code>HEAD</code>. <code>--staged</code> is a synonym for <code>--cached</code>.</p>\n\n<p><code>--staged</code> and <code>--cached</code> does not point to <code>HEAD</code>, just difference with respect to <code>HEAD</code>. If you cherry pick what to commit using <code>git add --patch</code> (or <code>git add -p</code>), <code>--staged</code> will return what is staged.</p>\n"
  },
  {
    "question": "<p>I frequently use <code>git stash</code> and <code>git stash pop</code> to save and restore changes in my working tree. Yesterday, I had some changes in my working tree that I had stashed and popped, and then I made more changes to my working tree. I'd like to go back and review yesterday's stashed changes, but <code>git stash pop</code> appears to remove all references to the associated commit.</p>\n<p>I know that if I use <code>git stash</code> then <em>.git/refs/stash contains</em> the reference of the commit used to create the stash. And <em>.git/logs/refs/stash contains</em> the whole stash. But those references are gone after <code>git stash pop</code>. I know that the commit is still in my repository somewhere, but I don't know what it was.</p>\n<p>Is there an easy way to recover yesterday's stash commit reference?</p>\n",
    "answer": "<p>Once you know the hash of the stash commit you dropped, you can apply it as a stash:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git stash apply $stash_hash\n</code></pre>\n<p>Or, you can create a separate branch for it with</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git branch recovered $stash_hash\n</code></pre>\n<p>After that, you can do whatever you want with all the normal tools. When you’re done, just blow the branch away.</p>\n<h1>Finding the hash</h1>\n<p>If you have only just popped it and the terminal is still open, you will <a href=\"https://stackoverflow.com/questions/89332/recover-dropped-stash-in-git/7844566#7844566\">still have the hash value printed by <code>git stash pop</code> on screen</a> (thanks, Dolda).</p>\n<p>Otherwise, you can find this way in Linux, Unix or Git Bash for Windows:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git fsck --no-reflog | awk '/dangling commit/ {print $NF}'\n</code></pre>\n<p>… or in PowerShell for Windows:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git fsck --no-reflog | select-string 'dangling commit' | foreach { $_.ToString().Split(&quot; &quot;)[-1] }\n</code></pre>\n<p>This will show you all the commits at the tips of your commit graph which are no longer referenced from any branch or tag – every lost commit, including every stash commit you’ve ever created, will be somewhere in that graph.</p>\n<p>The easiest way to find the stash commit you want is probably to pass that list straight to <code>gitk</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>gitk --all $( git fsck --no-reflog | awk '/dangling commit/ {print $NF}' )\n</code></pre>\n<p>… or in PowerShell for Windows:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>gitk --all $( git fsck --no-reflog | select-string 'dangling commit' | foreach { $_.ToString().Split(&quot; &quot;)[-1] } )\n</code></pre>\n<p>This will launch a repository browser showing you <em>every single commit in the repository ever</em>, regardless of whether it is reachable or not.</p>\n<p>You can replace <code>gitk</code> there with something like <code>git log --graph --oneline --decorate</code> if you prefer a nice graph on the console over a separate GUI app.</p>\n<p>To spot stash commits, look for commit messages of this form:</p>\n<p>        WIP on <i>somebranch</i>: <i>commithash Some old commit message</i></p>\n<p><em>Note</em>: The commit message will only be in this form (starting with &quot;WIP on&quot;) if you did not supply a message when you did <code>git stash</code>.</p>\n"
  },
  {
    "question": "<p>How can I delete <code>&quot;file1.txt&quot;</code> from my repository?</p>\n",
    "answer": "<p>Use <a href=\"https://git-scm.com/docs/git-rm\" rel=\"noreferrer\"><code>git rm</code></a>.</p>\n\n<p>If you want to remove the file from the Git repository <strong>and the filesystem</strong>, use:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git rm file1.txt\ngit commit -m \"remove file1.txt\"\n</code></pre>\n\n<p>But if you want to remove the file only from the Git repository and not remove it from the filesystem, use:  </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git rm --cached file1.txt\ngit commit -m \"remove file1.txt\"\n</code></pre>\n\n<p>And to push changes to remote repo</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git push origin branch_name\n</code></pre>\n"
  },
  {
    "question": "<p>Say, I have a script that gets called with this line:</p>\n<pre><code>./myscript -vfd ./foo/bar/someFile -o /fizz/someOtherFile\n</code></pre>\n<p>or this one:</p>\n<pre><code>./myscript -v -f -d -o /fizz/someOtherFile ./foo/bar/someFile \n</code></pre>\n<p>What's the accepted way of parsing this such that in each case (or some combination of the two) <code>$v</code>, <code>$f</code>, and  <code>$d</code> will all be set to <code>true</code> and <code>$outFile</code> will be equal to <code>/fizz/someOtherFile</code>?</p>\n",
    "answer": "<h4>Bash Space-Separated (e.g., <code>--option argument</code>)</h4>\n\n<pre class=\"lang-bash prettyprint-override\"><code>cat &gt;/tmp/demo-space-separated.sh &lt;&lt;'EOF'\n#!/bin/bash\n\nPOSITIONAL_ARGS=()\n\nwhile [[ $# -gt 0 ]]; do\n  case $1 in\n    -e|--extension)\n      EXTENSION=&quot;$2&quot;\n      shift # past argument\n      shift # past value\n      ;;\n    -s|--searchpath)\n      SEARCHPATH=&quot;$2&quot;\n      shift # past argument\n      shift # past value\n      ;;\n    --default)\n      DEFAULT=YES\n      shift # past argument\n      ;;\n    -*|--*)\n      echo &quot;Unknown option $1&quot;\n      exit 1\n      ;;\n    *)\n      POSITIONAL_ARGS+=(&quot;$1&quot;) # save positional arg\n      shift # past argument\n      ;;\n  esac\ndone\n\nset -- &quot;${POSITIONAL_ARGS[@]}&quot; # restore positional parameters\n\necho &quot;FILE EXTENSION  = ${EXTENSION}&quot;\necho &quot;SEARCH PATH     = ${SEARCHPATH}&quot;\necho &quot;DEFAULT         = ${DEFAULT}&quot;\necho &quot;Number files in SEARCH PATH with EXTENSION:&quot; $(ls -1 &quot;${SEARCHPATH}&quot;/*.&quot;${EXTENSION}&quot; | wc -l)\n\nif [[ -n $1 ]]; then\n    echo &quot;Last line of file specified as non-opt/last argument:&quot;\n    tail -1 &quot;$1&quot;\nfi\nEOF\n\nchmod +x /tmp/demo-space-separated.sh\n\n/tmp/demo-space-separated.sh -e conf -s /etc /etc/hosts\n</code></pre>\n<h5>Output from copy-pasting the block above</h5>\n<pre class=\"lang-bash prettyprint-override\"><code>FILE EXTENSION  = conf\nSEARCH PATH     = /etc\nDEFAULT         =\nNumber files in SEARCH PATH with EXTENSION: 14\nLast line of file specified as non-opt/last argument:\n#93.184.216.34    example.com\n</code></pre>\n<h5>Usage</h5>\n<pre class=\"lang-bash prettyprint-override\"><code>demo-space-separated.sh -e conf -s /etc /etc/hosts\n</code></pre>\n<hr />\n<h4>Bash Equals-Separated (e.g., <code>--option=argument</code>)</h4>\n<pre class=\"lang-bash prettyprint-override\"><code>cat &gt;/tmp/demo-equals-separated.sh &lt;&lt;'EOF'\n#!/bin/bash\n\nfor i in &quot;$@&quot;; do\n  case $i in\n    -e=*|--extension=*)\n      EXTENSION=&quot;${i#*=}&quot;\n      shift # past argument=value\n      ;;\n    -s=*|--searchpath=*)\n      SEARCHPATH=&quot;${i#*=}&quot;\n      shift # past argument=value\n      ;;\n    --default)\n      DEFAULT=YES\n      shift # past argument with no value\n      ;;\n    -*|--*)\n      echo &quot;Unknown option $i&quot;\n      exit 1\n      ;;\n    *)\n      ;;\n  esac\ndone\n\necho &quot;FILE EXTENSION  = ${EXTENSION}&quot;\necho &quot;SEARCH PATH     = ${SEARCHPATH}&quot;\necho &quot;DEFAULT         = ${DEFAULT}&quot;\necho &quot;Number files in SEARCH PATH with EXTENSION:&quot; $(ls -1 &quot;${SEARCHPATH}&quot;/*.&quot;${EXTENSION}&quot; | wc -l)\n\nif [[ -n $1 ]]; then\n    echo &quot;Last line of file specified as non-opt/last argument:&quot;\n    tail -1 $1\nfi\nEOF\n\nchmod +x /tmp/demo-equals-separated.sh\n\n/tmp/demo-equals-separated.sh -e=conf -s=/etc /etc/hosts\n</code></pre>\n<h5>Output from copy-pasting the block above</h5>\n<pre class=\"lang-bash prettyprint-override\"><code>FILE EXTENSION  = conf\nSEARCH PATH     = /etc\nDEFAULT         =\nNumber files in SEARCH PATH with EXTENSION: 14\nLast line of file specified as non-opt/last argument:\n#93.184.216.34    example.com\n</code></pre>\n<h5>Usage</h5>\n<pre class=\"lang-bash prettyprint-override\"><code>demo-equals-separated.sh -e=conf -s=/etc /etc/hosts\n</code></pre>\n<hr />\n<p>To better understand <code>${i#*=}</code> search for &quot;Substring Removal&quot; in <a href=\"http://tldp.org/LDP/abs/html/string-manipulation.html\" rel=\"noreferrer\">this guide</a>. It is functionally equivalent to <code>`sed 's/[^=]*=//' &lt;&lt;&lt; &quot;$i&quot;`</code> which calls a needless subprocess or <code>`echo &quot;$i&quot; | sed 's/[^=]*=//'`</code> which calls <em>two</em> needless subprocesses.</p>\n<hr />\n<h4>Using bash with getopt[s]</h4>\n<p>getopt(1) limitations (older, relatively-recent <code>getopt</code> versions):</p>\n<ul>\n<li>can't handle arguments that are empty strings</li>\n<li>can't handle arguments with embedded whitespace</li>\n</ul>\n<p>More recent <code>getopt</code> versions don't have these limitations. For more information, see these <a href=\"https://mywiki.wooledge.org/BashFAQ/035#getopts\" rel=\"noreferrer\">docs</a>.</p>\n<hr />\n<h4>POSIX getopts</h4>\n<p>Additionally, the POSIX shell and others offer <code>getopts</code> which doen't have these limitations. I've included a simplistic <code>getopts</code> example.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>cat &gt;/tmp/demo-getopts.sh &lt;&lt;'EOF'\n#!/bin/sh\n\n# A POSIX variable\nOPTIND=1         # Reset in case getopts has been used previously in the shell.\n\n# Initialize our own variables:\noutput_file=&quot;&quot;\nverbose=0\n\nwhile getopts &quot;h?vf:&quot; opt; do\n  case &quot;$opt&quot; in\n    h|\\?)\n      show_help\n      exit 0\n      ;;\n    v)  verbose=1\n      ;;\n    f)  output_file=$OPTARG\n      ;;\n  esac\ndone\n\nshift $((OPTIND-1))\n\n[ &quot;${1:-}&quot; = &quot;--&quot; ] &amp;&amp; shift\n\necho &quot;verbose=$verbose, output_file='$output_file', Leftovers: $@&quot;\nEOF\n\nchmod +x /tmp/demo-getopts.sh\n\n/tmp/demo-getopts.sh -vf /etc/hosts foo bar\n</code></pre>\n<h5>Output from copy-pasting the block above</h5>\n<pre class=\"lang-bash prettyprint-override\"><code>verbose=1, output_file='/etc/hosts', Leftovers: foo bar\n</code></pre>\n<h5>Usage</h5>\n<pre class=\"lang-bash prettyprint-override\"><code>demo-getopts.sh -vf /etc/hosts foo bar\n</code></pre>\n<p>The advantages of <code>getopts</code> are:</p>\n<ol>\n<li>It's more portable, and will work in other shells like <code>dash</code>.</li>\n<li>It can handle multiple single options like <code>-vf filename</code> in the typical Unix way, automatically.</li>\n</ol>\n<p>The disadvantage of <code>getopts</code> is that it can only handle short options (<code>-h</code>, not <code>--help</code>) without additional code.</p>\n<p>There is a <a href=\"https://flokoe.github.io/bash-hackers-wiki/howto/getopts_tutorial\" rel=\"noreferrer\">getopts tutorial</a> which explains what all of the syntax and variables mean.  In bash, there is also <code>help getopts</code>, which might be informative.</p>\n"
  },
  {
    "question": "<p>I've been wondering whether there is a good &quot;git export&quot; solution that creates a copy of a tree without the <code>.git</code> repository directory. There are at least three methods I know of:</p>\n<ol>\n<li><code>git clone</code> followed by removing the <code>.git</code> repository directory.</li>\n<li><a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-checkout-index.html\" rel=\"noreferrer\"><code>git checkout-index</code></a> alludes to this functionality but starts with &quot;Just read the desired tree into the index...&quot; which I'm not entirely sure how to do.</li>\n<li><a href=\"http://code.google.com/p/git-export/\" rel=\"noreferrer\"><code>git-export</code></a> is a third-party script that essentially does a <code>git clone</code> into a temporary location followed by <code>rsync --exclude='.git'</code> into the final destination.</li>\n</ol>\n<p>None of these solutions really strike me as being satisfactory. The closest one to <code>svn export</code> might be option 1, because both require the target directory to be empty first. But option 2 seems even better, assuming I can figure out what it means to read a tree into the index.</p>\n",
    "answer": "<p>Probably the simplest way to achieve this is with <a href=\"https://git-scm.com/docs/git-archive\" rel=\"noreferrer\"><code>git archive</code></a>. If you really need just the expanded tree you can do something like this.</p>\n<pre><code>git archive master | tar -x -C /somewhere/else\n</code></pre>\n<p>Most of the time that I need to 'export' something from git, I want a compressed archive in any case so I do something like this.</p>\n<pre><code>git archive master | bzip2 &gt;source-tree.tar.bz2\n</code></pre>\n<p>ZIP archive:</p>\n<pre><code>git archive --format zip --output /full/path/to/zipfile.zip master \n</code></pre>\n<p><a href=\"https://git-scm.com/docs/git-archive\" rel=\"noreferrer\"><code>git help archive</code></a> for more details, it's quite flexible.</p>\n<hr />\n<p>Be aware that even though the archive will not contain the .git directory, it will, however, contain other hidden git-specific files like .gitignore, .gitattributes, etc. If you don't want them in the archive, make sure you use the export-ignore attribute in a .gitattributes file and commit this before doing your archive. <a href=\"http://feeding.cloud.geek.nz/2010/02/excluding-files-from-git-archive.html\" rel=\"noreferrer\">Read more...</a></p>\n<hr />\n<p>Note: If you are interested in exporting the index, the command is</p>\n<pre><code>git checkout-index -a -f --prefix=/destination/path/\n</code></pre>\n<p>(See <a href=\"https://stackoverflow.com/a/160719/413020\" title=\"Greg's answer\">Greg's answer</a> for more details)</p>\n<hr />\n<p>Here's a real-world example using libchrony on Linux:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mkdir $HOME/dev\ncd $HOME/dev\npushd /tmp\ngit clone https://gitlab.com/chrony/libchrony.git\ncd libchrony\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\ngit archive -o ../libchrony.zip --prefix=&quot;libchrony/&quot; $BRANCH\npopd\nunzip /tmp/libchrony.zip\n</code></pre>\n<p>Those commands produce a zip file and extract it into <code>$HOME/dev/libchrony</code>. We can peek into the archive using:</p>\n<pre><code>$ unzip -v /tmp/libchrony\nArchive:  /tmp/libchrony.zip\ne0a3807f770b56f6b0e9833254baa7c4fc13564b\n Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n--------  ------  ------- ---- ---------- ----- --------  ----\n       0  Stored        0   0% 2023-07-20 09:37 00000000  libchrony/\n      49  Defl:N       47   4% 2023-07-20 09:37 37c3f2e2  libchrony/.gitignore\n   26530  Defl:N     9350  65% 2023-07-20 09:37 5622583e  libchrony/COPYING\n     961  Defl:N      467  51% 2023-07-20 09:37 da9221e3  libchrony/Makefile\n     475  Defl:N      304  36% 2023-07-20 09:37 cae27f70  libchrony/README.adoc\n    3313  Defl:N     1119  66% 2023-07-20 09:37 37eb110f  libchrony/chrony.h\n    7673  Defl:N     2261  71% 2023-07-20 09:37 5d455a52  libchrony/client.c\n    6190  Defl:N     2093  66% 2023-07-20 09:37 7ea9d81b  libchrony/example-reports.c\n   16348  Defl:N     3855  76% 2023-07-20 09:37 e82f5fe3  libchrony/message.c\n    2946  Defl:N     1099  63% 2023-07-20 09:37 945ee82b  libchrony/message.h\n--------          -------  ---                            -------\n   64485            20595  68%                            10 files\n</code></pre>\n"
  },
  {
    "question": "<p>How can I stash a specific file leaving the others currently modified out of the stash I am about to save?</p>\n<p>For example, if git status gives me this:</p>\n<pre><code>younker % git status      \n# On branch master\n# Your branch is ahead of 'origin/master' by 1 commit.\n#\n# Changes not staged for commit:\n#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)\n#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)\n#\n#   modified:   app/controllers/cart_controller.php\n#   modified:   app/views/cart/welcome.thtml\n#\nno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)\n</code></pre>\n<p>and I only want to stash app/views/cart/welcome.thtml, how would I do that? Something like (but of course this does not work):</p>\n<pre><code>git stash save welcome_cart app/views/cart/welcome.thtml\n</code></pre>\n",
    "answer": "<p>Since git 2.13, there is a command to save a specific path to the stash: <code>git stash push &lt;path&gt;</code>. For example:</p>\n<pre><code>git stash push -m welcome_cart app/views/cart/welcome.thtml\n</code></pre>\n<hr />\n<p>With earlier versions:</p>\n<p>You can do that using <code>git stash --patch</code> (or <code>git stash -p</code>) -- you'll enter interactive mode where you'll be presented with each hunk that was changed. Use <code>n</code> to skip the files that you don't want to stash, <code>y</code> when you encounter the one that you want to stash, and <code>q</code> to quit and leave the remaining hunks unstashed.  <code>a</code> will stash the shown hunk and the rest of the hunks in that file.</p>\n<p>Not the most user-friendly approach, but it gets the work done if you really need it.</p>\n"
  },
  {
    "question": "<p><a href=\"http://blog.npmjs.org/post/161081169345/v500\" rel=\"noreferrer\">npm 5 was released today</a> and one of the new features include deterministic installs with the creation of a <code>package-lock.json</code> file.</p>\n\n<p>Is this file supposed to be kept in source control?</p>\n\n<p>I'm assuming it's similar to <a href=\"https://stackoverflow.com/questions/39990017/should-i-commit-the-yarn-lock-file-and-what-is-it-for\"><code>yarn.lock</code></a> and <a href=\"https://stackoverflow.com/questions/12896780/should-composer-lock-be-committed-to-version-control\"><code>composer.lock</code></a>, both of which are supposed to be kept in source control. </p>\n",
    "answer": "<p>Yes, <code>package-lock.json</code> is intended to be checked into source control. If you're using npm 5+, you may see this notice on the command line: <code>created a lockfile as package-lock.json. You should commit this file.</code> According to <a href=\"https://docs.npmjs.com/cli/v8/configuring-npm/package-lock-json\" rel=\"noreferrer\"><code>npm help package-lock.json</code></a>:</p>\n<blockquote>\n<p><code>package-lock.json</code> is automatically generated for any operations where npm\nmodifies either the <code>node_modules</code> tree, or <code>package.json</code>. It describes the\nexact tree that was generated, such that subsequent installs are able to\ngenerate identical trees, regardless of intermediate dependency updates.</p>\n<p><strong>This file is intended to be committed into source repositories</strong>, and serves\nvarious purposes:</p>\n<ul>\n<li><p>Describe a single representation of a dependency tree such that teammates, deployments, and continuous integration are guaranteed to install exactly the same dependencies.</p>\n</li>\n<li><p>Provide a facility for users to &quot;time-travel&quot; to previous states of <code>node_modules</code> without having to commit the directory itself.</p>\n</li>\n<li><p>To facilitate greater visibility of tree changes through readable source control diffs.</p>\n</li>\n<li><p>And optimize the installation process by allowing npm to skip repeated metadata resolutions for previously-installed packages.</p>\n</li>\n</ul>\n<p>One key detail about <code>package-lock.json</code> is that it cannot be published, and it\nwill be ignored if found in any place other than the toplevel package. It shares\na format with npm-shrinkwrap.json, which is essentially the same file, but\nallows publication. This is not recommended unless deploying a CLI tool or\notherwise using the publication process for producing production packages.</p>\n<p>If both <code>package-lock.json</code> and <code>npm-shrinkwrap.json</code> are present in the root of\na package, <code>package-lock.json</code> will be completely ignored.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>I have a pretty simple script that is something like the following:</p>\n\n<pre><code>#!/bin/bash\n\nVAR1=\"$1\"\nMOREF='sudo run command against $VAR1 | grep name | cut -c7-'\n\necho $MOREF\n</code></pre>\n\n<p>When I run this script from the command line and pass it the arguments, I am not getting any output.  However, when I run the commands contained within the <code>$MOREF</code> variable, I am able to get output.</p>\n\n<p>How can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?</p>\n",
    "answer": "<p>In addition to backticks <code>`command`</code>, <a href=\"http://www.gnu.org/software/bash/manual/bashref.html#Command-Substitution\" rel=\"noreferrer\">command substitution</a> can be done with <code>$(command)</code> or <code>&quot;$(command)&quot;</code>, which I find easier to read, and allows for nesting.</p>\n<pre><code>OUTPUT=&quot;$(ls -1)&quot;\necho &quot;${OUTPUT}&quot;\n\nMULTILINE=&quot;$(ls \\\n   -1)&quot;\necho &quot;${MULTILINE}&quot;\n</code></pre>\n<p>Quoting (<code>&quot;</code>) does matter to preserve <strong>multi-line variable values</strong> and it is safer to use with whitespace and special characters such as (<code>*</code>) and therefore advised; it is, however, optional on the right-hand side of an assignment when <a href=\"https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Shell-Parameters\" rel=\"noreferrer\">word splitting is not performed</a>, so <code>OUTPUT=$(ls -1)</code> would work fine.</p>\n"
  },
  {
    "question": "<p>How do I know if a variable is set in Bash?</p>\n\n<p>For example, how do I check if the user gave the first parameter to a function?</p>\n\n<pre><code>function a {\n    # if $1 is set ?\n}\n</code></pre>\n",
    "answer": "<h2>(Usually) The right way</h2>\n<pre><code>if [ -z ${var+x} ]; then echo &quot;var is unset&quot;; else echo &quot;var is set to '$var'&quot;; fi\n</code></pre>\n<p>where <code>${var+x}</code> is a <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02\" rel=\"noreferrer\">parameter expansion</a> which evaluates to nothing if <code>var</code> is unset, and substitutes the string <code>x</code> otherwise.</p>\n<h3>Quotes Digression</h3>\n<p>Quotes can be omitted (so we can say <code>${var+x}</code> instead of <code>&quot;${var+x}&quot;</code>) because this syntax &amp; usage guarantees this will only expand to something that does not require quotes (since it either expands to <code>x</code> (which contains no word breaks so it needs no quotes), or to nothing (which results in <code>[ -z  ]</code>, which conveniently evaluates to the same value (true) that <code>[ -z &quot;&quot; ]</code> does as well)).</p>\n<p>However, while quotes can be safely omitted, and it was not immediately obvious to all (it wasn't even apparent to <a href=\"https://stackoverflow.com/users/2255628/destiny-architect\">the first author of this quotes explanation</a> who is also a major Bash coder), it would sometimes be better to write the solution with quotes as <code>[ -z &quot;${var+x}&quot; ]</code>, at the very small possible cost of an O(1) speed penalty.  The first author also added this as a comment next to the code using this solution giving the URL to this answer, which now also includes the explanation for why the quotes can be safely omitted.</p>\n<h2>(Often) The wrong way</h2>\n<pre><code>if [ -z &quot;$var&quot; ]; then echo &quot;var is blank&quot;; else echo &quot;var is set to '$var'&quot;; fi\n</code></pre>\n<p>This is often wrong because it doesn't distinguish between a variable that is unset and a variable that is set to the empty string. That is to say, if <code>var=''</code>, then the above solution will output &quot;var is blank&quot;.</p>\n<p>The distinction between unset and &quot;set to the empty string&quot; is essential in situations where the user has to specify an extension, or additional list of properties, and that not specifying them defaults to a non-empty value, whereas specifying the empty string should make the script use an empty extension or list of additional properties.</p>\n<p>The distinction may not be essential in every scenario though. In those cases  <code>[ -z &quot;$var&quot; ]</code> will be just fine.</p>\n"
  },
  {
    "question": "<p>I have changes to a file, plus a new file, and would like to use git stash to put them away while I switch to another task.  But git stash by itself stashes only the changes to the existing file; the new file remains in my working tree, cluttering up my future work.  How do I stash this untracked file?</p>\n",
    "answer": "<p>To stash your working directory including untracked files (especially those that are in the <code>.gitignore</code>) then you probably want to use this cmd:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git stash --include-untracked\n</code></pre>\n<p>Alternatively, you can use the shorthand <code>-u</code> instead of <code>--include-untracked</code>, or simply <code>git stash --all</code> (see warning below for this one) which stashes all files, including <strong>untracked</strong> and <strong>ignored</strong> files. This behaviour changed in 2018, so make sure your git is up to date.</p>\n<hr />\n<p><strong>Warning: there seems to be (or have been) situations in which contents of ignored directories could be deleted permanently. <a href=\"http://web.archive.org/web/20140310215100/http://blog.icefusion.co.uk:80/git-stash-can-delete-ignored-files-git-stash-u/\" rel=\"noreferrer\">See this archived website for more information</a></strong>.</p>\n"
  },
  {
    "question": "<p>Due to some bad cherry-picking, my local Git repository is currently five commits ahead of the origin, and not in a good state. I want to get rid of all these commits and start over again.</p>\n\n<p>Obviously, deleting my working directory and re-cloning would do it, but downloading everything from GitHub again seems like overkill, and not a good use of my time.</p>\n\n<p>Maybe <code>git revert</code> is what I need, but I don't want to end up <em>10</em> commits ahead of the origin (or even six), even if it does get the code itself back to the right state. I just want to pretend the last half-hour never happened.</p>\n\n<p>Is there a simple command that will do this? It seems like an obvious use case, but I'm not finding any examples of it.</p>\n\n<hr>\n\n<p>Note that this question is specifically about <em>commits</em>, <em>not</em> about:</p>\n\n<ul>\n<li>untracked files</li>\n<li>unstaged changes</li>\n<li>staged, but uncommitted changes</li>\n</ul>\n",
    "answer": "<p>If your excess commits are only visible to you, you can just do \n<code>git reset --hard origin/&lt;branch_name&gt;</code> \nto move back to where the origin is. This will reset the state of the repository to the previous commit, and it will discard all local changes.</p>\n\n<p>Doing a <code>git revert</code> makes <em>new</em> commits to remove <em>old</em> commits in a way that keeps everyone's history sane.</p>\n"
  },
  {
    "question": "<p>I cloned a Git repository containing many branches. However, <code>git branch</code> only shows one:</p>\n<pre><code>$ git branch\n* master\n</code></pre>\n<p>How would I pull all the branches locally so when I do <code>git branch</code>, it shows the following?</p>\n<pre><code>$ git branch\n* master\n* staging\n* etc...\n</code></pre>\n",
    "answer": "<h3>TL;DR answer</h3>\n<pre class=\"lang-bash prettyprint-override\"><code>git branch -r \\\n  | grep -v '\\-&gt;' \\\n  | sed &quot;s,\\x1B\\[[0-9;]*[a-zA-Z],,g&quot; \\\n  | while read remote; do \\\n      git branch --track &quot;${remote#origin/}&quot; &quot;$remote&quot;; \\\n    done\ngit fetch --all\ngit pull --all\n</code></pre>\n<p><em>(<code>grep -v</code> matches the inverse of given string; <code>sed</code> removes control sequences: <code>\\x1B</code> matches <kbd>esc</kbd>)</em></p>\n<p>(It seems that pull fetches all branches from all remotes, but I always fetch first just to be sure.)</p>\n<p>Run the first command only if there are remote branches on the server that aren't tracked by your local branches.</p>\n<h3>Complete answer</h3>\n<p>You can fetch all branches from all remotes like this:</p>\n<pre><code>git fetch --all\n</code></pre>\n<p>It's basically a <a href=\"https://www.atlassian.com/git/tutorials/syncing/git-fetch\" rel=\"noreferrer\">power move</a>.</p>\n<p><code>fetch</code> updates local copies of remote branches so this is always safe for your local branches <strong>BUT</strong>:</p>\n<ol>\n<li><p><code>fetch</code> will not <strong>update</strong> local branches (which <strong>track</strong> remote branches); if you want to update your local branches you still need to pull every branch.</p>\n</li>\n<li><p><code>fetch</code> will not <strong>create</strong> local branches (which <strong>track</strong> remote branches), you have to do this manually. If you want to list all remote branches:\n<code>git branch -a</code></p>\n</li>\n</ol>\n<p>To <strong>update</strong> local branches which track remote branches:</p>\n<pre><code>git pull --all\n</code></pre>\n<p>However, this can be still insufficient. It will work only for your local branches which track remote branches. To track all remote branches execute this oneliner <strong>BEFORE</strong> <code>git pull --all</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>git branch -r | grep -v '\\-&gt;' | sed &quot;s,\\x1B\\[[0-9;]*[a-zA-Z],,g&quot; | while read remote; do git branch --track &quot;${remote#origin/}&quot; &quot;$remote&quot;; done\n</code></pre>\n<p>P.S. AFAIK <code>git fetch --all</code> and <code>git remote update</code> are equivalent.</p>\n<hr />\n<hr />\n<p>Kamil Szot's <a href=\"https://stackoverflow.com/questions/10312521/how-to-fetch-all-git-branches#comment27984640_10312587\">comment</a>, which folks have found useful.</p>\n<blockquote>\n<p>I had to use:</p>\n<pre><code>for remote in `git branch -r`; do git branch --track ${remote#origin/} $remote; done\n</code></pre>\n<p>because your code created local branches named <code>origin/branchname</code> and\nI was getting &quot;refname 'origin/branchname' is ambiguous whenever I\nreferred to it.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>When I do <code>git diff COMMIT</code> I see the changes between that commit and HEAD (as far as I know), but I would like to see the changes that were made by that single commit.</p>\n\n<p>I haven't found any obvious options on <code>diff</code> / <code>log</code> that will give me that output.</p>\n",
    "answer": "<p>To see the diff for a particular <code>COMMIT</code> hash, where <code>COMMIT</code> is the hash of the commit:</p>\n<p><code>git diff COMMIT~ COMMIT</code> will show you the difference between that <code>COMMIT</code>'s ancestor and the <code>COMMIT</code>. See the man pages for <a href=\"http://jk.gs/git-diff.html\" rel=\"noreferrer\">git diff</a> for details about the command and <a href=\"http://jk.gs/gitrevisions.html\" rel=\"noreferrer\">gitrevisions</a> about the <code>~</code> notation and its friends.</p>\n<p>Alternatively, <code>git show COMMIT</code> will do something very similar. (The commit's data, including its diff - but not for merge commits.) See the <a href=\"http://jk.gs/git-show.html\" rel=\"noreferrer\">git show manpage</a>.</p>\n<p>(also <code>git diff COMMIT</code> will show you the difference between that <code>COMMIT</code> and the head.)</p>\n"
  },
  {
    "question": "<p>I want to write a script that loops through 15 strings (array possibly?) Is that possible?</p>\n\n<p>Something like:</p>\n\n<pre><code>for databaseName in listOfNames\nthen\n  # Do something\nend\n</code></pre>\n",
    "answer": "<p>You can use it like this:</p>\n\n<pre><code>## declare an array variable\ndeclare -a arr=(\"element1\" \"element2\" \"element3\")\n\n## now loop through the above array\nfor i in \"${arr[@]}\"\ndo\n   echo \"$i\"\n   # or do whatever with individual element of the array\ndone\n\n# You can access them using echo \"${arr[0]}\", \"${arr[1]}\" also\n</code></pre>\n\n<p>Also works for multi-line array declaration</p>\n\n<pre><code>declare -a arr=(\"element1\" \n                \"element2\" \"element3\"\n                \"element4\"\n                )\n</code></pre>\n"
  },
  {
    "question": "<p>I want to merge two branches that have been separated for a while and wanted to know which files have been modified.</p>\n<p>Came across this link: <a href=\"https://web.archive.org/web/20180830081303/http://linux.yyz.us/git-howto.html\" rel=\"noreferrer\">http://linux.yyz.us/git-howto.html</a> (moved to web.archive.org) which was quite useful.</p>\n<p>The tools to compare branches I've come across are:</p>\n<ul>\n<li><code>git diff master..branch</code></li>\n<li><code>git log master..branch</code></li>\n<li><code>git shortlog master..branch</code></li>\n</ul>\n<p>Was wondering if there's something like &quot;git status master..branch&quot; to only see those files that are different between the two branches.</p>\n<p>Without creating a new tool, I think this is the closest you can get to do that now (which of course will show repeats if a file was modified more than once):</p>\n<ul>\n<li><code>git diff master..branch | grep &quot;^diff&quot;</code></li>\n</ul>\n<p>Was wondering if there's something I missed...</p>\n",
    "answer": "<p>To compare the current branch against <code>main</code> branch:</p>\n<pre><code>$ git diff --name-status main\n</code></pre>\n<p>To compare any two branches:</p>\n<pre><code>$ git diff --name-status firstbranch..yourBranchName\n</code></pre>\n<p>There are more options to <code>git diff</code> in the <a href=\"https://git-scm.com/docs/git-diff\" rel=\"noreferrer\">official documentation</a> (and specifically the <a href=\"https://git-scm.com/docs/git-diff#Documentation/git-diff.txt---name-status\" rel=\"noreferrer\"><code>--name-status</code></a> option).</p>\n"
  },
  {
    "question": "<p>How do I remove a file from the latest commit?</p>\n",
    "answer": "<p>I think other answers here are wrong, because this is a question of moving the mistakenly committed files back to the staging area from the previous commit, without cancelling the changes done to them. This can be done like Paritosh Singh suggested:</p>\n<pre><code>git reset --soft HEAD^ \n</code></pre>\n<p>or</p>\n<pre><code>git reset --soft HEAD~1\n</code></pre>\n<p>Then reset the unwanted files in order to leave them out from the commit (the old way):</p>\n<pre><code>git reset HEAD path/to/unwanted_file\n</code></pre>\n<p>Note, that since Git <code>2.23.0</code> one can (<strong>the new way</strong>):</p>\n<pre><code>git restore --staged path/to/unwanted_file\n</code></pre>\n<p>Now commit again, you can even re-use the same commit message:</p>\n<pre><code>git commit -c ORIG_HEAD  \n</code></pre>\n<p><strong>EDIT</strong>: The easiest way to do this is to use e.g. <code>git gui</code>. Just select <code>Commit =&gt; Amend Last Commit</code> and simply uncheck the desired file from the commit and click <code>Commit</code>.</p>\n"
  },
  {
    "question": "<p>How can I view any local commits I've made, that haven't yet been pushed to the remote repository? Occasionally, <code>git status</code> will print out that my branch is X commits ahead of <code>origin/master</code>, but not always.</p>\n\n<p>Is this a bug with my install of Git, or am I missing something?</p>\n",
    "answer": "<p>This gives a log of all commits between origin/master and HEAD:</p>\n<pre><code>git log origin/master..HEAD\n</code></pre>\n<p>When HEAD is on the master branch, this gives a log of unpushed commits.</p>\n<hr />\n<p>Similarly, to view the diff:</p>\n<pre><code>git diff origin/master..HEAD\n</code></pre>\n"
  },
  {
    "question": "<p>Is there a simple way to delete all tracking branches whose remote equivalent no longer exists?</p>\n\n<p>Example:</p>\n\n<p>Branches (local and remote)</p>\n\n<ul>\n<li>master</li>\n<li>origin/master</li>\n<li>origin/bug-fix-a</li>\n<li>origin/bug-fix-b</li>\n<li>origin/bug-fix-c</li>\n</ul>\n\n<p>Locally, I only have a master branch. Now I need to work on <em>bug-fix-a</em>, so I check it out, work on it, and push changes to the remote. Next I do the same with <em>bug-fix-b</em>.</p>\n\n<p>Branches (local and remote)</p>\n\n<ul>\n<li>master</li>\n<li>bug-fix-a</li>\n<li>bug-fix-b</li>\n<li>origin/master</li>\n<li>origin/bug-fix-a</li>\n<li>origin/bug-fix-b</li>\n<li>origin/bug-fix-c</li>\n</ul>\n\n<p>Now I have local branches <em>master</em>, <em>bug-fix-a</em>, <em>bug-fix-b</em>. The Master branch maintainer will merge my changes into <em>master</em> and delete all branches he has already merged.</p>\n\n<p>So the current state is now:</p>\n\n<p>Branches (local and remote)</p>\n\n<ul>\n<li>master</li>\n<li>bug-fix-a</li>\n<li>bug-fix-b</li>\n<li>origin/master</li>\n<li>origin/bug-fix-c</li>\n</ul>\n\n<p>Now I would like to call some command to delete branches (in this case <em>bug-fix-a</em>, <em>bug-fix-b</em>), which are no longer represented in the remote repository.</p>\n\n<p>It would be something like the existing command <code>git remote prune origin</code>, but more like <code>git local prune origin</code>.</p>\n",
    "answer": "<p><code>git remote prune origin</code> prunes tracking branches not on the remote.</p>\n\n<p><code>git branch --merged</code> lists branches that have been merged into the current branch.</p>\n\n<p><code>xargs git branch -d</code> deletes branches listed on standard input.</p>\n\n<p>Be careful deleting branches listed by <code>git branch --merged</code>. The list could include <code>master</code> or other branches you'd prefer not to delete.</p>\n\n<p>To give yourself the opportunity to edit the list before deleting branches, you could do the following in one line:</p>\n\n<pre><code>git branch --merged &gt;/tmp/merged-branches &amp;&amp; \\\n  vi /tmp/merged-branches &amp;&amp; xargs git branch -d &lt;/tmp/merged-branches\n</code></pre>\n"
  },
  {
    "question": "<p>Consider the following scenario:</p>\n\n<p>I have developed a small experimental project A in its own Git repo. It has now matured, and I'd like A to be part of larger project B, which has its own big repository. I'd now like to add A as a subdirectory of B.</p>\n\n<p>How do I merge A into B, without losing history on any side?</p>\n",
    "answer": "<p>A single branch of another repository can be easily placed under a subdirectory retaining its history. For example:</p>\n\n<pre><code>git subtree add --prefix=rails git://github.com/rails/rails.git master\n</code></pre>\n\n<p>This will appear as a single commit where all files of Rails master branch are added into \"rails\" directory.\nHowever the commit's title contains a reference to the old history tree:</p>\n\n<blockquote>\n  <p>Add 'rails/' from commit <code>&lt;rev&gt;</code></p>\n</blockquote>\n\n<p>Where <code>&lt;rev&gt;</code> is a SHA-1 commit hash. You can still see the history, blame some changes.</p>\n\n<pre><code>git log &lt;rev&gt;\ngit blame &lt;rev&gt; -- README.md\n</code></pre>\n\n<p>Note that you can't see the directory prefix from here since this is an actual old branch left intact.\nYou should treat this like a usual file move commit: you will need an extra jump when reaching it.</p>\n\n<pre><code># finishes with all files added at once commit\ngit log rails/README.md\n\n# then continue from original tree\ngit log &lt;rev&gt; -- README.md\n</code></pre>\n\n<p>There are more complex solutions like doing this manually or rewriting the history as described in other answers.</p>\n\n<p>The git-subtree command is a part of official git-contrib, some packet managers install it by default (OS X Homebrew).\nBut you might have to install it by yourself in addition to git.</p>\n"
  },
  {
    "question": "<p>I have a script that works fine in one branch and is broken in another. I want to look at the two versions side-by-side and see what's different. Is there a way to do this?</p>\n<p><strong>To be clear</strong> I'm not looking for a compare tool (I use <a href=\"https://en.wikipedia.org/wiki/Beyond_Compare\" rel=\"noreferrer\">Beyond Compare</a>). I'm looking for a Git diff command that will allow me to compare the master version to my current branch version to see what has changed. I'm not in the middle of a merge or anything. I just want to say something like</p>\n<pre><code>git diff mybranch/myfile.cs master/myfile.cs\n</code></pre>\n",
    "answer": "<p><code>git diff</code> can show you the difference between two commits:</p>\n<pre><code>git diff mybranch master -- myfile.cs\n</code></pre>\n<p>Or, equivalently:</p>\n<pre><code>git diff mybranch..master -- myfile.cs\n</code></pre>\n<p>Note you must specify the relative path to the file. So if the file were in the src directory, you'd say <code>src/myfile.cs</code> instead of <code>myfile.cs</code>.</p>\n<p>Using the latter syntax, if either side is <code>HEAD</code> it may be omitted (e.g., <code>master..</code> compares <code>master</code> to <code>HEAD</code>).</p>\n<p>You may also be interested in <code>mybranch...master</code> (from <a href=\"https://git-scm.com/docs/git-diff\" rel=\"noreferrer\"><code>git diff</code> documentation</a>):</p>\n<blockquote>\n<p>This form is to view the changes on the branch containing and up to the second <code>&lt;commit&gt;</code>, starting at a common ancestor of both <code>&lt;commit&gt;</code>. <code>git diff A...B</code> is equivalent to <code>git diff $(git-merge-base A B) B</code>.</p>\n</blockquote>\n<p>In other words, this will give a diff of changes in <code>master</code> since it diverged from <code>mybranch</code> (but without new changes since then in <code>mybranch</code>).</p>\n<hr />\n<p>In all cases, the <code>--</code> separator before the file name indicates the end of command line flags (mind the space between the separator and the filename). This is optional unless Git will get confused if the argument refers to a commit or a file, but including it is not a bad habit to get into. See <a href=\"https://stackoverflow.com/questions/13321458/meaning-of-git-checkout-double-dashes/13321491#13321491\">Dietrich Epp's answer to <em>Meaning of Git checkout double dashes</em></a> for a few examples.</p>\n<hr />\n<p>The same arguments can be passed to <code>git difftool</code> if you have one configured.</p>\n"
  },
  {
    "question": "<p>How do I iterate over a range of numbers in Bash when the range is given by a variable?</p>\n<p>I know I can do this (called &quot;sequence expression&quot; in the Bash <a href=\"http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion\" rel=\"noreferrer\">documentation</a>):</p>\n<pre><code>for i in {1..5}; do echo $i; done\n</code></pre>\n<p>Which gives:</p>\n<blockquote>\n<p>1 <br/>\n2 <br/>\n3 <br/>\n4 <br/>\n5</p>\n</blockquote>\n<p>Yet, how can I replace either of the range endpoints with a variable? This doesn't work:</p>\n<pre><code>END=5\nfor i in {1..$END}; do echo $i; done\n</code></pre>\n<p>Which prints:</p>\n<blockquote>\n<p>{1..5}</p>\n</blockquote>\n",
    "answer": "<pre><code>for i in $(seq 1 $END); do echo $i; done</code></pre>\n\n<p>edit: I prefer <code>seq</code> over the other methods because I can actually remember it ;)</p>\n"
  },
  {
    "question": "<p>If I make changes to <code>.bashrc</code>, how do I reload it without logging out and back in?</p>\n",
    "answer": "<p>You can enter the long form command:</p>\n<pre><code>source ~/.bashrc\n</code></pre>\n<p>or you can use the shorter version of the command:</p>\n<pre><code>. ~/.bashrc\n</code></pre>\n"
  },
  {
    "question": "<p>How do I recursively <code>grep</code> all directories and subdirectories?</p>\n\n<pre><code>find . | xargs grep \"texthere\" *\n</code></pre>\n",
    "answer": "<pre><code>grep -r \"texthere\" .\n</code></pre>\n\n<p>The first parameter represents the regular expression to search for, while the second one represents the directory that should be searched. In this case, <code>.</code> means the current directory.</p>\n\n<p>Note: This works for GNU grep, and on some platforms like Solaris you must specifically use GNU grep as opposed to legacy implementation.  For Solaris this is the <code>ggrep</code> command.   </p>\n"
  },
  {
    "question": "<p>How can I delete all of my <a href=\"https://en.wikipedia.org/wiki/Git\" rel=\"noreferrer\">Git</a> stashes at once?</p>\n<p>Specifically I mean, with typing in one command.</p>\n",
    "answer": "<p>The following command deletes all your stashes:</p>\n<pre><code>git stash clear\n</code></pre>\n<p>From the <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-stash.html\" rel=\"noreferrer\">git documentation</a>:</p>\n<blockquote>\n<p><strong><code>clear</code></strong></p>\n<p>Remove all the stashed states.</p>\n<p><strong>IMPORTANT WARNING:</strong> Those states will then be subject to pruning, and may be impossible to recover (...).</p>\n</blockquote>\n"
  },
  {
    "question": "<p>In one of my development branches, I made some changes to my codebase. Before I was able to complete the features I was working on, I had to switch my current branch to master to demo some features. But just using a \"git checkout master\" preserved the changes I also made in my development branch, thus breaking some of the functionality in master. So what I did was commit the changes on my development branch with a commit message \"temporary commit\" and then checkout master for the demo.</p>\n\n<p>Now that I'm done with the demo and back to work on my development branch, I would like to remove the \"temporary commit\" that I made while still preserving the changes I made. Is that possible?</p>\n",
    "answer": "<p>It's as simple as this:</p>\n<pre><code>git reset HEAD^\n</code></pre>\n<p>Note: some shells treat <code>^</code> as a special character (for example some Windows shells or <a href=\"http://bewatermyfriend.org/p/2016/002/\" rel=\"noreferrer\">ZSH with globbing enabled</a>), so you may have to quote <code>&quot;HEAD^&quot;</code> or use <code>HEAD~1</code> in those cases.</p>\n<p><code>git reset</code> without a <code>--hard</code> or <code>--soft</code> moves your <code>HEAD</code> to point to the specified commit, without changing any files. <code>HEAD^</code> refers to the (first) parent commit of your current commit, which in your case is the commit before the temporary one.</p>\n<p>Note that another option is to carry on as normal, and then at the next commit point instead run:</p>\n<pre><code>git commit --amend [-m … etc]\n</code></pre>\n<p>which will instead <em>edit</em> the most recent commit, having the same effect as above.</p>\n<p>Note that this (as with nearly every git answer) can cause problems if you've already pushed the bad commit to a place where someone else may have pulled it from. Try to avoid that</p>\n"
  },
  {
    "question": "<p>I was doing some work in my repository and noticed a file had local changes. I didn't want them anymore so I deleted the file, thinking I can just checkout a fresh copy. I wanted to do the Git equivalent of</p>\n\n<pre><code>svn up .\n</code></pre>\n\n<p>Using <code>git pull</code> didn't seem to work. Some random searching led me to a site where someone recommended doing</p>\n\n<pre><code>git checkout HEAD^ src/\n</code></pre>\n\n<p>(<code>src</code> is the directory containing the deleted file).</p>\n\n<p><strong>Now I find out I have a detached head. I have no idea what that is. How can I undo?</strong></p>\n",
    "answer": "<p>Detached head means you are no longer on a branch, you have checked out a single commit in the history (in this case the commit previous to HEAD, i.e. HEAD^).</p>\n<h2>If you want to <em>keep</em> your changes associated with the detached HEAD</h2>\n<ol>\n<li>Run <code>git branch tmp</code> - this will save your changes in a new branch called <code>tmp</code>.</li>\n<li>Run <code>git checkout master</code></li>\n<li>If you would like to incorporate the changes you made into <code>master</code>, run <code>git merge tmp</code> from the <code>master</code> branch. You should be on the <code>master</code> branch after running <code>git checkout master</code>.</li>\n</ol>\n<h2>If you want to <em>delete</em> your changes associated with the detached HEAD</h2>\n<p>You only need to checkout the branch you were on, e.g.</p>\n<pre><code>git checkout master\n</code></pre>\n<p>Next time you have changed a file and want to restore it to the state it is in the index, don't delete the file first, just do</p>\n<pre><code>git checkout -- path/to/foo\n</code></pre>\n<p>This will restore the file foo to the state it is in the index.</p>\n"
  },
  {
    "question": "<p>How do I iterate through each line of a text file with <a href=\"https://en.wikipedia.org/wiki/Bash_(Unix_shell)\" rel=\"noreferrer\">Bash</a>?</p>\n\n<p>With this script:</p>\n\n<pre><code>echo \"Start!\"\nfor p in (peptides.txt)\ndo\n    echo \"${p}\"\ndone\n</code></pre>\n\n<p>I get this output on the screen:</p>\n\n<pre><code>Start!\n./runPep.sh: line 3: syntax error near unexpected token `('\n./runPep.sh: line 3: `for p in (peptides.txt)'\n</code></pre>\n\n<p>(Later I want to do something more complicated with <code>$p</code> than just output to the screen.)</p>\n\n<hr>\n\n<p>The environment variable <strong>SHELL</strong> is (from env):</p>\n\n<pre><code>SHELL=/bin/bash\n</code></pre>\n\n<p><code>/bin/bash --version</code> output:</p>\n\n<pre><code>GNU bash, version 3.1.17(1)-release (x86_64-suse-linux-gnu)\nCopyright (C) 2005 Free Software Foundation, Inc.\n</code></pre>\n\n<p><code>cat /proc/version</code> output:</p>\n\n<pre><code>Linux version 2.6.18.2-34-default (geeko@buildhost) (gcc version 4.1.2 20061115 (prerelease) (SUSE Linux)) #1 SMP Mon Nov 27 11:46:27 UTC 2006\n</code></pre>\n\n<p>The file peptides.txt contains:</p>\n\n<pre><code>RKEKNVQ\nIPKKLLQK\nQYFHQLEKMNVK\nIPKKLLQK\nGDLSTALEVAIDCYEK\nQYFHQLEKMNVKIPENIYR\nRKEKNVQ\nVLAKHGKLQDAIN\nILGFMK\nLEDVALQILL\n</code></pre>\n",
    "answer": "<p>One way to do it is:</p>\n\n<pre><code>while read p; do\n  echo \"$p\"\ndone &lt;peptides.txt\n</code></pre>\n\n<p>As pointed out in the comments, this has the side effects of trimming leading whitespace, interpreting backslash sequences, and skipping the last line if it's missing a terminating linefeed. If these are concerns, you can do:</p>\n\n<pre><code>while IFS=\"\" read -r p || [ -n \"$p\" ]\ndo\n  printf '%s\\n' \"$p\"\ndone &lt; peptides.txt\n</code></pre>\n\n<hr>\n\n<p>Exceptionally, if the <a href=\"https://unix.stackexchange.com/questions/107800/using-while-loop-to-ssh-to-multiple-servers\">loop body may read from standard input</a>, you can open the file using a different file descriptor:</p>\n\n<pre><code>while read -u 10 p; do\n  ...\ndone 10&lt;peptides.txt\n</code></pre>\n\n<p>Here, 10 is just an arbitrary number (different from 0, 1, 2).</p>\n"
  },
  {
    "question": "<p>I have two branches in my Git repository:</p>\n\n<ol>\n<li><code>master</code></li>\n<li><code>seotweaks</code> (created originally from <code>master</code>)</li>\n</ol>\n\n<p>I created <code>seotweaks</code> with the intention of quickly merging it back into <code>master</code>. However, that was three months ago and the code in this branch is 13 versions ahead of <code>master</code>.</p>\n\n<p>It has effectively become our working master branch as all the code in <code>master</code> is more or less obsolete now.</p>\n\n<p>Very bad practice I know, lesson learned.</p>\n\n<p>Do you know how I can replace all of the contents of the <code>master</code> branch with those in <code>seotweaks</code>?</p>\n\n<p>I could just delete everything in <code>master</code> and merge, but this does not feel like best practice.</p>\n",
    "answer": "<p>You should be able to use the “ours” merge strategy to overwrite master with seotweaks like this:</p>\n<pre><code>git checkout master\ngit pull\ngit checkout seotweaks\ngit merge -s ours master\ngit checkout master\ngit merge seotweaks\n</code></pre>\n<p>The first two steps are a useful precaution to ensure your local copy of master is up-to-date. The result should be that your master is now essentially seotweaks.</p>\n<p>(<code>-s ours</code> is short for <code>--strategy=ours</code>)</p>\n<p>From <a href=\"https://git-scm.com/docs/git-merge\" rel=\"noreferrer\">the docs</a> about the 'ours' strategy:</p>\n<blockquote>\n<p>This resolves any number of heads, but the resulting tree of the merge is always that of the current branch head, effectively ignoring all changes from all other branches. It is meant to be used to supersede old development history of side branches. Note that this is different from the -Xours option to the recursive merge strategy.</p>\n</blockquote>\n<p>Update from comments: If you get fatal: <code>refusing to merge unrelated histories</code>, then change the fourth line to this: <code>git merge --allow-unrelated-histories -s ours master</code></p>\n"
  },
  {
    "question": "<p>If I have a file or directory that is a symbolic link and I commit it to a Git repository, what happens to it?</p>\n\n<p>I would assume that it leaves it as a symbolic link until the file is deleted and then if you pull the file back from an old version it just creates a normal file.</p>\n\n<p>What does it do when I delete the file it references? Does it just commit the dangling link?</p>\n",
    "answer": "<p>From <a href=\"https://man7.org/linux/man-pages/man7/symlink.7.html\" rel=\"noreferrer\">linux symlink manual</a> (assuming you are in Linux):</p>\n<blockquote>\n<p>A symbolic link is a special type of file whose contents are a string that is the pathname of another file, the file to which the link refers.  (The contents of a symbolic link can be read using readlink(2).)</p>\n</blockquote>\n<p>So a symbolic link is just another file, no different than a <code>README.md</code> or a <code>Makefile</code>. Git just stores the contents of the link (i.e. the aforementioned path of the file system object that it links to) in a 'blob' just like it would for any other file. It then stores the name, mode and type (including the fact that it is a symlink) in the tree object that represents its containing directory.</p>\n<p>When you checkout a tree containing the link, it restores the object as a symlink regardless of whether the target file system object exists or not.</p>\n<p>If you delete the file that the symlink references it doesn't affect the Git-controlled symlink in any way. You will have a dangling reference. It is up to the user to either remove or change the link to point to something valid if needed.</p>\n"
  },
  {
    "question": "<p>I'm trying to figure out how I can download a particular tag of a Git repository - it's one version behind the current version.</p>\n\n<p>I saw there was a tag for the previous version on the git web page, with object name of something long hex number. </p>\n\n<p>But the version name is \"<code>Tagged release 1.1.5</code>\" according the site.</p>\n\n<p>I tried a command like this (with names changed):</p>\n\n<pre><code>git clone http://git.abc.net/git/abc.git my_abc\n</code></pre>\n\n<p>And I did get something - a directory, a bunch of subdirectories, etc.  </p>\n\n<p>If it's the whole repository, how do I get at the version I'm seeking? If not, how do I download that particular version? </p>\n",
    "answer": "<pre class=\"lang-bash prettyprint-override\"><code>$ git clone\n</code></pre>\n\n<p>will give you the whole repository.</p>\n\n<p>After the clone, you can list the tags with <code>$ git tag -l</code> and then checkout a specific tag:</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ git checkout tags/&lt;tag_name&gt;\n</code></pre>\n\n<p>Even better, checkout and create a branch (otherwise you will be on a branch named after the revision number of tag):</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>$ git checkout tags/&lt;tag_name&gt; -b &lt;branch_name&gt;\n</code></pre>\n"
  },
  {
    "question": "<p>I have my Git repository which, at the root, has two subdirectories:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/finisht\n/static\n</code></pre>\n<p>When this was in <a href=\"http://en.wikipedia.org/wiki/Apache_Subversion\" rel=\"noreferrer\">SVN</a>, <code>/finisht</code> was checked out in one place, while <code>/static</code> was checked out elsewhere, like so:</p>\n<pre class=\"lang-none prettyprint-override\"><code>svn co svn+ssh://admin@domain.example/home/admin/repos/finisht/static static\n</code></pre>\n<p>Is there a way to do this with Git?</p>\n",
    "answer": "<p>As of Git 2.19, this is finally possible, as can be seen in <a href=\"https://stackoverflow.com/a/52269934/2988\">this answer</a>.</p>\n<p>Consider upvoting that answer.</p>\n<p>Note: in Git 2.19, only client-side support is implemented, server-side support is still missing, so it only works when cloning local repositories. Also note that large Git hosters, e.g. GitHub, don't actually use the Git server, they use their own implementation, so even if support shows up in the Git server, it does not automatically mean that it works on Git hosters. (On the other hand, since they don't use the Git server, they could implement it faster in their own implementations before it shows up in Git server.)</p>\n<hr />\n<p>No, that's not possible in Git.</p>\n<p>Implementing something like this in Git would be a substantial effort and it would mean that the integrity of the client-side repository could no longer be guaranteed. If you are interested, search for discussions on &quot;sparse clone&quot; and &quot;sparse fetch&quot; on the Git mailing list.</p>\n<p>In general, the consensus in the Git community is that if you have several directories that are always checked out independently, then these are really two different projects and should live in two different repositories. You can glue them back together using <a href=\"https://book.git-scm.com/book/en/v2/Git-Tools-Submodules\" rel=\"noreferrer\">Git Submodules</a>.</p>\n"
  },
  {
    "question": "<p>I recently switched to synchronizing my repositories to https:// on GitHub (due to firewall issues), and it asks for a password every time.</p>\n\n<p>Is there a way to cache the credentials, instead of authenticating every time that <code>git push</code>?</p>\n",
    "answer": "<p>Since Git 1.7.9 (released 2012), there is a neat mechanism in Git to avoid having to type your password all the time for HTTP / HTTPS, called <a href=\"http://www.kernel.org/pub/software/scm/git/docs/gitcredentials.html\" rel=\"noreferrer\">credential helpers</a>.</p>\n<p>You can just use one of the following credential helpers:</p>\n<pre><code>git config --global credential.helper cache\n</code></pre>\n<p>The <a href=\"https://git-scm.com/docs/git-credential-cache\" rel=\"noreferrer\">credential.helper cache value</a> tells Git to keep your password cached in memory for a particular amount of <strong>minutes</strong>. The default is 15 minutes, you can set a longer timeout with:</p>\n<pre><code># Cache for 1 hour\ngit config --global credential.helper &quot;cache --timeout=3600&quot;\n\n# Cache for 1 day\ngit config --global credential.helper &quot;cache --timeout=86400&quot;\n\n# Cache for 1 week\ngit config --global credential.helper &quot;cache --timeout=604800&quot;\n</code></pre>\n<p>You can also store your credentials permanently if so desired, see the other answers below.</p>\n<p>GitHub's help <a href=\"https://help.github.com/articles/set-up-git#platform-mac\" rel=\"noreferrer\">also suggests</a> that if you're on Mac OS X and used <a href=\"https://en.wikipedia.org/wiki/Homebrew_%28package_management_software%29\" rel=\"noreferrer\">Homebrew</a> to install Git, you can use the native Mac OS X keystore with:</p>\n<pre><code>git config --global credential.helper osxkeychain\n</code></pre>\n<p><strong>For Windows</strong>, there is a helper called <a href=\"https://github.com/Microsoft/Git-Credential-Manager-for-Windows\" rel=\"noreferrer\">Git Credential Manager for Windows</a> or <a href=\"https://stackoverflow.com/questions/11693074/git-credential-cache-is-not-a-git-command\">wincred in msysgit</a>.</p>\n<pre><code>git config --global credential.helper wincred # obsolete\n</code></pre>\n<p>With <a href=\"https://github.com/git-for-windows/git/releases/tag/v2.7.3.windows.1\" rel=\"noreferrer\">Git for Windows 2.7.3+</a> (March 2016):</p>\n<pre><code>git config --global credential.helper manager\n</code></pre>\n<p><strong>For Linux</strong>, you would use (in 2011) <a href=\"https://stackoverflow.com/questions/13385690/how-to-use-git-with-gnome-keyring-integration\"><code>gnome-keyring</code></a>(or other keyring implementation such as KWallet).</p>\n<p>Nowadays (2020), that would be (on Linux)</p>\n<h3>Fedora</h3>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo dnf install git-credential-libsecret\ngit config --global credential.helper /usr/libexec/git-core/git-credential-libsecret\n</code></pre>\n<h3>Ubuntu</h3>\n<pre><code>sudo apt-get install libsecret-1-0 libsecret-1-dev\ncd /usr/share/doc/git/contrib/credential/libsecret\nsudo make\ngit config --global credential.helper /usr/share/doc/git/contrib/credential/libsecret/git-credential-libsecret\n</code></pre>\n"
  },
  {
    "question": "<p>I have a <code>main</code> branch with a file called <code>app.js</code>. I made changes to this file on an <code>experiment</code> branch.</p>\n<p>I want to apply only the changes made to <code>app.js</code> from <code>experiment</code> onto the <code>main</code> branch.</p>\n",
    "answer": "<pre><code>git checkout main                 # first get back to main\ngit checkout experiment -- app.js # then copy the version of app.js \n                                  # from branch &quot;experiment&quot;\n</code></pre>\n<p>See also <em><a href=\"https://stackoverflow.com/q/692246/6309\">Undo working copy modifications of one file in Git</a></em>.</p>\n<hr />\n<h3>Update August 2019, Git 2.23</h3>\n<p>With the new <a href=\"https://stackoverflow.com/a/57066202/6309\"><code>git switch</code></a> and <a href=\"https://stackoverflow.com/a/57066072/6309\"><code>git restore</code></a> commands, that would be:</p>\n<pre><code>git switch main\ngit restore --source experiment -- app.js\n</code></pre>\n<p>By default, only the working tree is restored.<br />\nIf you want to update the index as well (meaning restore the file content, <em>and</em> add it to the index in one command):</p>\n<pre><code>git restore --source experiment --staged --worktree -- app.js\n# shorter:\ngit restore -s experiment -SW -- app.js\n</code></pre>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/users/46058/jakub-narebski\">Jakub Narębski</a> mentions in the comments:</p>\n<pre><code>git show experiment:path/to/app.js &gt; path/to/app.js\n</code></pre>\n<p>works too, except that, as detailed in the SO question &quot;<a href=\"https://stackoverflow.com/questions/610208/how-to-retrieve-a-single-file-from-specific-revision-in-git/610315#610315\">How to retrieve a single file from specific revision in Git?</a>&quot;, you need to use the full path from the root directory of the repo.<br />\nHence the path/to/app.js used by Jakub in his example.</p>\n<p>As <a href=\"https://stackoverflow.com/users/7476/frosty\">Frosty</a> mentions in the comment:</p>\n<blockquote>\n<p>you will only get the most recent state of app.js</p>\n</blockquote>\n<p>But, for <code>git checkout</code> or <code>git show</code>, you can actually reference any revision you want, as illustrated in the SO question &quot;<a href=\"https://stackoverflow.com/questions/1507300/git-checkout-revision-of-a-file-in-git-gui/1507678#1507678\">git checkout revision of a file in git gui</a>&quot;:</p>\n<pre><code>$ git show $REVISION:$FILENAME\n$ git checkout $REVISION -- $FILENAME\n</code></pre>\n<p>would be the same is $FILENAME is a <strong>full path</strong> of a versioned file.</p>\n<p><code>$REVISION</code> can be as shown in <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html\" rel=\"noreferrer\"><code>git rev-parse</code></a>:</p>\n<pre><code>experiment@{yesterday}:app.js # app.js as it was yesterday \nexperiment^:app.js            # app.js on the first commit parent\nexperiment@{2}:app.js         # app.js two commits ago\n</code></pre>\n<p>and so on.</p>\n<p><a href=\"https://stackoverflow.com/users/430418/schmijos\">schmijos</a> adds <a href=\"https://stackoverflow.com/questions/2364147/how-to-get-just-one-file-from-another-branch/2364223#comment93480592_2364223\">in the comments</a>:</p>\n<blockquote>\n<p>you also can do this from a stash:</p>\n<pre><code>git checkout stash -- app.js\n</code></pre>\n<p>This is very useful if you're working on two branches and don't want to commit.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>How do I resolve a git merge conflict in favor of pulled changes?</p>\n<p>I want to remove all conflicting changes from a working tree without having to go through all of the conflicts with <code>git mergetool</code>, while keeping all conflict-free changes. Preferably, I want to do this while pulling, not afterwards.</p>\n",
    "answer": "<p>If you're already in conflicted state, and do not want to checkout path one by one. You may try</p>\n\n<pre><code>git merge --abort\ngit pull -X theirs\n</code></pre>\n"
  },
  {
    "question": "<p>I have a repository in Git. I made a branch, then did some changes both to the master and to the branch.</p>\n\n<p>Then, tens of commits later, I realized the branch is in much better state than the master, so I want the branch to \"become\" the master and disregard the changes on master.</p>\n\n<p>I cannot merge it, because I don't want to keep the changes on master. What should I do?</p>\n\n<p><em>Extra</em>: In this case, the 'old' master has already been <code>push</code>-ed to another repository such as GitHub. How does this change things?</p>\n",
    "answer": "<p>The problem with the other two answers is that the new master doesn't have the old master as an ancestor, so when you push it, everyone else will get messed up. This is what you want to do:</p>\n<pre><code>git checkout better_branch          # This is the branch whose commits you want to keep\ngit merge --strategy=ours master    # keep the content of this branch, but record a merge\ngit checkout master                 # You want to **lose** all changes on this branch\ngit merge better_branch             # fast-forward master up to the merge\n</code></pre>\n<p>In older versions of <code>git</code>, if you want your history to be a little clearer, I'd recommend adding some information to the merge commit message to make it clear what you've done. Change the second line to:</p>\n<pre><code>git merge --strategy=ours --no-commit master\ngit commit          # add information to the template merge message\n</code></pre>\n<p>In newer versions of git, <code>git</code> will automatically open the git message editor for you. (Or you can use <code>git mere --strategy=ours master -m &quot;Keeping better_branch&quot;</code>)</p>\n"
  },
  {
    "question": "<p>After the last commit, I modified a bunch of files in my working copy, but I want to undo the changes to one of those files, as in reset it to the same state as the most recent commit.</p>\n\n<p>However, I only want to undo the working copy changes of just that one file alone, nothing else with it.</p>\n\n<p>How do I do that?</p>\n",
    "answer": "<p>You can use</p>\n<pre><code>git checkout -- file\n</code></pre>\n<p>You can do it without the <code>--</code> (as suggested by nimrodm), but if the filename looks like a branch or tag (or other revision identifier), it may get confused, so using <code>--</code> is best.</p>\n<p>You can also check out a particular version of a file:</p>\n<pre><code>git checkout v1.2.3 -- file         # tag v1.2.3\ngit checkout stable -- file         # stable branch\ngit checkout origin/master -- file  # upstream master\ngit checkout HEAD -- file           # the version from the most recent commit\ngit checkout HEAD^ -- file          # the version before the most recent commit\n</code></pre>\n<p>More details included based on comments</p>\n<p>First check the the commits of the file</p>\n<pre><code>git log -- &lt;filename&gt;\n</code></pre>\n<p>Then you can run this</p>\n<pre><code>git checkout &lt;sha-reference&gt; -- filename\n</code></pre>\n<p>where the sha-reference is a reference to the sha of a commit, in any form (branch, tag, parent, etc.</p>\n"
  },
  {
    "question": "<p>I have cloned a project that includes some <code>.csproj</code> files. I don't need/like my local <code>csproj</code> files being tracked by Git (or being brought up when creating a patch), but clearly they are needed in the project.</p>\n\n<p>I have added <code>*.csproj</code> to my LOCAL <code>.gitignore</code>, but the files are already in the repo.</p>\n\n<p>When I type git status, it shows my changes to <code>csproj</code> which I am not interested in keeping track of or submitting for patches.</p>\n\n<p>How do I remove the \"tracking of\" these files from my personal repo (but keep them in the source so I can use them) so that I don't see the changes when I do a status (or create a patch)?</p>\n\n<p>Is there a correct/canonical way to handle this situation?</p>\n",
    "answer": "<p>Just calling <code>git rm --cached</code> on each of the files you want to remove from revision control should be fine. As long as your local ignore patterns are correct you won't see these files included in the output of git status.</p>\n\n<p>Note that this solution removes the files from the repository, so all developers would need to maintain their own local (non-revision controlled) copies of the file</p>\n\n<p>To prevent git from detecting changes in these files you should also use this command:</p>\n\n<pre><code>git update-index --assume-unchanged [path]\n</code></pre>\n\n<p><strong>What you probably want to do:</strong> (from below <a href=\"https://stackoverflow.com/a/40272289/716435\">@Ryan Taylor answer</a>)</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>This is to tell git you want your own independent version of the file or folder. For instance, you don't want to overwrite (or delete)\n  production/staging config files.</li>\n  </ol>\n  \n  <p><code>git update-index --skip-worktree &lt;path-name&gt;</code></p>\n</blockquote>\n\n<p>The full answer is here in this URL: <a href=\"http://source.kohlerville.com/2009/02/untrack-files-in-git/\" rel=\"noreferrer\">http://source.kohlerville.com/2009/02/untrack-files-in-git/</a></p>\n"
  },
  {
    "question": "<p>We've got a PHP application and want to count all the lines of code under a specific directory and its subdirectories.</p>\n<p>We don't need to ignore comments, as we're just trying to get a rough idea.</p>\n<pre><code>wc -l *.php \n</code></pre>\n<p>That command works great for a given directory, but it ignores subdirectories. I was thinking the following comment might work, but it is returning 74, which is definitely not the case...</p>\n<pre><code>find . -name '*.php' | wc -l\n</code></pre>\n<p>What's the correct syntax to feed in all the files from a directory resursively?</p>\n",
    "answer": "<p><strong>Try:</strong></p>\n<pre><code>find . -name '*.php' | xargs wc -l\n</code></pre>\n<p>or (when file names include special characters such as spaces)</p>\n<pre><code>find . -name '*.php' | sed 's/.*/&quot;&amp;&quot;/' | xargs  wc -l\n</code></pre>\n<p><strong><a href=\"https://dwheeler.com/sloccount/\" rel=\"noreferrer\">The SLOCCount tool</a></strong> may help as well.</p>\n<p>It will give an accurate source lines of code count for whatever\nhierarchy you point it at, as well as some additional stats.</p>\n<p><strong>Sorted output:</strong></p>\n<p><code>find . -name '*.php' | xargs wc -l | sort -nr</code></p>\n"
  },
  {
    "question": "<p>I want to get a list of all the branches in a Git repository with the \"freshest\" branches at the top, where the \"freshest\" branch is the one that's been committed to most recently (and is, therefore, more likely to be one I want to pay attention to).</p>\n\n<p>Is there a way I can use Git to either (a) sort the list of branches by latest commit, or (b) get a list of branches together with each one's last-commit date, in some kind of machine-readable format?</p>\n\n<p>Worst case, I could always run <code>git branch</code> to get a list of all the branches, parse its output, and then <code>git log -n 1 branchname --format=format:%ci</code> for each one, to get each branch's commit date. But this will run on a Windows box, where spinning up a new process is relatively expensive, so launching the Git executable once per branch could get slow if there are a lot of branches. Is there a way to do all this with a single command?</p>\n",
    "answer": "<p>Use the <strong><code>--sort=-committerdate</code></strong> option of <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-for-each-ref.html\" rel=\"noreferrer\"><code>git for-each-ref</code></a>;</p>\n<p>Also available <a href=\"https://git-blame.blogspot.com/\" rel=\"noreferrer\">since Git 2.7.0</a> for <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-branch.html\" rel=\"noreferrer\"><code>git branch</code></a>:</p>\n<h1>Basic Usage:</h1>\n<pre class=\"lang-shell prettyprint-override\"><code>git for-each-ref --sort=-committerdate refs/heads/\n\n# Or using git branch (since version 2.7.0)\ngit branch --sort=-committerdate  # DESC\ngit branch --sort=committerdate  # ASC\n</code></pre>\n<h3>Result:</h3>\n<p><img src=\"https://i.sstatic.net/37MSD.png\" alt=\"Result\" /></p>\n<h1>Advanced Usage:</h1>\n<pre class=\"lang-shell prettyprint-override\"><code>git for-each-ref --sort=committerdate refs/heads/ --format='%(HEAD) %(align:35)%(color:yellow)%(refname:short)%(color:reset)%(end) - %(color:red)%(objectname:short)%(color:reset) - %(align:40)%(contents:subject)%(end) - %(authorname) (%(color:green)%(committerdate:relative)%(color:reset))'\n</code></pre>\n<h3>Result:</h3>\n<p><a href=\"https://i.sstatic.net/Jf1eLyH2.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/Jf1eLyH2.png\" alt=\"Result\" /></a></p>\n<h1>Pro Usage (Unix):</h1>\n<p>You can put the following snippet in your <code>~/.gitconfig</code>. The recentb alias accepts two arguments:</p>\n<ul>\n<li><code>refbranch</code>: which branch the <em>ahead</em> and <em>behind</em> columns are calculated against. Default <em>master</em></li>\n<li><code>count</code>: how many recent branches to show. Default <em>20</em></li>\n</ul>\n<pre class=\"lang-shell prettyprint-override\"><code>[alias]\n    # ATTENTION: All aliases prefixed with ! run in /bin/sh make sure you use sh syntax, not bash/zsh or whatever\n    recentb = &quot;!r() { refbranch=$1 count=$2; git for-each-ref --sort=-committerdate refs/heads --format='%(refname:short)|%(HEAD)%(color:yellow)%(refname:short)|%(color:bold green)%(committerdate:relative)|%(color:blue)%(subject)|%(color:magenta)%(authorname)%(color:reset)' --color=always --count=${count:-20} | while read line; do branch=$(echo \\&quot;$line\\&quot; | awk 'BEGIN { FS = \\&quot;|\\&quot; }; { print $1 }' | tr -d '*'); ahead=$(git rev-list --count \\&quot;${refbranch:-origin/master}..${branch}\\&quot;); behind=$(git rev-list --count \\&quot;${branch}..${refbranch:-origin/master}\\&quot;); colorline=$(echo \\&quot;$line\\&quot; | sed 's/^[^|]*|//'); echo \\&quot;$ahead|$behind|$colorline\\&quot; | awk -F'|' -vOFS='|' '{$5=substr($5,1,70)}1' ; done | ( echo \\&quot;ahead|behind|branch|lastcommit|message|author\\n\\&quot; &amp;&amp; cat) | column -ts'|';}; r&quot;\n</code></pre>\n<h3>Result:</h3>\n<p><a href=\"https://i.sstatic.net/Q8Buq.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/Q8Buq.png\" alt=\"Recentb alias result\" /></a></p>\n"
  },
  {
    "question": "<p>To redirect <a href=\"https://en.wikipedia.org/wiki/Standard_streams#Standard_output_.28stdout.29\" rel=\"noreferrer\">standard output</a> to a truncated file in Bash, I know to use:</p>\n<pre><code>cmd &gt; file.txt\n</code></pre>\n<p>To redirect standard output in Bash, appending to a file, I know to use:</p>\n<pre><code>cmd &gt;&gt; file.txt\n</code></pre>\n<p>To redirect both standard output and <a href=\"https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr)\" rel=\"noreferrer\">standard error</a> to a truncated file, I know to use:</p>\n<pre><code>cmd &amp;&gt; file.txt\n</code></pre>\n<p>How do I redirect both standard output and standard error appending to a file? <code>cmd &amp;&gt;&gt; file.txt</code> did not work for me.</p>\n",
    "answer": "<pre><code>cmd &gt;&gt;file.txt 2&gt;&amp;1\n</code></pre>\n\n<p>Bash executes the redirects from left to right as follows:</p>\n\n<ol>\n<li><code>&gt;&gt;file.txt</code>: Open <code>file.txt</code> in append mode and redirect <code>stdout</code> there.</li>\n<li><code>2&gt;&amp;1</code>: Redirect <code>stderr</code> to <em>\"where <code>stdout</code> is currently going\"</em>. In this case, that is a file opened in append mode. In other words, the <code>&amp;1</code> reuses the file descriptor which <code>stdout</code> currently uses.</li>\n</ol>\n"
  },
  {
    "question": "<p>I create a new branch in Git:</p>\n\n<pre><code>git branch my_branch\n</code></pre>\n\n<p>Push it:</p>\n\n<pre><code>git push origin my_branch\n</code></pre>\n\n<p>Now say someone made some changes on the server and I want to pull from <code>origin/my_branch</code>. I do:</p>\n\n<pre><code>git pull\n</code></pre>\n\n<p>But I get:</p>\n\n<pre><code>You asked me to pull without telling me which branch you\nwant to merge with, and 'branch.my_branch.merge' in\nyour configuration file does not tell me, either. Please\nspecify which branch you want to use on the command line and\ntry again (e.g. 'git pull &lt;repository&gt; &lt;refspec&gt;').\nSee git-pull(1) for details.\n\nIf you often merge with the same branch, you may want to\nuse something like the following in your configuration file:\n\n    [branch \"my_branch\"]\n    remote = &lt;nickname&gt;\n    merge = &lt;remote-ref&gt;\n\n    [remote \"&lt;nickname&gt;\"]\n    url = &lt;url&gt;\n    fetch = &lt;refspec&gt;\n\nSee git-config(1) for details.\n</code></pre>\n\n<p>I learned that I can make it work with:</p>\n\n<pre><code>git branch --set-upstream my_branch origin/my_branch\n</code></pre>\n\n<p>But why do I need to do this for every branch I create? Isn't it obvious that if I push <code>my_branch</code> into <code>origin/my_branch</code>, then I would want to pull <code>origin/my_branch</code> into <code>my_branch</code>? How can I make this the default behavior?</p>\n",
    "answer": "<h3>Git v2.37.1 and above</h3>\n<p>If you are using the mentioned version or above you can use this new config entry to automatically setup remote tracking:</p>\n<p><code>git config --global push.autoSetupRemote true</code></p>\n<p>After that, when you do <code>git push</code> tracking is setup automatically. No need for <code>git push -u origin my_branch</code></p>\n<hr />\n<p>A shortcut, which doesn't depend on remembering the syntax for <code>git branch --set-upstream</code> <sup>1</sup> is to do:</p>\n<pre><code>git push -u origin my_branch\n</code></pre>\n<p>... the first time that you push that branch. Or, to push to the current branch from a branch of the same name (handy for an alias):</p>\n<pre><code>git push -u origin HEAD\n</code></pre>\n<p>You only need to use <code>-u</code> once, and that sets up the association between your branch and the one at <code>origin</code> in the same way as <code>git branch --set-upstream</code> does.</p>\n<p>Personally, I think it's a good thing to have to set up that association between your branch and one on the remote explicitly.  It's just a shame that the rules are <a href=\"http://longair.net/blog/2011/02/27/an-asymmetry-between-git-pull-and-git-push/\" rel=\"noreferrer\">different for <code>git push</code> and <code>git pull</code></a>.</p>\n<hr />\n<p><sup>1</sup> It may sound silly, but I very frequently forget to specify the current branch, assuming that's the default - it's not, and the results are most confusing.</p>\n<p><em>Update 2012-10-11</em>: Apparently I'm not the only person who found it easy to get wrong! Thanks to <a href=\"https://stackoverflow.com/users/6309/vonc\">VonC</a> for pointing out that git 1.8.0 introduces the more obvious <code>git branch --set-upstream-to</code>, which can be used as follows, if you're on the branch <code>my_branch</code>:</p>\n<pre><code>git branch --set-upstream-to origin/my_branch\n</code></pre>\n<p>... or with the short option:</p>\n<pre><code>git branch -u origin/my_branch\n</code></pre>\n<p>This change, and its reasoning, is described in <a href=\"https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.0.adoc#updates-since-v1712\" rel=\"noreferrer\">the release notes for git 1.8.0, release candidate 1</a>:</p>\n<blockquote>\n<p>It was tempting to say <code>git branch --set-upstream origin/master</code>, but that tells Git to arrange the local branch <code>origin/master</code> to integrate with the currently checked out branch, which is highly unlikely to be what the user meant. The option is deprecated; use the new <code>--set-upstream-to</code> (with a short-and-sweet <code>-u</code>) option instead.</p>\n</blockquote>\n"
  },
  {
    "question": "<p>How do I undo this command?</p>\n<pre><code>git reset HEAD~\n</code></pre>\n",
    "answer": "<h3>Short answer:</h3>\n<pre class=\"lang-bash prettyprint-override\"><code>git reset 'HEAD@{1}'\n</code></pre>\n<h3>Long answer:</h3>\n<p>Git keeps a log of all ref updates (e.g., checkout, reset, commit, merge). You can view it by typing:</p>\n<pre><code>git reflog\n</code></pre>\n<p>Somewhere in this list is the commit that you lost. Let's say you just typed <code>git reset HEAD~</code> and want to undo it. My reflog looks like this:</p>\n<pre><code>$ git reflog\n3f6db14 HEAD@{0}: HEAD~: updating HEAD\nd27924e HEAD@{1}: checkout: moving from d27924e0fe16776f0d0f1ee2933a0334a4787b4c\n[...]\n</code></pre>\n<p>The first line says that <code>HEAD</code> 0 positions ago (in other words, the current position) is 3f6db14; it was obtained by resetting to <code>HEAD~</code>. The second line says that <code>HEAD</code> 1 position ago (in other words, the state before the reset) is d27924e. It was obtained by checking out a particular commit (though that's not important right now). So, to undo the reset, run <code>git reset HEAD@{1}</code> (or <code>git reset d27924e</code>).</p>\n<p>If, on the other hand, you've run some other commands since then that update HEAD, the commit you want won't be at the top of the list, and you'll need to search through the <code>reflog</code>.</p>\n<p>One final note: It may be easier to look at the <code>reflog</code> for the specific branch you want to un-reset, say master, rather than <code>HEAD</code>:</p>\n<pre><code>$ git reflog show master\nc24138b master@{0}: merge origin/master: Fast-forward\n90a2bf9 master@{1}: merge origin/master: Fast-forward\n[...]\n</code></pre>\n<p>This should have less noise it in than the general <code>HEAD reflog</code>.</p>\n"
  },
  {
    "question": "<p>I need to check the existence of an input argument. I have the following script</p>\n\n<pre><code>if [ \"$1\" -gt \"-1\" ]\n  then echo hi\nfi\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>[: : integer expression expected\n</code></pre>\n\n<p>How do I check the input argument1 first to see if it exists?</p>\n",
    "answer": "<p>It is:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>if [ $# -eq 0 ]\n  then\n    echo &quot;No arguments supplied&quot;\nfi\n</code></pre>\n<p>The <code>$#</code> variable will tell you the number of input arguments the script was passed.</p>\n<p>Or you can check if an argument is an empty string or not like:</p>\n<pre><code>if [ -z &quot;$1&quot; ]\n  then\n    echo &quot;No argument supplied&quot;\nfi\n</code></pre>\n<p>The <code>-z</code> switch will test if the expansion of <code>&quot;$1&quot;</code> is a null string or not. If it is a null string then the body is executed.</p>\n"
  },
  {
    "question": "<p>I accidentally amended my previous commit. The commit should have been separate to keep history of the changes I made to a particular file.</p>\n\n<p>Is there a way to undo that last commit? If I do something like <code>git reset --hard HEAD^</code>, the first commit also is undone.</p>\n\n<p>(I have not yet pushed to any remote directories)</p>\n",
    "answer": "<p>What you need to do is to create a new commit with the same details as the current <code>HEAD</code> commit, but with the parent as the previous version of <code>HEAD</code>. <code>git reset --soft</code> will move the branch pointer so that the next commit happens on top of a different commit from where the current branch head is now.</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code># Move the current head so that it's pointing at the old commit\n# Leave the index intact for redoing the commit.\n# HEAD@{1} gives you &quot;the commit that HEAD pointed at before \n# it was moved to where it currently points at&quot;. Note that this is\n# different from HEAD~1, which gives you &quot;the commit that is the\n# parent node of the commit that HEAD is currently pointing to.&quot;\ngit reset --soft HEAD@{1}\n\n# commit the current tree using the commit details of the previous\n# HEAD commit. (Note that HEAD@{1} is pointing somewhere different from the\n# previous command. It's now pointing at the erroneously amended commit.)\n# The -C option takes the given commit and reuses the log message and\n# authorship information.\ngit commit -C HEAD@{1}\n</code></pre>\n"
  },
  {
    "question": "<p>I have a Git repository which contains a number of subdirectories. Now I have found that one of the subdirectories is unrelated to the other and should be detached to a separate repository.</p>\n<p>How can I do this while keeping the history of the files within the subdirectory?</p>\n<p>I guess I could make a clone and remove the unwanted parts of each clone, but I suppose this would give me the complete tree when checking out an older revision etc. This might be acceptable, but I would prefer to be able to pretend that the two repositories doesn't have a shared history.</p>\n<p>Just to make it clear, I have the following structure:</p>\n<pre><code>XYZ/\n    .git/\n    XY1/\n    ABC/\n    XY2/\n</code></pre>\n<p>But I would like this instead:</p>\n<pre><code>XYZ/\n    .git/\n    XY1/\n    XY2/\nABC/\n    .git/\n    ABC/\n</code></pre>\n",
    "answer": "<p><strong>Update</strong>: This process is so common, that the git team made it much simpler with a new tool, <code>git subtree</code>. See here: <a href=\"https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository/17864475#17864475\">Detach (move) subdirectory into separate Git repository</a></p>\n\n<hr>\n\n<p>You want to clone your repository and then use <code>git filter-branch</code> to mark everything but the subdirectory you want in your new repo to be garbage-collected.</p>\n\n<ol>\n<li><p>To clone your local repository:</p>\n\n<pre><code>git clone /XYZ /ABC\n</code></pre>\n\n<p>(Note: the repository will be cloned using hard-links, but that is not a problem since the hard-linked files will not be modified in themselves - new ones will be created.)</p></li>\n<li><p>Now, let us preserve the interesting branches which we want to rewrite as well, and then remove the origin to avoid pushing there and to make sure that old commits will not be referenced by the origin:</p>\n\n<pre><code>cd /ABC\nfor i in branch1 br2 br3; do git branch -t $i origin/$i; done\ngit remote rm origin\n</code></pre>\n\n<p>or for all remote branches:</p>\n\n<pre><code>cd /ABC\nfor i in $(git branch -r | sed \"s/.*origin\\///\"); do git branch -t $i origin/$i; done\ngit remote rm origin\n</code></pre></li>\n<li><p>Now you might want to also remove tags which have no relation with the subproject; you can also do that later, but you might need to prune your repo again. I did not do so and got a <code>WARNING: Ref 'refs/tags/v0.1' is unchanged</code> for all tags (since they were all unrelated to the subproject); additionally, after removing such tags more space will be reclaimed. Apparently <code>git filter-branch</code> should be able to rewrite other tags, but I could not verify this. If you want to remove all tags, use <code>git tag -l | xargs git tag -d</code>.</p></li>\n<li><p>Then use filter-branch and reset to exclude the other files, so they can be pruned. Let's also add <code>--tag-name-filter cat --prune-empty</code> to remove empty commits and to rewrite tags (note that this will have to strip their signature):</p>\n\n<pre><code>git filter-branch --tag-name-filter cat --prune-empty --subdirectory-filter ABC -- --all\n</code></pre>\n\n<p>or alternatively, to only rewrite the HEAD branch and ignore tags and other branches:</p>\n\n<pre><code>git filter-branch --tag-name-filter cat --prune-empty --subdirectory-filter ABC HEAD\n</code></pre></li>\n<li><p>Then delete the backup reflogs so the space can be truly reclaimed (although now the operation is destructive)</p>\n\n<pre><code>git reset --hard\ngit for-each-ref --format=\"%(refname)\" refs/original/ | xargs -n 1 git update-ref -d\ngit reflog expire --expire=now --all\ngit gc --aggressive --prune=now\n</code></pre>\n\n<p>and now you have a local git repository of the ABC sub-directory with all its history preserved. </p></li>\n</ol>\n\n<p>Note: For most uses, <code>git filter-branch</code> should indeed have the added parameter <code>-- --all</code>. Yes that's really <kbd>-</kbd><kbd>-</kbd><kbd>space</kbd><kbd>-</kbd><kbd>-</kbd> <code>all</code>.  This needs to be the last parameters for the command. As Matli discovered, this keeps the project branches and tags included in the new repo.</p>\n\n<p>Edit: various suggestions from comments below were incorporated to make sure, for instance, that the repository is actually shrunk (which was not always the case before).</p>\n"
  },
  {
    "question": "<p>Once upon a time, there was a file in my project that I would now like to be able to get.</p>\n\n<p>The problem is: I have no idea of when have I deleted it and on which path it was.</p>\n\n<p>How can I locate the commits of this file when it existed?</p>\n",
    "answer": "<p>If you do not know the exact path you may use</p>\n\n<pre><code>git log --all --full-history -- \"**/thefile.*\"\n</code></pre>\n\n<p>If you know the path the file was at, you can do this:</p>\n\n<pre><code>git log --all --full-history -- &lt;path-to-file&gt;\n</code></pre>\n\n<p>This should show a list of commits in all branches which touched that file. Then, you can find the version of the file you want, and display it with...</p>\n\n<pre><code>git show &lt;SHA&gt; -- &lt;path-to-file&gt;\n</code></pre>\n\n<p>Or restore it into your working copy with:</p>\n\n<p><code>git checkout &lt;SHA&gt;^ -- &lt;path-to-file&gt;</code></p>\n\n<p>Note the caret symbol (<code>^</code>), which gets the checkout <em>prior</em> to the one identified, because at the moment of <code>&lt;SHA&gt;</code> commit the file is deleted, we need to look at the previous commit to get the deleted file's contents</p>\n"
  },
  {
    "question": "<p>I have deleted a file or some code in a file sometime in the past. Can I search through the content (not just the commit messages)?</p>\n<p>A very poor solution is to grep the log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>git log -p | grep &lt;pattern&gt;\n</code></pre>\n<p>However, this doesn't return the commit hash straight away. I played around with <code>git grep</code> to no avail.</p>\n",
    "answer": "<p>You should use the <a href=\"https://git-scm.com/docs/git-log#Documentation/git-log.txt--Sltstringgt\" rel=\"noreferrer\">pickaxe (<code>-S</code>)</a> option of <a href=\"http://git-scm.com/docs/git-log\" rel=\"noreferrer\"><code>git log</code></a>.</p>\n<p>To search for <code>Foo</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>git log -SFoo -- path_containing_change\ngit log -SFoo --since=2009.1.1 --until=2010.1.1 -- path_containing_change\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/questions/2839253/git-history-find-lost-line-by-keyword/2839319#2839319\">Git history - find lost line by keyword</a> for more.</p>\n<p><code>-S</code> (named <code>pickaxe</code>) comes originally from a <a href=\"https://github.com/git/git/commit/52e9578985fb636ec1d3f6cf794fdadd5ec896fc\" rel=\"noreferrer\"><code>git diff</code> option</a> (Git v0.99, May 2005).\nThen <code>-S</code> (<code>pickaxe</code>) was <a href=\"https://github.com/git/git/commit/582af688157607f05447cefce8d91b26eeaee39d\" rel=\"noreferrer\">ported to <code>git log</code></a> in May 2006 with Git 1.4.0-rc1.</p>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/users/46058/jakub-narebski\">Jakub Narębski</a> commented:</p>\n<ul>\n<li><p>this <strong>looks for differences that introduce or remove an instance of <code>&lt;string&gt;</code></strong>.\nIt usually means &quot;revisions where you added or removed line with 'Foo'&quot;.</p>\n</li>\n<li><p>the <code>--pickaxe-regex</code> option allows you to use extended POSIX regex instead of searching for a string.\nExample (from <a href=\"https://git-scm.com/docs/git-log#Documentation/git-log.txt--Gltregexgt\" rel=\"noreferrer\"><code>git log</code></a>): <code>git log -S&quot;frotz\\(nitfol&quot; --pickaxe-regex</code></p>\n</li>\n</ul>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/users/601626/rob\">Rob</a> commented, this search is case-sensitive - he opened a <a href=\"https://stackoverflow.com/questions/25384842/case-insensitive-git-pickaxe-search\">follow-up question</a> on how to search case-insensitive.</p>\n<hr />\n<p><a href=\"https://stackoverflow.com/users/2388257/hi-angel\">Hi Angel</a> notes in <a href=\"https://stackoverflow.com/questions/2928584/how-to-grep-search-committed-code-in-the-git-history/2928721#comment131608633_2928721\">the comments</a>:</p>\n<blockquote>\n<p>Executing a <code>git log -G&lt;regexp&gt; --branches --all</code> (the <code>-G</code> is same as <code>-S</code> but for regexes) does same thing as the <a href=\"https://stackoverflow.com/a/2929502/6309\">accepted one</a> (<code>git grep &lt;regexp&gt; $(git rev-list --all)</code>), but it soooo much faster!</p>\n<p>The accepted answer was still searching for text after ≈10 minutes of me running it, whereas this one gives results after ≈4 seconds 🤷‍♂️.\nThe output here is more useful as well</p>\n</blockquote>\n"
  },
  {
    "question": "<p>I have a remote Git server, here is the scenario which I want to perform:</p>\n\n<ul>\n<li><p>For each bug/feature I create a different Git branch</p></li>\n<li><p>I keep on committing my code in that Git branch with un-official Git messages</p></li>\n<li><p>In top repository we have to do one commit for one bug with official Git message</p></li>\n</ul>\n\n<p>So how can I merge my branch to remote branch so that they get just one commit for all my check-ins (I even want to provide commit message for this)?</p>\n",
    "answer": "<p>Say your bug fix branch is called <code>bugfix</code> and you want to merge it into <code>master</code>:</p>\n<pre><code>git checkout master\ngit merge --squash bugfix\ngit commit\n</code></pre>\n<p>This will take all the commits from the <code>bugfix</code> branch, squash them into 1 commit, and merge it with your <code>master</code> branch.</p>\n<hr />\n<p><strong>Explanation</strong>:</p>\n<pre><code>git checkout master\n</code></pre>\n<p>Switches to your <code>master</code> branch.</p>\n<pre><code>git merge --squash bugfix\n</code></pre>\n<p>Takes all commits from the <code>bugfix</code> branch and groups it for a 1 commit with your current branch.<br />\n<em>(no merge commit appears; you could resolve conflicts manually before following commit)</em></p>\n<pre><code>git commit\n</code></pre>\n<p>Creates a single commit from the merged changes.</p>\n<p>Omitting the <code>-m</code> parameter lets you modify a draft commit message containing every message from your squashed commits before finalizing your commit.</p>\n"
  },
  {
    "question": "<p>How can I see the changes un-stashing will make to the current working tree? I would like to know what changes will be made before applying them!</p>\n",
    "answer": "<p>See the most recent stash:</p>\n\n<pre><code>git stash show -p\n</code></pre>\n\n<p>See an arbitrary stash:</p>\n\n<pre><code>git stash show -p stash@{1}\n</code></pre>\n\n<p>From the <code>git stash</code> manpages:</p>\n\n<blockquote>\n  <p>By default, the command shows the diffstat, but it will accept any\n  format known to git diff (e.g., git stash show -p stash@{1} to view\n  the second most recent stash in patch form).</p>\n</blockquote>\n"
  },
  {
    "question": "<p>I cloned a Git repository from my GitHub account to my PC.</p>\n\n<p>I want to work with both my PC and laptop, but with one GitHub account.</p>\n\n<p>When I try to push to or pull from GitHub using my PC, it requires a username and password, but not when I'm using the laptop!</p>\n\n<p>I don't want to type my username and password every time I interact with <code>origin</code>. What am I missing here?</p>\n",
    "answer": "<p>A common cause is cloning using the default (HTTPS) instead of SSH. You can correct this by going to your repository, clicking &quot;Clone or download&quot;, then clicking the &quot;Use SSH&quot; button above the URL field and updating the URL of your origin remote like this:</p>\n<pre><code>git remote set-url origin git@github.com:username/repo.git\n</code></pre>\n<p>You can check if you have added the remote as HTTPS or SSH using:</p>\n<pre><code>git remote -v\n</code></pre>\n<p>This is documented at GitHub: <a href=\"https://help.github.com/articles/changing-a-remote-s-url/#switching-remote-urls-from-https-to-ssh\" rel=\"noreferrer\">Switching remote URLs from HTTPS to SSH</a>.</p>\n"
  },
  {
    "question": "<p>I've set up a remote non-bare \"main\" repo and cloned it to my computer. I made some local changes, updated my local repository, and pushed the changes back to my remote repo. Things were fine up to that point.</p>\n\n<p>Now, I had to change something in the remote repo. Then I changed something in my local repo. I realized that the change to the remote repo was not needed. So I tried to <code>git push</code> from my local repo to my remote repo, but I got an error like:</p>\n\n<blockquote>\n  <p>To prevent you from losing history, non-fast-forward updates were\n  rejected Merge the remote changes before pushing again.  See the 'Note\n  about fast-forwards' section of <code>git push --help</code> for details.</p>\n</blockquote>\n\n<p>I thought that probably a</p>\n\n<pre><code>git push --force\n</code></pre>\n\n<p>would force my local copy to push changes to the remote one and make it the same. <strong>It does force the update</strong>, but when I go back to the remote repo and make a commit, I notice that the files contain outdated changes (ones that the main remote repo previously had).</p>\n\n<p>As I mentioned in the <a href=\"https://stackoverflow.com/questions/5509543/how-do-i-properly-force-a-git-push#comment6275726_5509588\">comments to one of the answers</a>:</p>\n\n<blockquote>\n  <p>[I] tried forcing, but when going back to master server to save the changes, i get outdated staging. Thus, when i commit the repositories are not the same. And when i try to use git push again, i get the same error.</p>\n</blockquote>\n\n<p>How can I fix this issue?</p>\n",
    "answer": "<p>Just do:</p>\n\n<pre><code>git push origin &lt;your_branch_name&gt; --force\n</code></pre>\n\n<p>or if you have a specific repo:</p>\n\n<pre><code>git push https://git.... --force\n</code></pre>\n\n<p>This will delete your previous commit(s) and push your current one.</p>\n\n<p>It may not be proper, but if anyone stumbles upon this page, thought they might want a simple solution...</p>\n\n<h3>Short flag</h3>\n\n<p>Also note that <code>-f</code> is short for <code>--force</code>, so</p>\n\n<pre><code>git push origin &lt;your_branch_name&gt; -f\n</code></pre>\n\n<p>will also work.</p>\n"
  },
  {
    "question": "<p>I want to pause input in a shell script, and prompt the user for choices.<br>\nThe standard <code>Yes</code>, <code>No</code>, or <code>Cancel</code> type question.<br>\nHow do I accomplish this in a typical bash prompt?</p>\n",
    "answer": "<p>A widely available method to get user input at a shell prompt is the <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#index-read\" rel=\"nofollow noreferrer\"><code>read</code></a> command. Here is a demonstration:</p>\n<pre><code>while true; do\n    read -p &quot;Do you wish to install this program? &quot; yn\n    case $yn in\n        [Yy]* ) make install; break;;\n        [Nn]* ) exit;;\n        * ) echo &quot;Please answer yes or no.&quot;;;\n    esac\ndone\n</code></pre>\n<hr />\n<p>Another method, <a href=\"https://stackoverflow.com/a/226946/9084\">pointed out</a> by <a href=\"https://stackoverflow.com/users/28604/steven-huwig\">Steven Huwig</a>, is Bash's <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#index-select\" rel=\"nofollow noreferrer\"><code>select</code></a> command. Here is the same example using <code>select</code>:</p>\n<pre><code>echo &quot;Do you wish to install this program?&quot;\nselect yn in &quot;Yes&quot; &quot;No&quot;; do\n    case $yn in\n        Yes ) make install; break;;\n        No ) exit;;\n    esac\ndone\n</code></pre>\n<p>With <code>select</code> you don't need to sanitize the input – it displays the available choices, and you type a number corresponding to your choice. It also loops automatically, so there's no need for a <code>while true</code> loop to retry if they give invalid input. If you want to allow more flexible input (accepting the words of the options, rather than <a href=\"https://www.gnu.org/software/bash/manual/bashref.html#index-select\" rel=\"nofollow noreferrer\">just their number</a>), you can alter it like this:</p>\n<pre><code>echo &quot;Do you wish to install this program?&quot;\nselect strictreply in &quot;Yes&quot; &quot;No&quot;; do\n    relaxedreply=${strictreply:-$REPLY}\n    case $relaxedreply in\n        Yes | yes | y ) make install; break;;\n        No  | no  | n ) exit;;\n    esac\ndone\n</code></pre>\n<hr />\n<p>Also, <a href=\"https://stackoverflow.com/users/7939871/l%c3%a9a-gris\">Léa Gris</a> demonstrated a way to make the request language agnostic in <a href=\"https://stackoverflow.com/a/57739142/9084\">her answer</a>. Adapting my first example to better serve multiple languages might look like this:</p>\n<pre><code>set -- $(locale LC_MESSAGES)\nyesexpr=&quot;$1&quot;; noexpr=&quot;$2&quot;; yesword=&quot;$3&quot;; noword=&quot;$4&quot;\n\nwhile true; do\n    read -p &quot;Install (${yesword} / ${noword})? &quot; yn\n    if [[ &quot;$yn&quot; =~ $yesexpr ]]; then make install; exit; fi\n    if [[ &quot;$yn&quot; =~ $noexpr ]]; then exit; fi\n    echo &quot;Answer ${yesword} / ${noword}.&quot;\ndone\n</code></pre>\n<p>Obviously other communication strings remain untranslated here (Install, Answer) which would need to be addressed in a more fully completed translation, but even a partial translation would be helpful in many cases.</p>\n<hr />\n<p>Finally, please check out the <a href=\"https://stackoverflow.com/a/27875395/9084\">excellent answer</a> by <a href=\"https://stackoverflow.com/users/1765658/f-hauri\">F. Hauri</a>.</p>\n"
  },
  {
    "question": "<p>Can I ignore files locally without polluting the global git config for everyone else? I have untracked files that are spam in my git status but I don't want to commit git config changes for every single little random untracked file I have in my local branches.</p>\n",
    "answer": "<p>From <a href=\"http://git-scm.com/docs/gitignore\" rel=\"noreferrer\">the relevant Git documentation</a>:</p>\n\n<blockquote>\n  <p>Patterns which are specific to a particular repository but which do not need to be shared with other related repositories (e.g., auxiliary files that live inside the repository but are specific to one user's workflow) should go into the <code>$GIT_DIR/info/exclude</code> file.</p>\n</blockquote>\n\n<p>The <code>.git/info/exclude</code> file has the same format as any <code>.gitignore</code> file. Another option is to set <code>core.excludesFile</code> to the name of a file containing global patterns.</p>\n\n<p>Note, if you already have unstaged changes you must run the following after editing your ignore-patterns:</p>\n\n<pre><code>git update-index --assume-unchanged &lt;file-list&gt;\n</code></pre>\n\n<p><em>Note on <code>$GIT_DIR</code></em>: This is a notation used <a href=\"https://git-scm.com/docs/git-rev-parse#_options_for_files\" rel=\"noreferrer\">all over</a> the git manual simply to indicate the path to the git repository. If the environment variable is set, then it will override the location of whichever repo you're in, which probably isn't what you want.</p>\n\n<hr>\n\n<p><strong>Edit</strong>: Another way is to use:</p>\n\n<pre><code>git update-index --skip-worktree &lt;file-list&gt;\n</code></pre>\n\n<p>Reverse it by:</p>\n\n<pre><code>git update-index --no-skip-worktree &lt;file-list&gt;\n</code></pre>\n"
  },
  {
    "question": "<p>I have a local branch <code>master</code> that points to a remote branch <code>origin/regacy</code> (oops, typo!).</p>\n<p>How do I rename the remote branch to <code>origin/legacy</code> or <code>origin/master</code>?</p>\n<p>I tried:</p>\n<pre><code>git remote rename regacy legacy\n</code></pre>\n<p>But this gave an error:</p>\n<blockquote>\n<p>error : Could not rename config section 'remote.regacy' to 'remote.legacy'</p>\n</blockquote>\n",
    "answer": "<p><a href=\"https://i.sstatic.net/YeBYR.jpg\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/YeBYR.jpg\" alt=\"schematic, cute git remote graph\" /></a></p>\n<hr />\n<p>There are a few ways to accomplish that:</p>\n<ol>\n<li>Change your local branch and then push your changes</li>\n<li>Push the branch to remote with the new name while keeping the original name locally</li>\n</ol>\n<h3>Renaming local and remote</h3>\n<pre class=\"lang-bash prettyprint-override\"><code># Names of things - allows you to copy/paste commands\nold_name=feature/old\nnew_name=feature/new\nremote=origin\n\n# Rename the local branch to the new name\ngit branch -m $old_name $new_name\n\n# Delete the old branch on remote\ngit push $remote --delete $old_name\n\n# Or shorter way to delete remote branch [:]\ngit push $remote :$old_name\n\n# Prevent git from using the old name when pushing in the next step.\n# Otherwise, git will use the old upstream name instead of $new_name.\ngit branch --unset-upstream $new_name\n\n# Push the new branch to remote\ngit push $remote $new_name\n\n# Reset the upstream branch for the new_name local branch\ngit push $remote -u $new_name\n</code></pre>\n<p><a href=\"https://i.sstatic.net/YOHON.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/YOHON.png\" alt=\"console screenshot\" /></a></p>\n<hr />\n<h3>Renaming Only remote branch</h3>\n<p>Credit: <a href=\"https://stackoverflow.com/questions/30590083/how-do-i-rename-both-a-git-local-and-remote-branch-name/30590238#42173564\">ptim</a></p>\n<pre class=\"lang-bash prettyprint-override\"><code># In this option, we will push the branch to the remote with the new name\n# While keeping the local name as is\ngit push $remote $remote/$old_name:refs/heads/$new_name :$old_name\n</code></pre>\n<hr />\n<h3>Important note:</h3>\n<p>When you use the <code>git branch -m</code> (move), Git is also <strong>updating</strong> your tracking branch with the new name.</p>\n<blockquote>\n<p><code>git remote rename legacy legacy</code></p>\n</blockquote>\n<p><code>git remote rename</code> is trying to update your remote section in your configuration file. It will rename the remote with the given name to the new name, but in your case, it did not find any, so the renaming failed.</p>\n<p><strong>But</strong> it will not do what you think; it will rename your <strong>local</strong> configuration remote name and <strong>not</strong> the remote branch. </p>\n<hr />\n<p><strong>Note</strong>\nGit servers might allow you to rename Git branches using the web interface or external programs (like Sourcetree, etc.), but you have to keep in mind that in Git all the work is done locally, so it's recommended to use the above commands to the work.</p>\n"
  },
  {
    "question": "<p>Without creating a branch and doing a bunch of funky work on a new branch, is it possible to break a single commit into a few different commits after it's been committed to the local repository?</p>\n",
    "answer": "<p><a href=\"http://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#_changing_multiple\" rel=\"noreferrer\"><code>git rebase -i</code></a> will do it.</p>\n<p>First, start with a clean working directory: <code>git status</code> should show no pending modifications, deletions, or additions.</p>\n<p>Now, you have to decide which commit(s) you want to split.</p>\n<h3>A) Splitting the most recent commit</h3>\n<p>To split apart your most recent commit, first:</p>\n<pre><code>$ git reset HEAD~\n</code></pre>\n<p>Now commit the pieces individually in the usual way, producing as many commits as you need.</p>\n<h3>B) Splitting a commit farther back</h3>\n<p>This requires <em>rebasing</em>, that is, rewriting history. To specify the correct commit, you have several choices:</p>\n<ul>\n<li><p>If it is three commits back, then</p>\n<pre><code>  $ git rebase -i HEAD~3\n</code></pre>\n<p>where <code>3</code> is how many commits back it is.</p>\n</li>\n<li><p>If it is farther back in the tree than you want to count, then</p>\n<pre><code>  $ git rebase -i 123abcd~\n</code></pre>\n<p>where <code>123abcd</code> is the SHA1 of the commit you want to split up.</p>\n</li>\n<li><p>If you want to rebase the entire current branch simply do:</p>\n<pre><code>  $ git rebase -i\n</code></pre>\n</li>\n<li><p>If you are on a different branch (e.g., a feature branch) that you want to merge into <code>master</code>:</p>\n<pre><code>  $ git rebase -i master\n</code></pre>\n</li>\n</ul>\n<p>When you get the rebase edit screen, find the commit you want to break apart.  At the beginning of that line, replace <code>pick</code> with <code>edit</code> (<code>e</code> for short).  Save the buffer and exit.  Rebase will now stop just after the commit you want to edit.  Then:</p>\n<pre><code>$ git reset HEAD~\n</code></pre>\n<p>Commit the pieces individually in the usual way, producing as many commits as you need.</p>\n<p>Finally</p>\n<pre><code>$ git rebase --continue\n</code></pre>\n<h1>If you want to preserve authorship</h1>\n<p>If you want to preserve the authorship of commits, and possibly the date as well, see <a href=\"https://stackoverflow.com/questions/78356035/copy-author-and-date-from-other-commit-but-not-the-message\">copy author and date from other commit, but _not_ the message</a></p>\n"
  },
  {
    "question": "<p>A rather unusual situation perhaps, but I want to specify a private SSH-key to use when executing a shell (<code>git</code>) command from the local computer.</p>\n<p>Basically like this:</p>\n<pre><code>git clone git@github.com:TheUser/TheProject.git -key &quot;/home/christoffer/ssh_keys/theuser&quot;\n</code></pre>\n<p>Or even better (in Ruby):</p>\n<pre><code>with_key(&quot;/home/christoffer/ssh_keys/theuser&quot;) do\n  sh(&quot;git clone git@github.com:TheUser/TheProject.git&quot;)\nend\n</code></pre>\n<p>I have seen examples of connecting to a remote server with <code>Net::SSH</code> that uses a specified private key, but this is a local command. Is it possible?</p>\n",
    "answer": "<p>Something like this should work (suggested by orip):</p>\n\n<pre><code>ssh-agent bash -c 'ssh-add /somewhere/yourkey; git clone git@github.com:user/project.git'\n</code></pre>\n\n<p>if you prefer subshells, you could try the following (though it is more fragile):</p>\n\n<pre><code>ssh-agent $(ssh-add /somewhere/yourkey; git clone git@github.com:user/project.git)\n</code></pre>\n\n<p>Git will invoke SSH which will find its agent by environment variable; this will, in turn, have the key loaded.</p>\n\n<p>Alternatively, setting <code>HOME</code> may also do the trick, provided you are willing to setup a directory that contains only a <code>.ssh</code> directory as <code>HOME</code>; this may either contain an identity.pub, or a <a href=\"http://linux.die.net/man/5/ssh_config\" rel=\"noreferrer\">config file</a> setting IdentityFile.</p>\n"
  },
  {
    "question": "<p>I used to use CShell (<a href=\"/questions/tagged/csh\" class=\"post-tag\" title=\"show questions tagged &#39;csh&#39;\" rel=\"tag\">csh</a>), which lets you make an alias that takes a parameter. The notation was something like</p>\n\n<pre><code>alias junk=\"mv \\\\!* ~/.Trash\"\n</code></pre>\n\n<p>In Bash, this does not seem to work. Given that Bash has a multitude of useful features, I would assume that this one has been implemented but I am wondering how.</p>\n",
    "answer": "<p>Bash alias does not directly accept parameters. You will have to create a function.</p>\n\n<p><code>alias</code> does not accept parameters but a function can be called just like an alias. For example:</p>\n\n<pre><code>myfunction() {\n    #do things with parameters like $1 such as\n    mv \"$1\" \"$1.bak\"\n    cp \"$2\" \"$1\"\n}\n\n\nmyfunction old.conf new.conf #calls `myfunction`\n</code></pre>\n\n<p>By the way, Bash functions defined in your <code>.bashrc</code> and other files are available as commands within your shell. So for instance you can call the earlier function like this </p>\n\n<pre><code>$ myfunction original.conf my.conf\n</code></pre>\n"
  },
  {
    "question": "<p>How do I discard the changes to a single file and overwrite it with a fresh HEAD copy? I want to do <code>git reset --hard</code> to only a single file.</p>\n",
    "answer": "<p>To reset both the working copy of <code>my-file.txt</code> and its state in the Git index to that of HEAD:</p>\n<pre><code>git checkout HEAD -- my-file.txt\n</code></pre>\n<p><code>--</code> means <em>&quot;treat every argument after this point as a filename&quot;</em>. More details in <a href=\"https://stackoverflow.com/questions/6561142/different-between-git-checkout-filename-and-git-checkout-filename/6561160#6561160\">this answer</a>. Thanks to <a href=\"https://stackoverflow.com/users/6309/vonc\">VonC</a> for pointing this out.</p>\n"
  },
  {
    "question": "<p>Is there a way in <a href=\"/questions/tagged/bash\" class=\"post-tag\" title=\"show questions tagged &#39;bash&#39;\" rel=\"tag\">bash</a> to convert a string into a lower case string?</p>\n\n<p>For example, if I have:</p>\n\n<pre><code>a=\"Hi all\"\n</code></pre>\n\n<p>I want to convert it to:</p>\n\n<pre><code>\"hi all\"\n</code></pre>\n",
    "answer": "<p>There are various ways:</p>\n<h3><a href=\"https://wikipedia.org/wiki/POSIX\" rel=\"noreferrer\">POSIX standard</a></h3>\n<h4><a href=\"https://wikipedia.org/wiki/Tr_%28Unix%29\" rel=\"noreferrer\">tr</a></h4>\n<pre><code>$ echo &quot;$a&quot; | tr '[:upper:]' '[:lower:]'\nhi all\n</code></pre>\n<h4><a href=\"https://wikipedia.org/wiki/AWK\" rel=\"noreferrer\">AWK</a></h4>\n<pre><code>$ echo &quot;$a&quot; | awk '{print tolower($0)}'\nhi all\n</code></pre>\n<h2>Non-POSIX</h2>\n<p>You may run into portability issues with the following examples:</p>\n<h4><a href=\"https://wikipedia.org/wiki/Bash_%28Unix_shell%29\" rel=\"noreferrer\">Bash 4.0</a></h4>\n<pre><code>$ echo &quot;${a,,}&quot;\nhi all\n</code></pre>\n<h4><a href=\"https://wikipedia.org/wiki/Sed\" rel=\"noreferrer\">sed</a></h4>\n<pre><code>$ echo &quot;$a&quot; | sed -e 's/\\(.*\\)/\\L\\1/'\nhi all\n# this also works:\n$ sed -e 's/\\(.*\\)/\\L\\1/' &lt;&lt;&lt; &quot;$a&quot;\nhi all\n</code></pre>\n<h4><a href=\"https://wikipedia.org/wiki/Perl\" rel=\"noreferrer\">Perl</a></h4>\n<pre><code>$ echo &quot;$a&quot; | perl -ne 'print lc'\nhi all\n</code></pre>\n<h4><a href=\"https://wikipedia.org/wiki/Bash_%28Unix_shell%29\" rel=\"noreferrer\">Bash</a></h4>\n<pre><code>lc(){\n    case &quot;$1&quot; in\n        [A-Z])\n        n=$(printf &quot;%d&quot; &quot;'$1&quot;)\n        n=$((n+32))\n        printf \\\\$(printf &quot;%o&quot; &quot;$n&quot;)\n        ;;\n        *)\n        printf &quot;%s&quot; &quot;$1&quot;\n        ;;\n    esac\n}\nword=&quot;I Love Bash&quot;\nfor((i=0;i&lt;${#word};i++))\ndo\n    ch=&quot;${word:$i:1}&quot;\n    lc &quot;$ch&quot;\ndone\n</code></pre>\n<p>Note: YMMV on this one. Doesn't work for me (GNU bash version 4.2.46 and 4.0.33 (and same behaviour 2.05b.0 but <code>nocasematch</code>  is not implemented)) even with using <code>shopt -u nocasematch;</code>. Unsetting that <code>nocasematch</code> causes <code>[[ &quot;fooBaR&quot; == &quot;FOObar&quot; ]]</code> to match OK BUT inside case weirdly <code>[b-z]</code> are incorrectly matched by <code>[A-Z]</code>. Bash is confused by the double-negative (&quot;unsetting nocasematch&quot;)! :-)</p>\n"
  },
  {
    "question": "<p><code>git revert &lt;commit_hash&gt;</code> alone won't work. Apparently, <code>-m</code> must be specified.</p>\n",
    "answer": "<p>In <code>git revert -m</code>, the <code>-m</code> option specifies the <strong>parent number</strong>. This is needed because a merge commit has more than one parent, and Git does not know automatically which parent was the mainline, and which parent was the branch you want to un-merge.</p>\n<p>When you view a merge commit in the output of <code>git log</code>, you will see its parents listed on the line that begins with <code>Merge:</code> (the second line in this case):</p>\n<pre><code>commit 8f937c683929b08379097828c8a04350b9b8e183\nMerge: 8989ee0 7c6b236\nAuthor: Ben James &lt;ben@example.com&gt;\nDate:   Wed Aug 17 22:49:41 2011 +0100\n\nMerge branch 'gh-pages'\n\nConflicts:\n    README\n</code></pre>\n<p>In this situation, <code>git revert 8f937c6 -m 1</code> will get you the tree as it was in <code>8989ee0</code>, and <code>git revert -m 2</code> will reinstate the tree as it was in <code>7c6b236</code>.</p>\n<p>To better understand what you're about to revert do <code>git diff &lt;parent_commit&gt; &lt;commit_to_revert&gt;</code>, in this case:</p>\n<pre><code>git diff 8989ee0 8f937c6\n</code></pre>\n<p>and</p>\n<pre><code>git diff 7c6b236 8f937c6\n</code></pre>\n<p>However, it's <strong>very important</strong> you realize that in doing so</p>\n<blockquote>\n<p>&quot;...declares that you will never want the tree changes brought in by the merge. As a result, later merges will only bring in tree changes introduced by commits that are not ancestors of the previously reverted merge. This may or may not be what you want. See the <a href=\"https://mirrors.edge.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.html\" rel=\"noreferrer\">revert-a-faulty-merge How-To</a> for more details.&quot; (<a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-revert.html\" rel=\"noreferrer\">git-merge man page</a>).</p>\n</blockquote>\n"
  },
  {
    "question": "<pre><code>git init\ngit add .\n</code></pre>\n<p>Gives the following warnings for many files:</p>\n<blockquote>\n<p>The file will have its original line endings in your working directory.\nwarning: LF will be replaced by CRLF in &lt;filename&gt;.</p>\n</blockquote>\n<p>What's the difference between LF and CRLF? What should I do about the warnings?</p>\n",
    "answer": "<p>In Unix systems the end of a line is represented with a line feed (LF). In windows a line is represented with a carriage return (CR) and a line feed (LF) thus (CRLF). when you get code from git that was uploaded from a unix system they will only have an LF.</p>\n\n<p>If you are a single developer working on a windows machine, and you don't care that git automatically replaces LFs to CRLFs, you can turn this warning off by typing the following in the git command line</p>\n\n<pre><code>git config core.autocrlf true\n</code></pre>\n\n<p>If you want to make an intelligent decision how git should handle this, <a href=\"http://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#Formatting-and-Whitespace\" rel=\"noreferrer\">read the documentation</a> </p>\n\n<p>Here is a snippet</p>\n\n<blockquote>\n  <p><strong>Formatting and Whitespace</strong></p>\n  \n  <p>Formatting and whitespace issues are some of the more frustrating and\n  subtle problems that many developers encounter when collaborating,\n  especially cross-platform. It’s very easy for patches or other\n  collaborated work to introduce subtle whitespace changes because\n  editors silently introduce them, and if your files ever touch a\n  Windows system, their line endings might be replaced. Git has a few\n  configuration options to help with these issues.</p>\n\n<pre><code>core.autocrlf\n</code></pre>\n  \n  <p>If you’re programming on Windows and working with people who are not\n  (or vice-versa), you’ll probably run into line-ending issues at some\n  point. This is because Windows uses both a carriage-return character\n  and a linefeed character for newlines in its files, whereas Mac and\n  Linux systems use only the linefeed character. This is a subtle but\n  incredibly annoying fact of cross-platform work; many editors on\n  Windows silently replace existing LF-style line endings with CRLF, or\n  insert both line-ending characters when the user hits the enter key.</p>\n  \n  <p>Git can handle this by auto-converting CRLF line endings into LF when\n  you add a file to the index, and vice versa when it checks out code\n  onto your filesystem. You can turn on this functionality with the\n  core.autocrlf setting. If you’re on a Windows machine, set it to true\n  – this converts LF endings into CRLF when you check out code:</p>\n\n<pre><code>$ git config --global core.autocrlf true\n</code></pre>\n  \n  <p>If you’re on a Linux or Mac system that uses LF line endings, then you\n  don’t want Git to automatically convert them when you check out files;\n  however, if a file with CRLF endings accidentally gets introduced,\n  then you may want Git to fix it. You can tell Git to convert CRLF to\n  LF on commit but not the other way around by setting core.autocrlf to\n  input:</p>\n\n<pre><code>$ git config --global core.autocrlf input\n</code></pre>\n  \n  <p>This setup should leave you with CRLF endings in Windows checkouts,\n  but LF endings on Mac and Linux systems and in the repository.</p>\n  \n  <p>If you’re a Windows programmer doing a Windows-only project, then you\n  can turn off this functionality, recording the carriage returns in the\n  repository by setting the config value to false:</p>\n\n<pre><code>$ git config --global core.autocrlf false\n</code></pre>\n</blockquote>\n"
  },
  {
    "question": "<p>I'm using Git on a new project that has two parallel -- but currently experimental -- development branches:</p>\n<ul>\n<li><code>master</code>: import of existing codebase plus a few modifications that I'm generally sure of</li>\n<li><code>exp1</code>: experimental branch #1</li>\n<li><code>exp2</code>: experimental branch #2</li>\n</ul>\n<p><code>exp1</code> and <code>exp2</code> represent two very different architectural approaches. Until I get further along I have no way of knowing which one (if either) will work. As I make progress in one branch I sometimes have edits that would be useful in the other branch and would like to merge just those.</p>\n<p><strong>What is the best way to merge selective changes from one development branch to another while leaving behind everything else?</strong></p>\n<p>Approaches I've considered:</p>\n<ol>\n<li><p><code>git merge --no-commit</code> followed by manual unstaging of a large number of edits that I don't want to make common between the branches.</p>\n</li>\n<li><p>Manual copying of common files into a temporary directory followed by <code>git checkout</code> to move to the other branch and then more manual copying out of the temporary directory into the working tree.</p>\n</li>\n<li><p>A variation on the above. Abandon the <code>exp</code> branches for now and use two additional local repositories for experimentation.  This makes the manual copying of files much more straightforward.</p>\n</li>\n</ol>\n<p>All three of these approaches seem tedious and error-prone.  I'm hoping there is a better approach; something akin to a filter path parameter that would make <code>git-merge</code> more selective.</p>\n",
    "answer": "<p>You use the <a href=\"https://git-scm.com/docs/git-cherry-pick\" rel=\"noreferrer\">cherry-pick</a> command to get individual commits from one branch.</p>\n<p>If the change(s) you want are not in individual commits, then use the method shown here to <a href=\"http://plasmasturm.org/log/530/\" rel=\"noreferrer\">split the commit into individual commits</a>. Roughly speaking, you use <code>git rebase -i</code> to get the original commit to edit, then <code>git reset HEAD^</code> to selectively revert changes, then <code>git commit</code> to commit that bit as a new commit in the history.</p>\n<p><a href=\"http://web.archive.org/web/20130727101330/http://magazine.redhat.com:80/2008/05/02/shipping-quality-code-with-git/\" rel=\"noreferrer\">There is another nice method here</a> in Red Hat Magazine, where they use <code>git add --patch</code> or possibly <code>git add --interactive</code> which allows you to add just parts of a hunk, if you want to split different changes to an individual file (search in that page for &quot;split&quot;).</p>\n<p>Having split the changes, you can now cherry-pick just the ones you want.</p>\n"
  },
  {
    "question": "<p>How can I remove those annoying Mac OS X <code>.DS_Store</code> files from a Git repository?</p>\n",
    "answer": "<p>Remove existing <code>.DS_Store</code> files from the repository:</p>\n<pre><code>find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch\n</code></pre>\n<p>Add this line:</p>\n<pre><code>.DS_Store\n</code></pre>\n<p>to the file <code>.gitignore</code>, which can be found at the top level of your repository (or create the file if it isn't there already). You can do this easily with this command in the top directory:</p>\n<pre><code>echo .DS_Store &gt;&gt; .gitignore\n</code></pre>\n<p>Then commit the file to the repo:</p>\n<pre><code>git add .gitignore\ngit commit -m '.DS_Store banished!'\n</code></pre>\n"
  },
  {
    "question": "<p>I'd like to show all configured Git sections.</p>\n\n<p>I only found <code>git config --get core.editor</code>, and I'd like to output everything that's configured globally, not only the configured default editor.</p>\n",
    "answer": "<p>You can use:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git config --list\n</code></pre>\n\n<p>or look at your <code>~/.gitconfig</code> file. The local configuration will be in your repository's <code>.git/config</code> file.</p>\n\n<p>Use:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git config --list --show-origin\n</code></pre>\n\n<p>to see where that setting is defined (global, user, repo, etc...)</p>\n"
  },
  {
    "question": "<p>I made a branch called 'f' and did a checkout to master. When I tried the <code>git pull</code> command I got this message:</p>\n\n<pre><code>You have not concluded your merge (MERGE_HEAD exists).\nPlease, commit your changes before you can merge.\n</code></pre>\n\n<p>When I try the <code>git status</code>, it gave me the following:</p>\n\n<pre><code>On branch master\n# Your branch and 'origin/master' have diverged,\n# and have 1 and 13 different commit(s) each, respectively.\n#\n# Changes to be committed:\n#\n#   modified:   app/assets/images/backward.png\n#   modified:   app/assets/images/forward.png\n#   new file:   app/assets/images/index_background.jpg\n#   new file:   app/assets/images/loading.gif\n#   modified:   app/assets/images/pause.png\n#   modified:   app/assets/images/play.png\n#   new file:   app/assets/javascripts/jquery-ui-bootstrap.js\n#   new file:   app/assets/stylesheets/jquery-ui-bootstrap.css\n#   modified:   app/controllers/friends_controller.rb\n#   modified:   app/controllers/plays_controller.rb\n#   modified:   app/mailers/invite_friends_mailer.rb\n#   modified:   app/mailers/send_plays_mailer.rb\n#   modified:   app/mailers/shot_chart_mailer.rb\n#   modified:   app/views/friends/show_plays.html.erb\n#   modified:   app/views/layouts/application.html.erb\n#   modified:   app/views/plays/_inbox_table.html.erb\n#   modified:   app/views/plays/show.html.erb\n#   modified:   app/views/welcome/contact_form.html.erb\n#   modified:   app/views/welcome/index.html.erb\n#   modified:   log/development.log\n#   modified:   log/restclient.log\n#   new file:   tmp/cache/assets/C1A/C00/sprockets%2Fb7901e0813446f810e560158a1a97066\n#   modified:   tmp/cache/assets/C64/930/sprockets%2F65aa1510292214f4fd1342280d521e4c\n#   new file:   tmp/cache/assets/C73/C40/sprockets%2F96912377b93498914dd04bc69fa98585\n#   new file:   tmp/cache/assets/CA9/090/sprockets%2Fa71992733a432421e67e03ff1bd441d8\n#   new file:   tmp/cache/assets/CCD/7E0/sprockets%2F47125c2ebd0e8b29b6511b7b961152a1\n#   modified:   tmp/cache/assets/CD5/DD0/sprockets%2F59d317902de6e0f68689899259caff26\n#   modified:   tmp/cache/assets/CE3/080/sprockets%2F5c3b516e854760f14eda2395c4ff2581\n#   new file:   tmp/cache/assets/CED/B20/sprockets%2F423772fde44ab6f6f861639ee71444c4\n#   new file:   tmp/cache/assets/D0C/E10/sprockets%2F8d1f4b30c6be13017565fe1b697156ce\n#   new file:   tmp/cache/assets/D12/290/sprockets%2F93ae21f3cdd5e24444ae4651913fd875\n#   new file:   tmp/cache/assets/D13/FC0/sprockets%2F57aad34b9d3c9e225205237dac9b1999\n#   new file:   tmp/cache/assets/D1D/DE0/sprockets%2F5840ff4283f6545f472be8e10ce67bb8\n#   new file:   tmp/cache/assets/D23/BD0/sprockets%2F439d5dedcc8c54560881edb9f0456819\n#   new file:   tmp/cache/assets/D24/570/sprockets%2Fb449db428fc674796e18b7a419924afe\n#   new file:   tmp/cache/assets/D28/480/sprockets%2F9aeec798a04544e478806ffe57e66a51\n#   new file:   tmp/cache/assets/D3A/ED0/sprockets%2Fcd959cbf710b366c145747eb3c062bb4\n#   new file:   tmp/cache/assets/D3C/060/sprockets%2F363ac7c9208d3bb5d7047f11c159d7ce\n#   new file:   tmp/cache/assets/D48/D00/sprockets%2Fe23c97b8996e7b5567a3080c285aaccb\n#   new file:   tmp/cache/assets/D6A/900/sprockets%2Fa5cece9476b21aa4d5f46911ca96c450\n#   new file:   tmp/cache/assets/D6C/510/sprockets%2Fb086a020de3c258cb1c67dfc9c67d546\n#   new file:   tmp/cache/assets/D70/F30/sprockets%2Facf9a6348722adf1ee7abbb695603078\n#   new file:   tmp/cache/assets/DA3/4A0/sprockets%2F69c26d0a9ca8ce383e20897cefe05aa4\n#   new file:   tmp/cache/assets/DA7/2F0/sprockets%2F61da396fb86c5ecd844a2d83ac759b4b\n#   new file:   tmp/cache/assets/DB9/C80/sprockets%2F876fbfb9685b2b8ea476fa3c67ae498b\n#   new file:   tmp/cache/assets/DBD/7A0/sprockets%2F3640ea84a1dfaf6f91a01d1d6fbe223d\n#   new file:   tmp/cache/assets/DC1/8D0/sprockets%2Fe5ee1f1cfba2144ec00b1dcd6773e691\n#   new file:   tmp/cache/assets/DCC/E60/sprockets%2Fd6a95f601456c93ff9a1bb70dea3dfc0\n#   new file:   tmp/cache/assets/DF1/130/sprockets%2Fcda4825bb42c91e2d1f1ea7b2b958bda\n#   new file:   tmp/cache/assets/E23/DE0/sprockets%2Fb1acc25c28cd1fabafbec99d169163d3\n#   new file:   tmp/cache/assets/E23/FD0/sprockets%2Fea3dbcd1f341008ef8be67b1ccc5a9c5\n#   modified:   tmp/cache/assets/E4E/AD0/sprockets%2Fb930f45cfe7c6a8d0efcada3013cc4bc\n#   new file:   tmp/cache/assets/E63/7D0/sprockets%2F77de495a665c3ebcb47befecd07baae6\n#   modified:   tmp/pids/server.pid\n#\n# Untracked files:\n#   (use \"git add &lt;file&gt;...\" to include in what will be committed)\n#\n#   Coachbase/\n#   log/development.log.orig\n#   log/restclient.log.orig\n</code></pre>\n\n<p>What should I do?</p>\n",
    "answer": "<p>The problem is your previous pull failed to merge automatically and went to conflict state. And the conflict wasn't resolved properly before the next pull.</p>\n<ol>\n<li><p>Undo the merge and pull again.</p>\n<p>To undo a merge:</p>\n<p><code>git merge --abort</code>  [Since git version 1.7.4]</p>\n<p><code>git reset --merge</code>  [prior git versions]</p>\n</li>\n<li><p>Resolve the conflict.</p>\n</li>\n<li><p><strong>Don't forget to add and commit the merge.</strong></p>\n</li>\n<li><p><code>git pull</code> now should work fine.</p>\n</li>\n</ol>\n"
  },
  {
    "question": "<p>My <code>.gitignore</code> file seems to be being ignored by Git - could the <code>.gitignore</code> file be corrupt? Which file format, locale or culture does Git expect?</p>\n\n<p>My <code>.gitignore</code>:</p>\n\n<pre><code># This is a comment\ndebug.log\nnbproject/\n</code></pre>\n\n<p>Output from <code>git status</code>:</p>\n\n<pre><code># On branch master\n# Your branch is ahead of 'origin/master' by 1 commit.\n#\n# Untracked files:\n#   (use \"git add &lt;file&gt;...\" to include in what will be committed)\n#\n#       debug.log\n#       nbproject/\nnothing added to commit but untracked files present (use \"git add\" to track)\n</code></pre>\n\n<p>I would like <code>debug.log</code> and <code>nbproject/</code> not to appear in the untracked files list.</p>\n\n<p>Where should I start looking to fix this?</p>\n",
    "answer": "<p>Fixed. OK, I created the .gitignore file in Notepad on Windows and it wasn't working. When I viewed the .gitignore file on Linux it looked like organised gibberish - perhaps Notepad had written out Unicode rather than ASCII or whatever 8-bit is.</p>\n\n<p>So I rewrote the file on my Linux box, and when I pulled it back into Windows it works fine! Hurrah!</p>\n"
  },
  {
    "question": "<p>I'm new at the branching complexities of Git. I always work on a single branch and commit changes and then periodically push to my remote origin.</p>\n\n<p>Somewhere recently, I did a reset of some files to get them out of commit staging, and later did a <code>rebase -i</code> to get rid of a couple recent local commits. Now I'm in a state I don't quite understand.</p>\n\n<p>In my working area, <code>git log</code> shows exactly what I'd expect-- I'm on the right train with the commits I didn't want gone, and new ones there, etc.</p>\n\n<p>But I just pushed to the remote repository, and what's there is different-- a couple of the commits I'd killed in the rebase got pushed, and the new ones committed locally aren't there. </p>\n\n<p>I think \"master/origin\" is detached from HEAD, but I'm not 100% clear on what that means, how to visualize it with the command line tools, and how to fix it.</p>\n",
    "answer": "<p>First, let’s clarify <a href=\"https://git-scm.com/book/en/v2/Git-Internals-Git-References\" rel=\"noreferrer\"><strong>what HEAD is</strong></a> and what it means when it is detached.  </p>\n\n<p>HEAD is the symbolic name for the currently checked out commit. When HEAD is not detached (the “normal”<sup>1</sup> situation: you have a branch checked out), HEAD actually points to a branch’s “ref” and the branch points to the commit. HEAD is thus “attached” to a branch. When you make a new commit, the branch that HEAD points to is updated to point to the new commit. HEAD follows automatically since it just points to the branch.</p>\n\n<ul>\n<li><code>git symbolic-ref HEAD</code> yields <code>refs/heads/master</code><br>\nThe branch named “master” is checked out.</li>\n<li><code>git rev-parse refs/heads/master</code> yield <code>17a02998078923f2d62811326d130de991d1a95a</code><br>\nThat commit is the current tip or “head” of the master branch.</li>\n<li><code>git rev-parse HEAD</code> also yields <code>17a02998078923f2d62811326d130de991d1a95a</code><br>\nThis is what it means to be a “symbolic ref”. It points to an object through some other reference.<br>\n(Symbolic refs were originally implemented as symbolic links, but later changed to plain files with extra interpretation so that they could be used on platforms that do not have symlinks.)</li>\n</ul>\n\n<p>We have <code>HEAD</code> → <code>refs/heads/master</code> → <code>17a02998078923f2d62811326d130de991d1a95a</code></p>\n\n<p>When HEAD is detached, it points directly to a commit—instead of indirectly pointing to one through a branch. You can think of a detached HEAD as being on an unnamed branch. </p>\n\n<ul>\n<li><code>git symbolic-ref HEAD</code> fails with <code>fatal: ref HEAD is not a symbolic ref</code></li>\n<li><code>git rev-parse HEAD</code> yields <code>17a02998078923f2d62811326d130de991d1a95a</code><br>\nSince it is not a symbolic ref, it must point directly to the commit itself.</li>\n</ul>\n\n<p>We have <code>HEAD</code> → <code>17a02998078923f2d62811326d130de991d1a95a</code></p>\n\n<p>The important thing to remember with a detached HEAD is that if the commit it points to is otherwise unreferenced (no other ref can reach it), then it will become “dangling” when you checkout some other commit. Eventually, such dangling commits will be pruned through the garbage collection process (by default, they are kept for at least 2 weeks and may be kept longer by being referenced by HEAD’s reflog).</p>\n\n<p><sup>1</sup>\nIt is perfectly fine to do “normal” work with a detached HEAD, you just have to keep track of what you are doing to avoid having to fish dropped history out of the reflog.</p>\n\n<hr>\n\n<p>The intermediate steps of an interactive rebase are done with a detached HEAD (partially to avoid polluting the active branch’s reflog). If you finish the full rebase operation, it will update your original branch with the cumulative result of the rebase operation and reattach HEAD to the original branch. My guess is that you never fully completed the rebase process; this will leave you with a detached HEAD pointing to the commit that was most recently processed by the rebase operation.</p>\n\n<p>To recover from your situation, you should create a branch that points to the commit currently pointed to by your detached HEAD:</p>\n\n<pre><code>git branch temp\ngit checkout temp\n</code></pre>\n\n<p><sub>(these two commands can be abbreviated as <code>git checkout -b temp</code>)</sub></p>\n\n<p>This will reattach your HEAD to the new <code>temp</code> branch.</p>\n\n<p>Next, you should compare the current commit (and its history) with the normal branch on which you expected to be working:</p>\n\n<pre><code>git log --graph --decorate --pretty=oneline --abbrev-commit master origin/master temp\ngit diff master temp\ngit diff origin/master temp\n</code></pre>\n\n<p>(You will probably want to experiment with the log options: add <code>-p</code>, leave off <code>--pretty=…</code> to see the whole log message, etc.)</p>\n\n<p>If your new <code>temp</code> branch looks good, you may want to update (e.g.) <code>master</code> to point to it:</p>\n\n<pre><code>git branch -f master temp\ngit checkout master\n</code></pre>\n\n<p><sub>(these two commands can be abbreviated as <code>git checkout -B master temp</code>)</sub></p>\n\n<p>You can then delete the temporary branch:</p>\n\n<pre><code>git branch -d temp\n</code></pre>\n\n<p>Finally, you will probably want to push the reestablished history:</p>\n\n<pre><code>git push origin master\n</code></pre>\n\n<p>You may need to add <code>--force</code> to the end of this command to push if the remote branch can not be “fast-forwarded” to the new commit (i.e. you dropped, or rewrote some existing commit, or otherwise rewrote some bit of history).</p>\n\n<p>If you were in the middle of a rebase operation you should probably clean it up. You can check whether a rebase was in process by looking for the directory <code>.git/rebase-merge/</code>. You can manually clean up the in-progress rebase by just deleting that directory (e.g. if you no longer remember the purpose and context of the active rebase operation). Usually you would use <code>git rebase --abort</code>, but that does some extra resetting that you probably want to avoid (it moves HEAD back to the original branch and resets it back to the original commit, which will undo some of the work we did above).</p>\n"
  },
  {
    "question": "<p>I have two branches: <strong>master</strong> and <strong>dev</strong></p>\n<p>I want to create a &quot;feature branch&quot; from the <em>dev</em> branch.</p>\n<p>Currently on the branch <em>dev</em>, I do:</p>\n<pre><code>git checkout -b myfeature dev\n</code></pre>\n<p>... (some work)</p>\n<pre><code>git commit -am &quot;blablabla&quot;\ngit push origin myfeature\n</code></pre>\n<p>But, after visualizing my branches, I got:</p>\n<pre><code>--**master**\n------0-----0-----0-----0-----0\n------------------------**dev**----**myfeature**\n</code></pre>\n<p>I mean that the branch seems <a href=\"https://stackoverflow.com/questions/29673869/what-is-git-fast-forwarding\">fast-forward</a> merged, and I don't understand why...</p>\n<p>What am I doing wrong?</p>\n<p>How can you branch off from another branch and push back to the remote repository for the feature branch?</p>\n<p>All that in a branching model like <a href=\"http://nvie.com/posts/a-successful-git-branching-model/\" rel=\"noreferrer\">the one described here</a>.</p>\n",
    "answer": "<p>If you like the method in the link you've posted, have a look at <a href=\"https://github.com/nvie/gitflow\" rel=\"noreferrer\">Git Flow</a>.</p>\n<p>It's a set of scripts he created for that workflow.</p>\n<p>But to answer your question:</p>\n<pre><code>git checkout -b myFeature dev\n</code></pre>\n<p>Creates the <em>myFeature</em> branch off <em>dev</em>. Do your work and then</p>\n<pre><code>git commit -am &quot;Your message&quot;\n</code></pre>\n<p>Now merge your changes to <em>dev</em> without a fast-forward</p>\n<pre><code>git checkout dev\ngit merge --no-ff myFeature\n</code></pre>\n<p>Now push the changes to the server</p>\n<pre><code>git push origin dev\ngit push origin myFeature\n</code></pre>\n<p>And you'll see it how you want it.</p>\n"
  },
  {
    "question": "<p>I have a Git repository that looks like this:</p>\n<pre><code>A &lt;- B &lt;- C &lt;- D &lt;- HEAD\n</code></pre>\n<p>I want the head of the branch to point to A, i.e., I want B, C, D, and HEAD to disappear and I want head to be synonymous with A.</p>\n<p>It sounds like I can either try to rebase (doesn't apply, since I've pushed changes in between), or revert. But how do I revert multiple commits? Do I revert one at a time? Is the order important?</p>\n",
    "answer": "<p><em>Expanding what I wrote in a comment</em></p>\n<p>The general rule is that you should not rewrite (change) history that you have published, because somebody might have based their work on it.  If you rewrite (change) history, you would make problems with merging their changes and with updating for them.</p>\n<p>So the solution is to create a <em>new commit</em> which <strong>reverts changes</strong> that you want to get rid of.  You can do this using <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-revert.html\" rel=\"noreferrer\" title=\"git-revert(1) Manual Page - Revert an existing commit\">git revert</a> command.</p>\n<p>You have the following situation:</p>\n<pre>\nA &lt;-- B  &lt;-- C &lt;-- D                                  &lt;-- master &lt;-- HEAD\n</pre>\n<p>(arrows here refers to the direction of the pointer: the &quot;parent&quot; reference in the case of commits, the top commit in the case of branch head (branch ref), and the name of branch in the case of HEAD reference).</p>\n<p>What you need to create is the following:</p>\n<pre>\nA &lt;-- B  &lt;-- C &lt;-- D &lt;-- [(BCD)<sup>-1</sup>]                   &lt;-- master &lt;-- HEAD\n</pre>\n<p>where <code>[(BCD)^-1]</code> means the commit that reverts changes in commits B, C, D.  Mathematics tells us that (BCD)<sup>-1</sup> = D<sup>-1</sup> C<sup>-1</sup> B<sup>-1</sup>, so you can get the required situation using the following commands:</p>\n<pre><code>$ git revert --no-commit D\n$ git revert --no-commit C\n$ git revert --no-commit B\n$ git commit -m &quot;the commit message for all of them&quot;\n</code></pre>\n<p>Works for everything except merge commits.</p>\n<hr />\n<p>Alternate solution would be to <a href=\"http://git-scm.com/docs/git-checkout\" rel=\"noreferrer\" title=\"git-checkout(1) Manual Page - Checkout a branch or paths to the working tree\">checkout</a> <em>contents</em> of commit A, and commit this state.  Also works with merge commits.  Added files will not be deleted, however.  If you have any local changes <code>git stash</code> them first:</p>\n<pre><code>$ git checkout -f A -- . # checkout that revision over the top of local files\n$ git commit -a\n</code></pre>\n<p>Then you would have the following situation:</p>\n<pre>\nA &lt;-- B  &lt;-- C &lt;-- D &lt;-- A'                       &lt;-- master &lt;-- HEAD\n</pre>\n<p>The commit A' has the same contents as commit A, but is a different commit (commit message, parents, commit date).</p>\n<hr />\n<p>Alternate <a href=\"https://stackoverflow.com/questions/1463340/revert-multiple-git-commits/1463390#comment1312779_1463390\">solution by Jeff Ferland, modified by Charles Bailey</a> builds upon the same idea, but uses <a href=\"https://www.kernel.org/pub/software/scm/git/docs/git-reset.html\" rel=\"noreferrer\" title=\"git-reset(1) Manual Page - Reset current HEAD to the specified state\">git reset</a>.  Here it is slightly modified, this way WORKS FOR EVERYTHING:</p>\n<pre><code>$ git reset --hard A\n$ git reset --soft D # (or ORIG_HEAD or @{1} [previous location of HEAD]), all of which are D\n$ git commit\n</code></pre>\n"
  },
  {
    "question": "<p>I have made a git commit and subsequent push. I would like to change the commit message. If I understand correctly, this is not advisable because someone might have pulled from the remote repository before I make such changes. What if I know that no one has pulled? </p>\n\n<p>Is there a way to do this?</p>\n",
    "answer": "<h3>Changing history</h3>\n\n<p>If it is the most recent commit, you can simply do this:</p>\n\n<pre><code>git commit --amend\n</code></pre>\n\n<p>This brings up the editor with the last commit message and lets you edit the message.  (You can use <code>-m</code> if you want to wipe out the old message and use a new one.)</p>\n\n<h3>Pushing</h3>\n\n<p>And then when you push, do this:</p>\n\n<pre><code>git push --force-with-lease &lt;repository&gt; &lt;branch&gt;\n</code></pre>\n\n<p>Or you can use \"+\":</p>\n\n<pre><code>git push &lt;repository&gt; +&lt;branch&gt;\n</code></pre>\n\n<p>Or you can use <code>--force</code>:</p>\n\n<pre><code>git push --force &lt;repository&gt; &lt;branch&gt;\n</code></pre>\n\n<p>Be careful when using these commands.</p>\n\n<ul>\n<li><p>If someone else pushed changes to the same branch, you probably want to avoid destroying those changes.  The <code>--force-with-lease</code> option is the safest, because it will abort if there are any upstream changes (</p></li>\n<li><p>If you don't specify the branch explicitly, Git will use the default push settings.  If your default push setting is \"matching\", then you may destroy changes on several branches at the same time. </p></li>\n</ul>\n\n<h3>Pulling / fetching afterwards</h3>\n\n<p>Anyone who already pulled will now get an error message, and they will need to update (assuming they aren't making any changes themselves) by doing something like this:</p>\n\n<pre><code>git fetch origin\ngit reset --hard origin/master # Loses local commits\n</code></pre>\n\n<p>Be careful when using <code>reset --hard</code>.  If you have changes to the branch, those changes will be destroyed.</p>\n\n<h3>A note about modifying history</h3>\n\n<p>The destroyed data is really just the old commit message, but <code>--force</code> doesn't know that, and will happily delete other data too.  So think of <code>--force</code> as \"I want to destroy data, and I know for sure what data is being destroyed.\"  But when the destroyed data is committed, you can often recover old commits from the reflog—the data is actually <em>orphaned</em> instead of destroyed (although orphaned commits are periodically deleted).</p>\n\n<p>If you don't think you're destroying data, then stay away from <code>--force</code>... <a href=\"https://stackoverflow.com/questions/13036947/10-git-lines-erased-8gb-form-my-pc-how-to-get-them-back/13037141\">bad things might happen</a>.</p>\n\n<p>This is why <code>--force-with-lease</code> is somewhat safer.</p>\n"
  },
  {
    "question": "<p>How can I delete a single directory containing files from a Git repository?</p>\n",
    "answer": "<h4>Remove directory from Git and local</h4>\n<p>Checkout 'master' with both directories:</p>\n<pre><code>git rm -r one-of-the-directories // This deletes from filesystem\ngit commit . -m &quot;Remove duplicated directory&quot;\ngit push origin &lt;your-git-branch&gt; (typically 'master', but not always)\n</code></pre>\n<h4>Remove directory from Git but NOT local</h4>\n<p>To remove this directory from Git, but not delete it entirely from the filesystem (local):</p>\n<pre><code>git rm -r --cached myFolder\n</code></pre>\n"
  },
  {
    "question": "<p>When using <code>git log</code>, how can I filter by user so that I see only commits from that user?</p>\n",
    "answer": "<p>This works for both <code>git log</code> and <a href=\"https://git-scm.com/docs/gitk\" rel=\"noreferrer\">gitk</a> - the 2 most common ways of viewing history.<br />\nYou don't need to use the whole name:</p>\n<pre><code>git log --author=&quot;Jon&quot;\n</code></pre>\n<p>will match a commit made by &quot;Jonathan Smith&quot;</p>\n<pre><code>git log --author=Jon\n</code></pre>\n<p>and</p>\n<pre><code>git log --author=Smith\n</code></pre>\n<p>would also work. The quotes are optional if you don't need any spaces.</p>\n<p><strong>Add <code>--all</code> if you intend to search all branches and not just the current commit's ancestors in your repo.</strong></p>\n<p>You can also easily match on multiple authors as regex is the underlying mechanism for this filter. So to list commits by Jonathan or Adam, you can do this:</p>\n<pre><code>git log --author=&quot;\\(Adam\\)\\|\\(Jon\\)&quot;\n</code></pre>\n<p>In order to exclude commits by a particular author or set of authors using regular expressions as noted <a href=\"https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word\">in this question</a>, you can use a <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"noreferrer\">negative lookahead</a> in combination with the <code>--perl-regexp</code> switch:</p>\n<pre><code>git log --author='^(?!Adam|Jon).*$' --perl-regexp\n</code></pre>\n<p>Alternatively, you can exclude commits authored by Adam by using <code>bash</code> and piping:</p>\n<pre><code>git log --format='%H %an' | \n  grep -v Adam | \n  cut -d ' ' -f1 | \n  xargs -n1 git log -1\n</code></pre>\n<p>If you want to exclude commits commited (but not necessarily authored) by Adam, replace <code>%an</code> with <code>%cn</code>. More details about this are in my blog post here: <a href=\"http://dymitruk.com/blog/2012/07/18/filtering-by-author-name/\" rel=\"noreferrer\">http://dymitruk.com/blog/2012/07/18/filtering-by-author-name/</a></p>\n"
  },
  {
    "question": "<p>Is it possible to undo the changes caused by the following command? If so, how?</p>\n\n<pre><code>git reset --hard HEAD~1\n</code></pre>\n",
    "answer": "<p>Pat Notz is correct.  You can get the commit back so long as it's been within a few days.  git only garbage collects after about a month or so unless you explicitly tell it to remove newer blobs.</p>\n\n<pre><code>$ git init\nInitialized empty Git repository in .git/\n\n$ echo \"testing reset\" &gt; file1\n$ git add file1\n$ git commit -m 'added file1'\nCreated initial commit 1a75c1d: added file1\n 1 files changed, 1 insertions(+), 0 deletions(-)\n create mode 100644 file1\n\n$ echo \"added new file\" &gt; file2\n$ git add file2\n$ git commit -m 'added file2'\nCreated commit f6e5064: added file2\n 1 files changed, 1 insertions(+), 0 deletions(-)\n create mode 100644 file2\n\n$ git reset --hard HEAD^\nHEAD is now at 1a75c1d... added file1\n\n$ cat file2\ncat: file2: No such file or directory\n\n$ git reflog\n1a75c1d... HEAD@{0}: reset --hard HEAD^: updating HEAD\nf6e5064... HEAD@{1}: commit: added file2\n\n$ git reset --hard f6e5064\nHEAD is now at f6e5064... added file2\n\n$ cat file2\nadded new file\n</code></pre>\n\n<p>You can see in the example that the file2 was removed as a result of the hard reset, but was put back in place when I reset via the reflog.</p>\n"
  },
  {
    "question": "<p>I have a Git repository with n commits.</p>\n\n<p>I have a file that I need, and that used to be in the repository, and that I suddenly look for and think \"Oh! Where'd that file go?\"</p>\n\n<p>Is there a (series of) Git command(s) that will tell me that \"file really_needed.txt was deleted at commit n-13\"?</p>\n\n<p>In other words, without looking at every individual commit, and knowing that my Git repo has every change of every file, can I quickly find the last commit that HAS that file, so I can get it back?</p>\n",
    "answer": "<p>To show the commits that changed a file, even if the file was deleted, run this command:</p>\n<pre><code>git log --all -- [file path]\n</code></pre>\n<p>If you want to see only the last commit, which deleted the file, use <code>-1</code> in addition to the command above:</p>\n<pre><code>git log --all -1 -- [file path]\n</code></pre>\n<p>NOTE: <code>git log --full-history -- [file path]</code> does <em>NOT</em> work in git version 2.42.0)</p>\n<p>See also my article: <a href=\"http://www.vogella.com/articles/Git/article.html#retrievefiles_finddeletedfile\" rel=\"noreferrer\">Which commit deleted a file</a>.</p>\n"
  },
  {
    "question": "<p>I created a Git repository with <code>git init</code>. I'd like to delete it entirely and initialise a new one.</p>\n",
    "answer": "<p>Git keeps all of its files in the <em>.git</em> directory. Just remove that one and initialise again.</p>\n<p>If you can't find it, it's because it is hidden.</p>\n<ul>\n<li><p>In <a href=\"https://en.wikipedia.org/wiki/Windows_7\" rel=\"noreferrer\">Windows 7</a>, you need to go to your folder, click on <em>Organize</em> on the top left, then click on <em>Folder and search options</em>, then click on the <em>View</em> tab and click on the <em>Show hidden files, folders and drives</em> radio button.</p>\n</li>\n<li><p>On a Mac OS X:</p>\n<ul>\n<li><p>Open a <a href=\"https://en.wikipedia.org/wiki/Terminal_(macOS)#Terminal\" rel=\"noreferrer\">Terminal</a> instance (via <a href=\"https://en.wikipedia.org/wiki/Spotlight_(Apple)\" rel=\"noreferrer\">Spotlight</a>: press <kbd>CMD</kbd> + <kbd>SPACE</kbd>, type <code>terminal</code> and press <kbd>Enter</kbd>) and run:</p>\n<pre><code>  defaults write com.apple.finder AppleShowAllFiles 1 &amp;&amp; killall Finder\n</code></pre>\n</li>\n</ul>\n<p>Note: The keyboard shortcut to show hidden files in <a href=\"https://en.wikipedia.org/wiki/Finder_(software)\" rel=\"noreferrer\">Finder</a> is\n<kbd>CMD</kbd> + <kbd>SHIFT</kbd> + <kbd>.</kbd>, so it isn't necessary any longer to modify the Finder configuration this way</p>\n<ul>\n<li>You could also type <code>cd </code> (the space is important), drag and drop your Git repository folder from Finder to the terminal window, press <kbd>return</kbd>, type <code>rm -fr .git</code>, and then <kbd>return</kbd> again.</li>\n</ul>\n</li>\n<li><p>On <a href=\"https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29\" rel=\"noreferrer\">Ubuntu</a> (<a href=\"https://en.wikipedia.org/wiki/Linux\" rel=\"noreferrer\">Linux</a>), use shortcut <kbd>Ctrl</kbd> + <kbd>H</kbd>.</p>\n</li>\n</ul>\n"
  }
]